(function(e){function t(t){for(var o,a,r=t[0],l=t[1],c=t[2],d=0,u=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&u.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,a=1;a<n.length;a++){var r=n[a];0!==i[r]&&(o=!1)}o&&(s.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},a={app:0},i={app:0},s=[];function r(e){return l.p+"js/"+({"vendors~about":"vendors~about",about:"about"}[e]||e)+"."+{"vendors~about":"f9ea9451",about:"e06cf7ef"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={about:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({"vendors~about":"vendors~about",about:"about"}[e]||e)+"."+{"vendors~about":"31d6cfe0",about:"1e2b43ea"}[e]+".css",i=l.p+o,s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var c=s[r],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===i))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){c=u[r],d=c.getAttribute("data-href");if(d===o||d===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete a[e],p.parentNode.removeChild(p),n(s)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){a[e]=0})));var o=i[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise((function(t,n){o=i[e]=[t,n]}));t.push(o[2]=s);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=r(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,n[1](u)}i[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=d;s.push([0,"vendors~app"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0093":function(e,t,n){},"01496":function(e){e.exports=JSON.parse('{"登录":"log in","登录当前账号":"Log in with current account","切换其他账号":"Switch accounts","我已阅读并同意":"I have read and agree to","和":"and","隐私条例":"Privacy Policy","用户协议":"User Agreement","免费体验":"Free trial","体验更多Demo":"More demos","访问官网":"Official website","超10亿用户的信赖":"1+ billion users trust Tencent Cloud Instant Messenger","一分钟":"1 Minute","改2行代码，1分钟跑通demo":"Quick demo run in 1 minute with changing only 2 lines of code required","每月服务客户数超过10000家":"Over 10,000 customers per month","消息收发成功率":"Success rate of message sending & receiving and service reliability higher than 99.99%","10亿":"1 billion","每月活跃用户数超过10亿":"Over 1 billion active users per month","请输入手机号":"Enter a mobile number","请输入userID":"Please enter your userID","请输入验证码":"Enter the verification code","请输入正确的手机号":"Enter a valid mobile number","请先勾选用户协议":"Agree to the User Agreement first","获取验证码":"Send verification code","登录失败":"Login failed","验证码发送成功":"Verification code sent successfully","发送验证码失败":"Failed to send the verification code","Android":"Android","iOS":"iOS","小程序":"Applet","Windows":"Windows","Mac OS":"Mac OS","扫描二维码下载":"Applet scanning QR code download","微信扫码进入":" WeChat scanning QR code to enter","点击直接下载":"Click to download directly","更多客户端体验":"More client experiences","微信扫一扫，免费体验腾讯云 IM 小程序":"Scan wechat and experience Tencent cloud im applet for free","或者截图至相册，切换微信扫一扫识别体验":"Or take a screenshot to the photo album to switch the wechat scanning recognition experience"}')},"01ce":function(e,t,n){"use strict";n("94fc")},"073e":function(e,t,n){"use strict";n("25d0")},"0a23":function(e,t,n){},"10d3":function(e,t,n){"use strict";n("13d0")},1182:function(e,t,n){"use strict";n("d871")},1196:function(e,t,n){},"13d0":function(e,t,n){},"14a4":function(e,t,n){"use strict";n("21e4")},"17da":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return r}));const o="https://web.sdk.qcloud.com/im/assets/emoji/",a={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[下雨]":"emoji_2@2x.png","[么么哒]":"emoji_3@2x.png","[乒乓]":"emoji_4@2x.png","[便便]":"emoji_5@2x.png","[信封]":"emoji_6@2x.png","[偷笑]":"emoji_7@2x.png","[傲慢]":"emoji_8@2x.png","[再见]":"emoji_9@2x.png","[冷汗]":"emoji_10@2x.png","[凋谢]":"emoji_11@2x.png","[刀]":"emoji_12@2x.png","[删除]":"emoji_13@2x.png","[勾引]":"emoji_14@2x.png","[发呆]":"emoji_15@2x.png","[发抖]":"emoji_16@2x.png","[可怜]":"emoji_17@2x.png","[可爱]":"emoji_18@2x.png","[右哼哼]":"emoji_19@2x.png","[右太极]":"emoji_20@2x.png","[右车头]":"emoji_21@2x.png","[吐]":"emoji_22@2x.png","[吓]":"emoji_23@2x.png","[咒骂]":"emoji_24@2x.png","[咖啡]":"emoji_25@2x.png","[啤酒]":"emoji_26@2x.png","[嘘]":"emoji_27@2x.png","[回头]":"emoji_28@2x.png","[困]":"emoji_29@2x.png","[坏笑]":"emoji_30@2x.png","[多云]":"emoji_31@2x.png","[大兵]":"emoji_32@2x.png","[大哭]":"emoji_33@2x.png","[太阳]":"emoji_34@2x.png","[奋斗]":"emoji_35@2x.png","[奶瓶]":"emoji_36@2x.png","[委屈]":"emoji_37@2x.png","[害羞]":"emoji_38@2x.png","[尴尬]":"emoji_39@2x.png","[左哼哼]":"emoji_40@2x.png","[左太极]":"emoji_41@2x.png","[左车头]":"emoji_42@2x.png","[差劲]":"emoji_43@2x.png","[弱]":"emoji_44@2x.png","[强]":"emoji_45@2x.png","[彩带]":"emoji_46@2x.png","[彩球]":"emoji_47@2x.png","[得意]":"emoji_48@2x.png","[微笑]":"emoji_49@2x.png","[心碎了]":"emoji_50@2x.png","[快哭了]":"emoji_51@2x.png","[怄火]":"emoji_52@2x.png","[怒]":"emoji_53@2x.png","[惊恐]":"emoji_54@2x.png","[惊讶]":"emoji_55@2x.png","[憨笑]":"emoji_56@2x.png","[手枪]":"emoji_57@2x.png","[打哈欠]":"emoji_58@2x.png","[抓狂]":"emoji_59@2x.png","[折磨]":"emoji_60@2x.png","[抠鼻]":"emoji_61@2x.png","[抱抱]":"emoji_62@2x.png","[抱拳]":"emoji_63@2x.png","[拳头]":"emoji_64@2x.png","[挥手]":"emoji_65@2x.png","[握手]":"emoji_66@2x.png","[撇嘴]":"emoji_67@2x.png","[擦汗]":"emoji_68@2x.png","[敲打]":"emoji_69@2x.png","[晕]":"emoji_70@2x.png","[月亮]":"emoji_71@2x.png","[棒棒糖]":"emoji_72@2x.png","[汽车]":"emoji_73@2x.png","[沙发]":"emoji_74@2x.png","[流汗]":"emoji_75@2x.png","[流泪]":"emoji_76@2x.png","[激动]":"emoji_77@2x.png","[灯泡]":"emoji_78@2x.png","[炸弹]":"emoji_79@2x.png","[熊猫]":"emoji_80@2x.png","[爆筋]":"emoji_81@2x.png","[爱你]":"emoji_82@2x.png","[爱心]":"emoji_83@2x.png","[爱情]":"emoji_84@2x.png","[猪头]":"emoji_85@2x.png","[猫咪]":"emoji_86@2x.png","[献吻]":"emoji_87@2x.png","[玫瑰]":"emoji_88@2x.png","[瓢虫]":"emoji_89@2x.png","[疑问]":"emoji_90@2x.png","[白眼]":"emoji_91@2x.png","[皮球]":"emoji_92@2x.png","[睡觉]":"emoji_93@2x.png","[磕头]":"emoji_94@2x.png","[示爱]":"emoji_95@2x.png","[礼品袋]":"emoji_96@2x.png","[礼物]":"emoji_97@2x.png","[篮球]":"emoji_98@2x.png","[米饭]":"emoji_99@2x.png","[糗大了]":"emoji_100@2x.png","[红双喜]":"emoji_101@2x.png","[红灯笼]":"emoji_102@2x.png","[纸巾]":"emoji_103@2x.png","[胜利]":"emoji_104@2x.png","[色]":"emoji_105@2x.png","[药]":"emoji_106@2x.png","[菜刀]":"emoji_107@2x.png","[蛋糕]":"emoji_108@2x.png","[蜡烛]":"emoji_109@2x.png","[街舞]":"emoji_110@2x.png","[衰]":"emoji_111@2x.png","[西瓜]":"emoji_112@2x.png","[调皮]":"emoji_113@2x.png","[象棋]":"emoji_114@2x.png","[跳绳]":"emoji_115@2x.png","[跳跳]":"emoji_116@2x.png","[车厢]":"emoji_117@2x.png","[转圈]":"emoji_118@2x.png","[鄙视]":"emoji_119@2x.png","[酷]":"emoji_120@2x.png","[钞票]":"emoji_121@2x.png","[钻戒]":"emoji_122@2x.png","[闪电]":"emoji_123@2x.png","[闭嘴]":"emoji_124@2x.png","[闹钟]":"emoji_125@2x.png","[阴险]":"emoji_126@2x.png","[难过]":"emoji_127@2x.png","[雨伞]":"emoji_128@2x.png","[青蛙]":"emoji_129@2x.png","[面条]":"emoji_130@2x.png","[鞭炮]":"emoji_131@2x.png","[风车]":"emoji_132@2x.png","[飞吻]":"emoji_133@2x.png","[飞机]":"emoji_134@2x.png","[饥饿]":"emoji_135@2x.png","[香蕉]":"emoji_136@2x.png","[骷髅]":"emoji_137@2x.png","[麦克风]":"emoji_138@2x.png","[麻将]":"emoji_139@2x.png","[鼓掌]":"emoji_140@2x.png","[龇牙]":"emoji_141@2x.png"},i=["[龇牙]","[调皮]","[流汗]","[偷笑]","[再见]","[敲打]","[擦汗]","[猪头]","[玫瑰]","[流泪]","[大哭]","[嘘]","[酷]","[抓狂]","[委屈]","[便便]","[炸弹]","[菜刀]","[可爱]","[色]","[害羞]","[得意]","[吐]","[微笑]","[怒]","[尴尬]","[惊恐]","[冷汗]","[爱心]","[示爱]","[白眼]","[傲慢]","[难过]","[惊讶]","[疑问]","[困]","[么么哒]","[憨笑]","[爱情]","[衰]","[撇嘴]","[阴险]","[奋斗]","[发呆]","[右哼哼]","[抱抱]","[坏笑]","[飞吻]","[鄙视]","[晕]","[大兵]","[可怜]","[强]","[弱]","[握手]","[胜利]","[抱拳]","[凋谢]","[米饭]","[蛋糕]","[西瓜]","[啤酒]","[瓢虫]","[勾引]","[OK]","[爱你]","[咖啡]","[月亮]","[刀]","[发抖]","[差劲]","[拳头]","[心碎了]","[太阳]","[礼物]","[皮球]","[骷髅]","[挥手]","[闪电]","[饥饿]","[咒骂]","[折磨]","[抠鼻]","[鼓掌]","[糗大了]","[左哼哼]","[打哈欠]","[快哭了]","[吓]","[篮球]","[乒乓]","[NO]","[跳跳]","[怄火]","[转圈]","[磕头]","[回头]","[跳绳]","[激动]","[街舞]","[献吻]","[左太极]","[右太极]","[闭嘴]","[猫咪]","[红双喜]","[鞭炮]","[红灯笼]","[麻将]","[麦克风]","[礼品袋]","[信封]","[象棋]","[彩带]","[蜡烛]","[爆筋]","[棒棒糖]","[奶瓶]","[面条]","[香蕉]","[飞机]","[左车头]","[车厢]","[右车头]","[多云]","[下雨]","[钞票]","[熊猫]","[灯泡]","[风车]","[闹钟]","[雨伞]","[彩球]","[钻戒]","[沙发]","[纸巾]","[手枪]","[青蛙]"],s="https://web.sdk.qcloud.com/im/assets/face-elem/",r=[{icon:1,list:["yz00","yz01","yz02","yz03","yz04","yz05","yz06","yz07","yz08","yz09","yz10","yz11","yz12","yz13","yz14","yz15","yz16","yz17"]},{icon:2,list:["ys00","ys01","ys02","ys03","ys04","ys05","ys06","ys07","ys08","ys09","ys10","ys11","ys12","ys13","ys14","ys15"]},{icon:3,list:["gcs00","gcs01","gcs02","gcs03","gcs04","gcs05","gcs06","gcs07","gcs08","gcs09","gcs10","gcs11","gcs12","gcs13","gcs14","gcs15","gcs16"]}]},"181e":function(e,t,n){"use strict";n("6ebc")},1848:function(e,t,n){"use strict";n("1d03")},"18c1":function(e,t,n){"use strict";n("c0a5")},"1d03":function(e,t,n){},"1d42":function(e,t,n){},"1e7e":function(e,t,n){"use strict";n("46f2")},"21e4":function(e,t,n){},"259d":function(e,t,n){"use strict";n.d(t,"f",(function(){return N})),n.d(t,"m",(function(){return B})),n.d(t,"d",(function(){return R})),n.d(t,"o",(function(){return L})),n.d(t,"p",(function(){return V})),n.d(t,"s",(function(){return x})),n.d(t,"r",(function(){return A})),n.d(t,"h",(function(){return G})),n.d(t,"k",(function(){return H})),n.d(t,"j",(function(){return $})),n.d(t,"t",(function(){return z})),n.d(t,"e",(function(){return F})),n.d(t,"i",(function(){return Y})),n.d(t,"l",(function(){return K})),n.d(t,"g",(function(){return q})),n.d(t,"x",(function(){return Z})),n.d(t,"c",(function(){return X})),n.d(t,"w",(function(){return J})),n.d(t,"n",(function(){return Q})),n.d(t,"a",(function(){return te})),n.d(t,"v",(function(){return ne})),n.d(t,"b",(function(){return oe})),n.d(t,"u",(function(){return ae})),n.d(t,"q",(function(){return ie}));n("d9e2");var o=n("14b1"),a=n.n(o),i=n("52da"),s=n.n(i),r=n("fa81"),l=n.n(r),c=n("65b8"),d=n.n(c),u=n("4573"),p=n.n(u),h=n("3818"),m=n.n(h),v=n("b4d1"),f=n.n(v),g=n("acf5"),b=n.n(g),O=n("cca4"),y=n.n(O),j=n("e946"),I=n.n(j),k=n("045d"),w=n.n(k),E=n("505e"),C=n.n(E),T=(n("2b0b"),n("9474")),_=n.n(T);function S(e){const t=e;let n,o,a,i;return t>=3600?(o=_()(""+t/3600,10)<10?"0"+_()(""+t/3600,10):_()(""+t/3600,10),a=_()(""+t%60/60,10)<10?"0"+_()(""+t%60/60,10):_()(""+t%60/60,10),i=t%3600<10?"0"+t%3600:t%3600,i>60&&(a=_()(""+i/60,10)<10?"0"+_()(""+i/60,10):_()(""+i/60,10),i=i%60<10?"0"+i%60:i%60),n=`${o}:${a}:${i}`):t>=60&&t<3600?(a=_()(""+t/60,10)<10?"0"+_()(""+t/60,10):_()(""+t/60,10),i=t%60<10?"0"+t%60:t%60,n=`00:${a}:${i}`):t<60&&(i=t<10?"0"+t:t,n="00:00:"+i),n}var D=n("b05a"),U=n("c959"),M=n("2e20");function N(e){var t,n,o,a,i,s;let r="";switch(e.type){case U["a"].TYPES.CONV_C2C:r=J(null===e||void 0===e||null===(t=e.userProfile)||void 0===t?void 0:t.avatar)?null===e||void 0===e||null===(n=e.userProfile)||void 0===n?void 0:n.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png";break;case U["a"].TYPES.CONV_GROUP:r=J(null===e||void 0===e||null===(o=e.groupProfile)||void 0===o?void 0:o.avatar)?null===e||void 0===e||null===(a=e.groupProfile)||void 0===a?void 0:a.avatar:"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg";break;case U["a"].TYPES.CONV_SYSTEM:r=J(null===e||void 0===e||null===(i=e.groupProfile)||void 0===i?void 0:i.avatar)?null===e||void 0===e||null===(s=e.groupProfile)||void 0===s?void 0:s.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/group_avatar.png";break}return r}function B(e){var t,n;const{t:o}=window.TUIKitTUICore.config.i18n.useI18n();let a="";switch(e.type){case U["a"].TYPES.CONV_C2C:a=(null===e||void 0===e?void 0:e.userProfile.nick)||(null===e||void 0===e||null===(t=e.userProfile)||void 0===t?void 0:t.userID)||"";break;case U["a"].TYPES.CONV_GROUP:a=e.groupProfile.name||(null===e||void 0===e||null===(n=e.groupProfile)||void 0===n?void 0:n.groupID)||"";break;case U["a"].TYPES.CONV_SYSTEM:a=o("系统通知");break}return a}function R(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=[`[${t("TUIConversation.有人@我")}]`,`[${t("TUIConversation.@所有人")}]`,`[${t("TUIConversation.@所有人")}][${t("TUIConversation.有人@我")}]`];let o="";for(let a=0;a<e.groupAtInfoList.length;a++)e.groupAtInfoList[a].atTypeArray[0]&&e.unreadCount>0&&(o=n[e.groupAtInfoList[a].atTypeArray[0]-1]);return o}function L(e){var t;const n={referenceMessageForShow:"",referenceMessageType:0};if(!e||null===e||void 0===e||!e.ID||null===e||void 0===e||!e.type)return n;switch(e.type){case U["a"].TYPES.MSG_TEXT:n.referenceMessageForShow=null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.text,n.referenceMessageType=1;break;case U["a"].TYPES.MSG_CUSTOM:n.referenceMessageForShow="[自定义消息]",n.referenceMessageType=2;break;case U["a"].TYPES.MSG_IMAGE:n.referenceMessageForShow="[图片]",n.referenceMessageType=3;break;case U["a"].TYPES.MSG_AUDIO:n.referenceMessageForShow="[语音]",n.referenceMessageType=4;break;case U["a"].TYPES.MSG_VIDEO:n.referenceMessageForShow="[视频]",n.referenceMessageType=5;break;case U["a"].TYPES.MSG_FILE:n.referenceMessageForShow="[文件]",n.referenceMessageType=6;break;case U["a"].TYPES.MSG_FACE:n.referenceMessageForShow="[表情]",n.referenceMessageType=8;break}return n}function V(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),{lastMessage:n}=e,o=e;let a="",i="";const s=o.unreadCount>0&&o.messageRemindType===U["a"].TYPES.MSG_REMIND_ACPT_NOT_NOTE?`[${o.unreadCount>99?"99+":o.unreadCount}${t("TUIConversation.条")}] `:"";if(o.type===U["a"].TYPES.CONV_GROUP&&(a=n.fromAccount===o.groupProfile.selfInfo.userID?t("TUIConversation.我"):n.nameCard||n.nick||n.fromAccount),n.type===U["a"].TYPES.MSG_TEXT)i=n.payload.text;else if(n.type===U["a"].TYPES.MSG_CUSTOM){var r;const e=te(null===n||void 0===n||null===(r=n.payload)||void 0===r?void 0:r.data);if(1===(null===e||void 0===e?void 0:e.businessID))return i=W(n),i;i=n.messageForShow}else i=n.messageForShow;return n.isRevoked&&(i=t("TUIChat.撤回了一条消息")),o.type===U["a"].TYPES.CONV_GROUP&&n.type===U["a"].TYPES.MSG_GRP_TIP?i:`${s}${a?a+":":""}${i}`}function x(e){var t,n,o,i,r,l;const{t:c}=window.TUIKitTUICore.config.i18n.useI18n(),d={message:e,text:""};let u=(null===e||void 0===e?void 0:e.nick)||(null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.userIDList)||void 0===n?void 0:n.join(","));var p,h,m;(null===e||void 0===e||null===(o=e.payload)||void 0===o||null===(i=o.memberList)||void 0===i?void 0:i.length)>0&&(u="",null===e||void 0===e||null===(p=e.payload)||void 0===p||null===(h=p.memberList)||void 0===h||a()(h).call(h,e=>{u+=((null===e||void 0===e?void 0:e.nick)||(null===e||void 0===e?void 0:e.userID))+","}),u=null===(m=u)||void 0===m?void 0:s()(m).call(m,0,-1));if((null===e||void 0===e?void 0:e.type)===(null===U["a"]||void 0===U["a"]||null===(r=U["a"].TYPES)||void 0===r?void 0:r.MSG_GRP_TIP))switch(e.payload.operationType){case U["a"].TYPES.GRP_TIP_MBR_JOIN:d.text=`${u} ${c("message.tip.加入群组")}`;break;case U["a"].TYPES.GRP_TIP_MBR_QUIT:d.text=`${c("message.tip.群成员")}：${u} ${c("message.tip.退出群组")}`;break;case U["a"].TYPES.GRP_TIP_MBR_KICKED_OUT:d.text=`${c("message.tip.群成员")}：${u} ${c("message.tip.被")}${e.payload.operatorID}${c("message.tip.踢出群组")}`;break;case U["a"].TYPES.GRP_TIP_MBR_SET_ADMIN:d.text=`${c("message.tip.群成员")}：${u} ${c("message.tip.成为管理员")}`;break;case U["a"].TYPES.GRP_TIP_MBR_CANCELED_ADMIN:d.text=`${c("message.tip.群成员")}：${u} ${c("message.tip.被撤销管理员")}`;break;case U["a"].TYPES.GRP_TIP_GRP_PROFILE_UPDATED:d.text=P(e);break;case U["a"].TYPES.GRP_TIP_MBR_PROFILE_UPDATED:for(const t of e.payload.memberList)t.muteTime>0?d.text=`${c("message.tip.群成员")}：${t.userID}${c("message.tip.被禁言")}`:d.text=`${c("message.tip.群成员")}：${t.userID}${c("message.tip.被取消禁言")}`;break;default:d.text=`[${c("message.tip.群提示消息")}]`;break}else if("group_create"===(null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.data)){var v;d.text=null===e||void 0===e||null===(v=e.payload)||void 0===v?void 0:v.extension}else d.text=W(e);return d}function P(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),{payload:n}=e,{newGroupProfile:o}=n,{operatorID:a}=n;let i="";const s=l()(o)[0];switch(s){case"muteAllMembers":i=o[s]?`${t("message.tip.管理员")} ${a} ${t("message.tip.开启全员禁言")}`:`${t("message.tip.管理员")} ${a} ${t("message.tip.取消全员禁言")}`;break;case"ownerID":i=`${o[s]} ${t("message.tip.成为新的群主")}`;break;case"groupName":i=`${a} ${t("message.tip.修改群名为")} ${o[s]}`;break;case"notification":i=`${a} ${t("message.tip.发布新公告")}`;break;default:break}return i}function A(e){const t={text:Object(D["a"])(e.payload)};return t}function G(e){var t;const n={message:e,name:"",url:""};return n.name=e.payload.data,d()(t=e.payload.data).call(t,"@2x")<0&&(n.name=n.name+"@2x"),n.url=`https://web.sdk.qcloud.com/im/assets/face-elem/${n.name}.png`,n}function H(e){const t={lon:"",lat:"",href:"",url:"",description:"",message:e};return t.lon=e.payload.longitude.toFixed(6),t.lat=e.payload.latitude.toFixed(6),t.href=`https://map.qq.com/?type=marker&isopeninfowin=1&markertype=1&pointx=${t.lon}&pointy=${t.lat}&name=${e.payload.description}`,t.url=`https://apis.map.qq.com/ws/staticmap/v2/?center=${t.lat},${t.lon}&zoom=10&size=300*150&maptype=roadmap&markers=size:large|color:0xFFCCFF|label:k|${t.lat},${t.lon}&key=UBNBZ-PTP3P-TE7DB-LHRTI-Y4YLE-VWBBD`,t.description=e.payload.description,t}function $(e){return{progress:"unSend"===(null===e||void 0===e?void 0:e.status)&&e.progress,url:e.payload.imageInfoArray[1].url,width:e.payload.imageInfoArray[0].width,height:e.payload.imageInfoArray[0].height,message:e}}function z(e){var t,n,o,a;return{progress:"unSend"===(null===e||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.progress),url:null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.videoUrl,snapshotUrl:null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.snapshotUrl,snapshotWidth:null===e||void 0===e||null===(o=e.payload)||void 0===o?void 0:o.snapshotWidth,snapshotHeight:null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.snapshotHeight,message:e}}function F(e){return{progress:"unSend"===(null===e||void 0===e?void 0:e.status)&&e.progress,url:e.payload.url,message:e,second:e.payload.second}}function Y(e){let t="";return t=e.payload.fileSize>=1048576?(e.payload.fileSize/1048576).toFixed(2)+" Mb":e.payload.fileSize>=1024?(e.payload.fileSize/1024).toFixed(2)+" Kb":e.payload.fileSize.toFixed(2)+"B",{progress:"unSend"===(null===e||void 0===e?void 0:e.status)&&e.progress,url:e.payload.fileUrl,message:e,name:e.payload.fileName,size:t}}function K(e){return{message:e,...e.payload}}function W(e){var t,n,o;const{t:a}=window.TUIKitTUICore.config.i18n.useI18n();let i={},s={};try{var r;i=te(null===e||void 0===e||null===(r=e.payload)||void 0===r?void 0:r.data)}catch(d){i={}}if(1!==i.businessID)return"";try{s=te(i.data)}catch(d){s={}}let l="";null===(t=i)||void 0===t||null===(n=t.inviteeList)||void 0===n||p()(n).call(n,(e,t)=>{var n,o;t<(null===(n=i)||void 0===n||null===(o=n.inviteeList)||void 0===o?void 0:o.length)-1?l+=`"${e}"、`:l+=`"${e}" `});const c=`"${null===(o=i)||void 0===o?void 0:o.inviter}" `;switch(i.actionType){case 1:return s.call_end>=0&&!i.groupID?`${a("message.custom.通话时长")}：${S(s.call_end)}`:i.groupID&&i.timeout>0?`${c}${a("message.custom.发起通话")}`:i.groupID?""+a("message.custom.结束群聊"):s.data&&"switchToAudio"===s.data.cmd?""+a("message.custom.切换语音通话"):s.data&&"switchToVideo"===s.data.cmd?""+a("message.custom.切换视频通话"):""+a("message.custom.发起通话");case 2:return`${i.groupID?c:""}${a("message.custom.取消通话")}`;case 3:return s.data&&"switchToAudio"===s.data.cmd?""+a("message.custom.切换语音通话"):s.data&&"switchToVideo"===s.data.cmd?""+a("message.custom.切换视频通话"):`${i.groupID?l:""}${a("message.custom.已接听")}`;case 4:return`${i.groupID?l:""}${a("message.custom.拒绝通话")}`;case 5:return s.data&&"switchToAudio"===s.data.cmd?""+a("message.custom.切换语音通话"):s.data&&"switchToVideo"===s.data.cmd?""+a("message.custom.切换视频通话"):`${i.groupID?l:""}${a("message.custom.无应答")}`;default:return""}}function q(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n();return{message:e,custom:W(e)||`[${t("message.custom.自定义消息")}]`}}function Z(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=e.payload.groupProfile.name||e.payload.groupProfile.groupID;switch(e.payload.operationType){case 1:return`${e.payload.operatorID} ${t("message.tip.申请加入群组")}：${n}`;case 2:return`${t("message.tip.成功加入群组")}：${n}`;case 3:return`${t("message.tip.申请加入群组")}：${n} ${t("message.tip.被拒绝")}`;case 4:return`${t("message.tip.你被管理员")}${e.payload.operatorID} ${t("message.tip.踢出群组")}：${n}`;case 5:return`${t("message.tip.群")}：${n} ${t("message.tip.被")} ${e.payload.operatorID} ${t("message.tip.解散")}`;case 6:return`${e.payload.operatorID} ${t("message.tip.创建群")}：${n}`;case 7:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 8:return`${t("message.tip.你退出群组")}：${n}`;case 9:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.设置为群")}：${n} ${t("message.tip.的管理员")}`;case 10:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.撤销群")}：${n} ${t("message.tip.的管理员身份")}`;case 12:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 13:return`${e.payload.operatorID} ${t("message.tip.同意加群")}：${n}`;case 14:return`${e.payload.operatorID} ${t("message.tip.拒接加群")}：${n}`;case 255:return`${t("message.tip.自定义群系统通知")}: ${e.payload.userDefinedField}`}}function X(e,t,n){var o;const i=(null===e||void 0===e?void 0:e.querySelectorAll("."+t))||[],r=a()(o=s()(Array.prototype).call(i)).call(o,e=>new m.a((t,n)=>{e.onload=()=>{t(e)},e.onloadeddata=()=>{t(e)},e.onprogress=()=>{t(e)},e.complete&&t(e)}));return m.a.all(r).then(()=>{n&&n()}).catch(e=>{console.error("网络异常",e)})}function J(e){return/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)}function Q(e,t,n){return{businessID:e,version:t,...n}}function ee(e){if("string"===typeof e)try{const t=JSON.parse(e);return!!t}catch(t){return!1}return!1}function te(e){return e&&ee(e)?JSON.parse(e):e}function ne(e){if(!e)return!1;try{var t;const{businessID:n}=te(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.data);if(n===M["a"].typeUserTyping)return!0}catch{return!1}return!1}function oe(e,t=new f.a){if("object"!==typeof e||null===e)throw new TypeError("传入参数不是对象");if(t.has(e))return t.get(e);const n=b()(y()(e)),o=l()(e);return p()(o).call(o,o=>{const a=e[o];"object"!==typeof a||null===a?n[o]=a:I()(a)?n[o]=[...a]:a instanceof w.a?n[o]=new w.a([...a]):a instanceof C.a?n[o]=new C.a([...a]):(t.set(e,e),n[o]=oe(a,t))}),n}const ae=e=>{var t,n,o,a,i,s;return!!((null===e||void 0===e?void 0:e.type)===(null===U["a"]||void 0===U["a"]||null===(t=U["a"].TYPES)||void 0===t?void 0:t.MSG_GRP_TIP)||(null===e||void 0===e?void 0:e.type)===(null===U["a"]||void 0===U["a"]||null===(n=U["a"].TYPES)||void 0===n?void 0:n.MSG_CUSTOM)&&(null===e||void 0===e?void 0:e.conversationType)===(null===U["a"]||void 0===U["a"]||null===(o=U["a"].TYPES)||void 0===o?void 0:o.CONV_GROUP)&&null!==M["a"]&&void 0!==M["a"]&&M["a"].TYPE_CALL_MESSAGE||(null===e||void 0===e?void 0:e.type)===(null===U["a"]||void 0===U["a"]||null===(a=U["a"].TYPES)||void 0===a?void 0:a.MSG_CUSTOM)&&(null===e||void 0===e?void 0:e.conversationType)===(null===U["a"]||void 0===U["a"]||null===(i=U["a"].TYPES)||void 0===i?void 0:i.CONV_GROUP)&&"group_create"===(null===e||void 0===e||null===(s=e.payload)||void 0===s?void 0:s.data))},ie=(e,t,n,o)=>{const a=e/t,i=n/o;return e<=n&&t<=o?{width:e,height:t}:e<=n&&t>o||e>n&&t>o&&a<=i?{width:e*(o/t),height:o}:{width:n,height:t*(n/e)}}},"25d0":function(e,t,n){},"292f":function(e){e.exports=JSON.parse('{"发起单聊":"New one-to-one chat","发起群聊":"New group chat","请输入userID":"Enter a user ID","删除会话":"Delete conversation","系统通知":"System notification","置顶会话":"Top conversation","取消置顶":"cancel top conversation","消息免打扰":"Message not disturb","取消免打扰":"cancel not disturb","有人@我":"Someone {\'@\'} me","@所有人":"{\'@\'}Everyone","条":"strip","我":"me","网络异常，请您检查网络设置":"Network exception, please check the network settings"}')},"29ef":function(e,t,n){"use strict";n("7394")},"2b8a":function(e,t,n){"use strict";n("9f25")},"2b91":function(e,t,n){"use strict";n("2f05")},"2e20":function(e,t,n){"use strict";const o={typeC2C:"isC2C",typeGroup:"isGroup",cancel:"cancel",group:"GROUP",handleMessage:{revoke:"revoke",copy:"copy",delete:"delete",forward:"forward",reply:"reply",reference:"reference"},at:"@",all:"所有人",typeText:1,typeCustom:2,typeImage:3,typeAudio:4,typeVideo:5,typeFile:6,typeFace:8,typeForward:"forward",typeMute:"mute",typeOrder:"order",typeService:"consultion",typeReply:"quick_reply",typeEvaluate:"evaluation",typeTextLink:"text_link",typeAndroid:"android",typeIphone:"iphone",typeMini:"miniprogram",typeUserTyping:"user_typing_status",typeInputStatusIng:"EIMAMSG_InputStatus_Ing",typeInputStatusEnd:"EIMAMSG_InputStatus_End",scrollType:{toBottom:"bottom",toTarget:"target"},inViewType:{page:"page",scroll:"scroll"},TYPE_CALL_MESSAGE:1,CALL_ACTION_TYPE:{INVITE:1,CANCEL_INVITE:2,ACCEPT_INVITE:3,REJECT_INVITE:4,INVITE_TIMEOUT:5}};t["a"]=o},"2f05":function(e,t,n){},"301d":function(e,t,n){},3160:function(e,t,n){},"31ad":function(e,t,n){},"336d":function(e){e.exports=JSON.parse('{"群聊通知":"Group Chat Notifications","系统通知":"System Notifications","我的群聊":"My Group Chats","输入群ID，按回车搜索":"Enter a group ID","群名称":"Group name","群ID":"Group ID","加入群聊":"Join group chat","解散群聊":"Disband group chat","退出群聊":"Quit group chat","进入群聊":"Enter group chat","群类型":"Group type","请填写验证信息":"Enter the verification info","申请加入":"Request to join","已申请":"Requested","接受":"Accept","拒绝":"Refuse","已处理":"Handled","添加群聊":"add group chat","已加入":"joined","该群组不存在":"The group does not exist","加群":"join","我的好友":"Friend","发送消息":"Send Message","个性签名":"Signature"}')},"35a0":function(e,t,n){"use strict";n("0093")},"35dc":function(e,t,n){},"360d":function(e,t,n){},"37a4":function(e){e.exports=JSON.parse('{"撤回":"Recall message","删除":"Delete message","复制":"Copy","重新发送":"Resend","转发":"Forward","引用":"Reference","回复":"Reply","回复详情":"Replies","条回复":"replies","打开":"Open","已读":"Read","全部已读":"All read","人已读":" read","人未读":" unread","人关闭阅读状态":" read status closed","消息详情":"Message Detail","关闭阅读状态":"Read status closed","该消息不存在":"The message does not exist","无法定位到原消息":"Unable to navigate to the original message","未读":"Unread","您":"You","撤回了一条消息":"recalled a message","重新编辑":"Re-edit","我":"I","查看更多":"View more","转发给":"Forward to","请输入消息":"Enter a message","描述":"Description","经度":"Longitude","纬度":"Latitude","自定义消息":"Custom message","图片":"[photo]","语音":"[audio]","视频":"[video]","表情":"[face]","文件":"[file]","自定义":"[custom message]","管理员开启全员禁言":"The admin enables Mute All","您已被管理员禁言":"You have been muted by the admin","按Enter发送，Ctrl+Enter换行":"Press Enter to send a message and Ctrl+Enter to start a new line","单击下载":"Click download","确认重发该消息？":"Confirm to resend the message?","取消":"Cancel","确定":"Submit","对方正在输入":"Typing...","回到最新位置":"Back to the latest location","条新消息":" new messages","安全提示":"【Security Tips】This APP is only used to experience the functions of Tencent Cloud Instant Messaging products, and cannot be used for business negotiation and expansion. Don\'t trust money-related information such as remittances and lottery wins, don\'t make unfamiliar phone calls easily, and beware of being deceived.","点此投诉":"Complain","语音通话":"Voice Call","视频通话":"Video Call","发起群语音":"Make group voice call","发起群视频":"Make group video call","已接听":"Answered","拒绝通话":"Decline Call","无应答":"No Answer","取消通话":"Cancel Call","发起通话":"Start Call","结束群聊":"Edit Group Call","通话时长":"Duration","欢迎使用TUICallKit":"Welcome to TUICallKit","检测到您暂未集成TUICallKit，无法体验音视频通话功能":"It is detected that you have not integrated TUI CallKit yet, so you cannot experience the audio and video call. ","请点击":"Please click","集成TUICallKit":" Integrate TUICallKit ","开通腾讯实时音视频服务":"Integration Tencent Real-Time Communication","进行体验":"to experience.","您当前购买使用的套餐包暂未开通此功能":"The package you purchased does not support this ability.","选择提醒的人":"Select Contact","manage":{"群公告":"Group notice","群成员":"Group member","群管理":"Manage group","好友工作群":"Work","陌生人社交群":"Public","临时会议群":"Meeting","直播群":"AVChatRom","自由加入":"Join freely","需要验证":"Require approval","禁止加群":"Disallow group joining","人":"","群ID":"Group ID","群头像":"Group profile photo","群类型":"Group type","加群方式":"Group joining mode","转让群组":"Transfer ownership","解散群聊":"Disband group","退出群组":"Quit group","群管理员":"Group admin","全员禁言":"Mute All","全员禁言开启后，只允许群主和管理员发言。":"If Mute All is enabled, only the group owner and admin can speak.","单独禁言人员":"Mute a member","删除成员":"Remove member","确定从群聊中删除该成员？":"Are you sure you want to remove this member from the group chat?","确定从群聊中删除所选成员？":"Are you sure you want to remove selected member(s) from the group chat?","暂无公告":"No notice","发布":"Post","编辑":"Edit","群名称":"Group name","查看更多":"View more","管理员":"Admin","群主":"Group owner","我":"me","添加成员":"Add member","新增管理员":"Add admin","移除管理员":"Revoke admin","新增禁言用户":"Add muted member","移除禁言用户":"Remove muted member","修改群聊名称":"Edit group name","修改群聊名称后，将在群内通知其他成员":"After modifying the group chat name, other members will be notified in the group","仅限中文、字母、数字和下划线，2-20个字":"Chinese, letters, numbers and underscores only, 2-20 words","请先注册 TUIGroup 模块":"Please register the TUIGroup module first","该用户不存在":"The user does not exist","该用户不在群组内":"The user is not in the group"}}')},3910:function(e,t,n){"use strict";n("85d0")},"3adc":function(e,t,n){"use strict";n("1d42")},"3b1e":function(e,t,n){"use strict";n("c20b")},"3e72":function(e,t,n){"use strict";n("3160")},"403c":function(e){e.exports=JSON.parse('{"请对本次服务进行评价":"请对本次服务进行评价","提交评价":"提交评价","服务评价工具":"服务评价工具","使用":"使用","自定义消息":"自定义消息","搭建":"搭建","星":"星"}')},4176:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"e",(function(){return L})),n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return P}));var o=n("9474"),a=n.n(o),i=n("65b8"),s=n.n(i),r=(n("14d9"),n("fc56")),l=n.n(r),c=n("4573"),d=n.n(c),u=n("4c43"),p=n.n(u),h=n("3393"),m=n.n(h),v=n("c192"),f=n.n(v),g=n("7a23");const b={key:0},O={key:1};function y(e,t,n,o,a,i){return Object(g["openBlock"])(),Object(g["createBlock"])(g["Transition"],{name:"fade",onBeforeLeave:e.onClose,onAfterLeave:t[0]||(t[0]=t=>e.$emit("destroy"))},{default:Object(g["withCtx"])(()=>[Object(g["withDirectives"])(Object(g["createElementVNode"])("div",{class:Object(g["normalizeClass"])(["message",[e.handleStyle(e.type),e.isH5&&"message-h5"]]),style:Object(g["normalizeStyle"])(e.customStyle)},[e.isH5?Object(g["createCommentVNode"])("",!0):(Object(g["openBlock"])(),Object(g["createElementBlock"])("p",b,Object(g["toDisplayString"])(e.message),1)),e.isH5?(Object(g["openBlock"])(),Object(g["createElementBlock"])("span",O,Object(g["toDisplayString"])(e.message),1)):Object(g["createCommentVNode"])("",!0)],6),[[g["vShow"],e.visible]])]),_:1},8,["onBeforeLeave"])}var j=n("3654"),I=Object(g["defineComponent"])({name:"TUIMessage",props:{message:{type:String,default:""},duration:{type:Number,default:3e3},repeatNum:{type:Number,default:1},id:{type:String,default:""},onClose:{type:Function,required:!1},offset:{type:Number,default:20},zIndex:{type:Number,default:0},isH5:{type:Boolean,default:!1},type:{type:String,default:""}},setup(e){const t=Object(g["ref"])(!1);let n=void 0;function o(){e.duration>0&&({stop:n}=Object(j["useTimeoutFn"])(()=>{t.value&&i()},e.duration))}function a(){var e;null===(e=n)||void 0===e||e()}function i(){t.value=!1}Object(g["watch"])(()=>e.repeatNum,()=>{a(),o()});const s=Object(g["computed"])(()=>({top:e.offset+"px",zIndex:e.zIndex}));Object(g["onMounted"])(()=>{o(),t.value=!0});const r=e=>!e||"error"!==e&&"success"!==e&&"warning"!==e?"normal":e;return{visible:t,customStyle:s,handleStyle:r}}}),k=(n("d0f1"),n("6b0d")),w=n.n(k);const E=w()(I,[["render",y],["__scopeId","data-v-3852e376"]]);var C=E;const T=[];let _=1;const S=document.body,D=function(e){const t=l()(T).call(T,t=>{var n,o,a;return""+(null!==(n=null===(o=t.vm.props)||void 0===o?void 0:o.message)&&void 0!==n?n:"")===""+(null!==(a=e.message)&&void 0!==a?a:"")});if(t)return t.vm.component.props.repeatNum+=1,{close:()=>s.component.proxy.visible=!1};let n=e.offset||20;d()(T).call(T,({vm:e})=>{var t;n+=((null===(t=e.el)||void 0===t?void 0:t.offsetHeight)||0)+20}),n+=20;const o="message_"+(_+=1),a=e.onClose,i={zIndex:20+_,offset:n,id:o,...e,onClose:()=>{U(o,a)}},s=Object(g["createVNode"])(C,i),r=document.createElement("div");return s.props.onDestroy=()=>{Object(g["render"])(null,r)},Object(g["render"])(s,r),T.push({vm:s}),S.appendChild(r.firstElementChild),{close:()=>s.component.proxy.visible=!1}};function U(e,t){const n=p()(T).call(T,({vm:t})=>e===t.component.props.id);if(-1===n)return;const{vm:o}=T[n];if(!o)return;null===t||void 0===t||t(o);const a=o.el.offsetHeight;m()(T).call(T,n,1);const i=T.length;if(!(i<1))for(let s=n;s<i;s++){const e=f()(T[s].vm.el.style.top,10)-a-16;T[s].vm.component.props.offset=e}}var M=D;const N={80001:"您发送的消息可能包含违规内容，请停止发送此类内容",80002:"您发送的消息超过最大长度限制（>8KB）"};var B=N;function R(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=6e4,o=60*n,i=24*o,s=7*i,r=(new Date).getTime(),l=r-e;let c="";if(l<0)return;const d=l/n,u=l/o,p=l/i,h=l/s;if(h>=1&&h<=4)c=` ${a()(""+h,10)} ${t("time.周")}${t("time.前")}`;else if(p>=1&&p<=6)c=` ${a()(""+p,10)} ${t("time.天")}${t("time.前")}`;else if(u>=1&&u<=23)c=` ${a()(""+u,10)} ${t("time.小时")}${t("time.前")}`;else if(d>=1&&d<=59)c=` ${a()(""+d,10)} ${t("time.分钟")}${t("time.前")}`;else if(l>=0&&l<=n)c=""+t("time.刚刚");else{const t=new Date;t.setTime(e);const n=t.getFullYear(),o=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate();c=`${n}-${o}-${a}`}return c}function L(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=e.payload.groupProfile.name||e.payload.groupProfile.groupID;switch(e.payload.operationType){case 1:return`${e.payload.operatorID} ${t("message.tip.申请加入群组")}：${n}`;case 2:return`${t("message.tip.成功加入群组")}：${n}`;case 3:return`${t("message.tip.申请加入群组")}：${n} ${t("message.tip.被拒绝")}`;case 4:return`${t("message.tip.你被管理员")}${e.payload.operatorID} ${t("message.tip.踢出群组")}：${n}`;case 5:return`${t("message.tip.群")}：${n} ${t("message.tip.被")} ${e.payload.operatorID} ${t("message.tip.解散")}`;case 6:return`${e.payload.operatorID} ${t("message.tip.创建群")}：${n}`;case 7:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 8:return`${t("message.tip.你退出群组")}：${n}`;case 9:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.设置为群")}：${n} ${t("message.tip.的管理员")}`;case 10:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.撤销群")}：${n} ${t("message.tip.的管理员身份")}`;case 12:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 13:return`${e.payload.operatorID} ${t("message.tip.同意加群")}：${n}`;case 14:return`${e.payload.operatorID} ${t("message.tip.拒接加群")}：${n}`;case 255:return`${t("message.tip.自定义群系统通知")}: ${e.payload.userDefinedField}`}}function V(e,t){null!==e&&void 0!==e&&e.type&&null!==e&&void 0!==e&&e.message?M({message:`${e.type} : ${e.message}`||e,isH5:!(null===t||void 0===t||!t.isH5),type:"error"}):M({message:B[e.code]||e,isH5:!(null===t||void 0===t||!t.isH5),type:"error"})}function x(e,t){M({message:e,isH5:!(null===t||void 0===t||!t.isH5),type:"success"})}function P(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(-1===s()(t).call(t,e[n]))return!1;return!0}},4189:function(e){e.exports=JSON.parse('{"发起单聊":"发起单聊","发起群聊":"发起群聊","请输入userID":"请输入userID","删除会话":"删除会话","置顶会话":"置顶会话","取消置顶":"取消置顶","消息免打扰":"消息免打扰","取消免打扰":"取消免打扰","系统通知":"系统通知","有人@我":"有人{\'@\'}我","@所有人":"{\'@\'}所有人","条":"条","我":"我","网络异常，请您检查网络设置":"网络异常，请您检查网络设置"}')},"423e":function(e,t,n){},"45e3":function(e){e.exports=JSON.parse('{"撤回":"撤回","删除":"删除","复制":"复制","重新发送":"重新发送","转发":"转发","引用":"引用","回复":"回复","回复详情":"回复详情","条回复":"条回复","打开":"打开","已读":"已读","未读":"未读","人已读":"人已读","人未读":"人未读","人关闭阅读状态":"人关闭阅读状态","全部已读":"全部已读","消息详情":"消息详情","关闭阅读状态":"关闭","您":"您","撤回了一条消息":"撤回了一条消息","重新编辑":"重新编辑","我":"我","自定义消息":"自定义消息","查看更多":"查看更多","确认重发该消息？":"确认重发该消息？","取消":"取消","确定":"确定","转发给":"转发给","请输入消息":"请输入消息","描述":"描述","经度":"经度","纬度":"纬度","图片":"[图片]","语音":"[语音]","视频":"[视频]","表情":"[表情]","文件":"[文件]","自定义":"[自定义消息]","管理员开启全员禁言":"管理员开启全员禁言","您已被管理员禁言":"您已被管理员禁言","按Enter发送，Ctrl+Enter换行":"按Enter发送，Ctrl+Enter换行","单击下载":"单击下载","该消息不存在":"该消息不存在","无法定位到原消息":"无法定位到原消息","对方正在输入":"对方正在输入...","回到最新位置":"回到最新位置","条新消息":"条新消息","安全提示":"【安全提示】本 APP 仅用于体验腾讯云即时通信 IM 产品功能，不可用于业务洽谈与拓展。请勿轻信汇款、中奖等涉及钱款的信息，勿轻易拨打陌生电话，谨防上当受骗。","点此投诉":"点此投诉","语音通话":"语音通话","视频通话":"视频通话","发起群语音":"发起群语音","发起群视频":"发起群视频","已接听":"已接听","拒绝通话":"拒绝通话","无应答":"无应答","取消通话":"取消通话","发起通话":"发起通话","结束群聊":"结束群聊","通话时长":"通话时长","欢迎使用TUICallKit":"欢迎使用腾讯云音视频通话组件TUICallKit ","检测到您暂未集成TUICallKit，无法体验音视频通话功能":"检测到您暂未集成TUICallKit，无法体验音视频通话功能。","请点击":"请点击","集成TUICallKit":"集成 TUICallKit ","开通腾讯实时音视频服务":"开通腾讯实时音视频服务","进行体验":"进行体验。","您当前购买使用的套餐包暂未开通群消息已读回执功能":"您当前购买使用的套餐包暂未开通【群消息已读回执】功能，请升级至旗舰版进行体验","您当前购买使用的套餐包暂未开通在线用户列表功能":"您当前购买使用的套餐包暂未开通【在线用户列表】功能，请升级至旗舰版进行体验","您当前购买使用的套餐包暂未开通此功能":"您当前购买使用的套餐包暂未开通此功能。","选择提醒的人":"选择提醒的人","manage":{"群公告":"群公告","群成员":"群成员","群管理":"群管理","好友工作群":"好友工作群","陌生人社交群":"陌生人社交群","临时会议群":"临时会议群","直播群":"直播群","自由加入":"自由加入","需要验证":"需要验证","禁止加群":"禁止加群","人":"人","群ID":"群ID","群头像":"群头像","群类型":"群类型","加群方式":"加群方式","转让群组":"转让群组","解散群聊":"解散群聊","退出群组":"退出群组","群管理员":"群管理员","全员禁言":"全员禁言","全员禁言开启后，只允许群主和管理员发言。":"全员禁言开启后，只允许群主和管理员发言。","单独禁言人员":"单独禁言人员","删除成员":"删除成员","确定从群聊中删除该成员？":"确定从群聊中删除该成员？","确定从群聊中删除所选成员？":"确定从群聊中删除所选成员？","暂无公告":"暂无公告","发布":"发布","编辑":"编辑","群名称":"群名称","查看更多":"查看更多","管理员":"管理员","群主":"群主","我":"我","添加成员":"添加成员","新增管理员":"新增管理员","移除管理员":"移除管理员","新增禁言用户":"新增禁言用户","移除禁言用户":"移除禁言用户","修改群聊名称":"修改群聊名称","修改群聊名称后，将在群内通知其他成员":"修改群聊名称后，将在群内通知其他成员","仅限中文、字母、数字和下划线，2-20个字":"仅限中文、字母、数字和下划线，2-20个字","请先注册 TUIGroup 模块":"请先注册 TUIGroup 模块","该用户不存在":"该用户不存在","该用户不在群组内":"该用户不在群组内"}}')},"465a":function(e,t,n){},"46f2":function(e,t,n){},4712:function(e,t,n){"use strict";n("465a")},"4b49":function(e,t,n){},"524e":function(e){e.exports=JSON.parse('{"常用语-快捷回复工具":"常用语-快捷回复工具","在吗？在吗？在吗？重要的话说三遍。":"在吗？在吗？在吗？重要的话说三遍。","好久没聊天了，快来和我说说话～":"好久没聊天了，快来和我说说话～","好的，就这么说定了。":"好的，就这么说定了。","感恩的心，感谢有你。":"感恩的心，感谢有你。","糟糕！是心动的感觉！":"糟糕！是心动的感觉！","心疼地抱抱自己，我太难了！":"心疼地抱抱自己，我太难了！","没关系，别在意，事情过去就过去了。":"没关系，别在意，事情过去就过去了。","早上好，今天也是让人期待的一天呢！":"早上好，今天也是让人期待的一天呢！","熬夜有什么用，又没人陪你聊天，早点休息吧。":"熬夜有什么用，又没人陪你聊天，早点休息吧。"}')},5392:function(e,t,n){"use strict";n("1196")},"54ba":function(e){e.exports=JSON.parse('{"欢迎使用":"欢迎使用","建议体验功能":"建议体验功能","用UI组件快速集成":"用UI组件快速集成","创建项目":"创建项目","下载TUIKit组件":"下载 TUIKit 组件","引入TUIKit组件":"引入 TUIKit 组件","获取SDKAppID":"获取 SDKAppID 、密钥与 userID","调用TUIKit组件":"调用 TUIKit 组件","启动项目":"启动项目","发送您的第一条消息":"发送您的第一条消息","首购低至1折":"首购低至1折","IM首购9percent折":" IM 首购低至0.9折","续费9折起":"续费9折起","复购75%起":"复购7.5折起","立即选购":"立即选购","体验更多Demo":"体验更多Demo","立即前往":"立即前往","已完成":"已完成","待体验":"待体验","发送一条消息":"发送一条消息","撤回一条消息":"撤回一条消息","切换一次使用语言":"切换一次使用语言","发起一个群聊":"发起一个群聊","开启一次群禁言":"开启一次群禁言","解散一个群聊":"解散一个群聊","发起一次通话":"发起一次通话","修改一次我的昵称":"修改一次我的昵称","我们为您默认提供了一位“示例好友”和一个“示例客服群”您不用额外添加好友和群聊就可完整体验腾讯云 IM 单聊、群聊的所有功能。":"我们为您默认提供了一位“示例好友”和一个“示例客服群”，您不用额外添加好友和群聊就可完整体验腾讯云 IM 单聊、群聊的所有功能。","随时随地":"随时随地，即“登”即“测”，快试试吧！","男":"男","女":"女","用户ID":"用户ID","个性签名":"个性签名","暂未设置":"暂未设置","出生年月":"出生年月","编辑资料":"编辑资料","关于腾讯云IM":"关于腾讯云IM","退出登录":"退出登录","隐私条例":"隐私条例","用户协议":"用户协议","免责声明":"免责声明","联系我们":"联系我们","注销账户":"注销账户","SDK版本":"SDK版本","注销后，您将无法使用当前账号，相关数据也将删除无法找回。 当前账号":"注销后，您将无法使用当前账号，相关数据也将删除无法找回。 当前账号","IM-免责声明":"IM-免责声明","IM（“本产品”）是由腾讯云提供的一款测试产品，腾讯云享有本产品的著作权和所有权。本产品仅用于功能体验，不得用于任何商业用途。依据相关部门监管要求，严禁在使用中有任何色情、辱骂、暴恐、涉政等违法内容传播。":"IM（“本产品”）是由腾讯云提供的一款测试产品，腾讯云享有本产品的著作权和所有权。本产品仅用于功能体验，不得用于任何商业用途。依据相关部门监管要求，严禁在使用中有任何色情、辱骂、暴恐、涉政等违法内容传播。","同意":"同意","取消":"取消","注销":"注销","关闭":"关闭","开启":"开启","关于腾讯云·通信":"关于腾讯云·通信","消息":"消息","通讯录":"通讯录","个人中心":"个人中心","已读回执":"已读回执","消息阅读状态":"消息阅读状态","关闭阅读状态":"关闭后，您收发的消息均不带消息阅读状态，您将无法看到对方是否已读，同时对方也无法看到您是否已读。","开启阅读状态":"开启后，您在群聊中收发的消息均带有消息阅读状态，并且可以看到对方是否已读。与您单聊的好友若也开启了消息阅读状态，您与好友在单聊中收发的消息也将带有消息阅读状态。","显示在线状态":"显示在线状态","开启在线状态":"开启后，您将可以在会话列表和通讯录中看到好友在线或离线的状态提示。","关闭在线状态":"关闭后，您将不可以在会话列表和通讯录中看到好友在线或离线的状态提示。","消息通知":"消息通知"}')},5643:function(e,t,n){"use strict";n("957e")},"5a98":function(e,t,n){},"5ce0":function(e){e.exports=JSON.parse('{"资料设置":"资料设置","头像":"头像","昵称":"昵称","账号":"账号","个性签名":"个性签名","性别":"性别","男":"男","女":"女","不显示":"不显示","出生年月":"出生年月","取消":"取消","保存":"保存","请选择出生日期":"请选择出生日期","选择头像":"选择头像","设置昵称":"设置昵称","仅限中文、字母、数字和下划线，2-20个字":"仅限中文、字母、数字和下划线，2-20个字","请输入昵称":"请输入昵称","性别选择":"性别选择","请输入内容":"请输入内容","用户ID":"用户ID","暂未设置":"暂未设置"}')},"5e61":function(e,t,n){},"606b":function(e,t,n){"use strict";n("9426")},"622e":function(e,t,n){e.exports=n.p+"img/close-image.e1bb760f.png"},"63ad":function(e,t,n){},"63f7":function(e,t,n){},6609:function(e){e.exports=JSON.parse('{"tip":{"群成员":"群成员","加入群组":"加入群组","退出群组":"退出群组","被":"被","踢出群组":"踢出群组","成为管理员":"成为管理员","被撤销管理员":"被撤销管理员","被禁言":"被禁言","被取消禁言":"被取消禁言","群提示消息":"群提示消息","管理员":"管理员","开启全员禁言":"开启全员禁言","取消全员禁言":"取消全员禁言","成为新的群主":"成为新的群主","修改群名为":"修改群名为","发布新公告":"发布新公告","申请加入群组":"申请加入群组","成功加入群组":"成功加入群组","被拒绝":"被拒绝","你被管理员":"你被管理员","群":"群","解散":"解散","创建群":"创建群","邀请你加群":"邀请你加群","你退出群组":"你退出群组","你被":"你被","设置为群":"设置为群","的管理员":"的管理员","撤销群":"撤销群","的管理员身份":"的管理员身份","同意加群":"同意加群","拒接加群":"拒接加群","自定义群系统通知":"自定义群系统通知"},"custom":{"自定义消息":"自定义消息","通话时长":"通话时长","结束群聊":"结束群聊","切换语音通话":"切换语音通话","切换视频通话":"切换视频通话","发起通话":"发起通话","取消通话":"取消通话","已接听":"已接听","拒绝通话":"拒绝通话","无应答":"无应答","对本次服务评价":"对本次服务评价","查看详情>>":"查看详情>>"}}')},"67f0":function(e,t,n){},"6a25":function(e,t,n){"use strict";n("7c88")},"6a4c":function(e,t,n){"use strict";n("f022")},"6ba3":function(e,t,n){"use strict";const o=function(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,o=/(?:Android)/.test(e),a=/(?:Firefox)/.test(e),i=/(?:iPad|PlayBook)/.test(e)||o&&!/(?:Mobile)/.test(e)||a&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!i,r=!s&&!o&&!n;return{isTablet:i,isPhone:s,isAndroid:o,isPC:r,isH5:s||o||i}};t["a"]=o},"6e04":function(e,t,n){"use strict";n("d013")},"6ebc":function(e,t,n){},"703d":function(e,t,n){e.exports=n.p+"img/at.60c12463.svg"},"72af":function(e){e.exports=JSON.parse('{"请对本次服务进行评价":"Please rate this service","提交评价":"Feedback","常用语-快捷回复工具":"Common Expressions - Quick Reply Tool","使用":"Build with","自定义消息":"Custom message","搭建":"","在吗？在吗？在吗？重要的话说三遍。":"Are you there? ","好久没聊天了，快来和我说说话～":"It’s been a long time. How about you?","好的，就这么说定了。":"Okay. It\'s a deal.","感恩的心，感谢有你。":"So grateful! ","糟糕！是心动的感觉！":"Oh, no. Flipped.","心疼地抱抱自己，我太难了！":"Give myself a warm hug. ","没关系，别在意，事情过去就过去了。":"Take it easy.","早上好，今天也是让人期待的一天呢！":"Good morning. Have a wonderful day.","熬夜有什么用，又没人陪你聊天，早点休息吧。":"It\'s better to go to bed early."}')},7394:function(e,t,n){},7466:function(e,t,n){},"74a8":function(e,t,n){},"77ea":function(e,t,n){"use strict";n("35dc")},"7a81":function(e,t,n){},"7af0":function(e,t,n){"use strict";n("afa3")},"7b94":function(e,t,n){"use strict";n("5e61")},"7c02":function(e,t,n){"use strict";n("360d")},"7c88":function(e,t,n){},8198:function(e,t,n){"use strict";n("4b49")},8453:function(e,t,n){"use strict";n("f9db")},"85d0":function(e,t,n){},8617:function(e,t,n){"use strict";n("b56c")},8893:function(e){e.exports=JSON.parse('{"请对本次服务进行评价":"Please rate this service","提交评价":"Feedback","服务评价工具":"Service rate tool","使用":"Build with","自定义消息":"Custom message","搭建":"","星":"Star"}')},"8a4c":function(e,t,n){},"8fe9":function(e){e.exports=JSON.parse('{"输入groupID搜索":"Enter groupId search","群名称":"Group name","群ID":"Group ID","加入群聊":"Join","解散群聊":"Dissolution","退出群聊":"Quit","群类型":"Group type","请填写验证信息":"Please fill in the verification information","申请加入":"Apply Join","已申请":"Applied"}')},"92c8":function(e){e.exports=JSON.parse('{"取消":"取消","完成":"完成","已选中":"已选中","人":"人","保存":"保存","请输入userID":"请输入userID","确定":"确定","全选":"全选","已在群聊中":"已在群聊中"}')},9426:function(e,t,n){},"944d":function(e,t,n){"use strict";n("63ad")},"94fc":function(e,t,n){},"957e":function(e,t,n){},9726:function(e,t,n){},"999c":function(e){e.exports=JSON.parse('{"周":"week(s) ","天":"day(s)","小时":"hour(s) ","分钟":"minute(s)","刚刚":"Just now","前":" ago","昨天":"Yesterday","星期一":"Monday","星期二":"Tuesday","星期三":"Wednesday","星期四":"Thursday","星期五":"Friday","星期六":"Saturday","星期日":"Sunday"}')},"9a2f":function(e,t,n){"use strict";n("ce3c")},"9be5":function(e,t,n){"use strict";n("63f7")},"9c10":function(e){e.exports=JSON.parse('{"tip":{"群成员":"group members","加入群组":"joined the group","退出群组":"left the group","被":"by","踢出群组":"was kicked out of the group","成为管理员":"was set as an admin","被撤销管理员":"was revoked","被禁言":" was unmuted","被取消禁言":"cancel the prohibition","群提示消息":"group prompt message","管理员":"The admin","开启全员禁言":"enabled Mute All","取消全员禁言":"disabled Mute All","成为新的群主":"became the new group owner","修改群名为":"changed the group name to","发布新公告":"posted a new notice","申请加入群组":"requested to join the group","成功加入群组":"Successfully joined the group","被拒绝":"The request to join the group was refused","你被管理员":"You","群":"group","解散":"disbanded","创建群":"created the group","邀请你加群":"invite you to join the group","你退出群组":"You left the group","你被":"You were","设置为群":"set as group","的管理员":"as an admin","撤销群":"revoked","的管理员身份":"admin role of the group","同意加群":"agreed to join the group","拒接加群":"refused to join the group","自定义群系统通知":"Custom group system notification"},"custom":{"自定义消息":"Custom message","通话时长":"Call duration","结束群聊":"End","切换语音通话":"Switch voice call","切换视频通话":"Switch video call","发起通话":"Start a call","取消通话":"Cancel","已接听":"Answered","拒绝通话":"Decline","无应答":"No answer","对本次服务评价":"Rate this service","查看详情>>":"View details >>"}}')},"9c59":function(e,t,n){"use strict";n("c1e1")},"9d69":function(e,t,n){},"9dea":function(e,t,n){},"9f25":function(e,t,n){},a171:function(e,t,n){"use strict";n("423e")},a2b3:function(e,t,n){},a46a:function(e){e.exports=JSON.parse('{"输入groupID搜索":"输入groupID搜索","群名称":"群名称","群ID":"群ID","加入群聊":"加入群聊","解散群聊":"解散群聊","退出群聊":"退出群聊","群类型":"群类型","请填写验证信息":"请填写验证信息","申请加入":"申请加入","已申请":"已申请"}')},a6a0:function(e,t,n){"use strict";n("c4d2")},a94d:function(e,t,n){"use strict";n("d161")},ae10:function(e,t,n){"use strict";n("7466")},ae69:function(e,t,n){"use strict";n("67f0")},aeac:function(e,t,n){"use strict";n("301d")},afa3:function(e,t,n){},afbc:function(e,t,n){"use strict";var o=n("6605"),a=n("fcd0");const i=[{path:"/",redirect:{name:"Login"}},{path:"/login",name:"Login",component:()=>Promise.all([n.e("vendors~about"),n.e("about")]).then(n.bind(null,"a55b"))},{path:"/home",name:"Home",component:()=>Promise.all([n.e("vendors~about"),n.e("about")]).then(n.bind(null,"bb51"))}],s=Object(o["a"])({history:Object(o["b"])(""),routes:i});s.beforeEach((e,t,n)=>{"Login"===e.name||a["b"].isLogin?n():n({name:"Login"})}),t["a"]=s},afe0:function(e,t,n){"use strict";n("9726")},b05a:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("14d9");var o=n("65b8"),a=n.n(o),i=n("52da"),s=n.n(i),r=n("17da");function l(e){const t=[];let n=e.text,o=-1,i=-1;while(""!==n)switch(o=a()(n).call(n,"["),i=a()(n).call(n,"]"),o){case 0:if(-1===i)t.push({name:"text",text:n}),n="";else{const e=s()(n).call(n,0,i+1);r["b"][e]?(t.push({name:"img",src:r["d"]+r["b"][e]}),n=n.substring(i+1)):(t.push({name:"text",text:"["}),n=s()(n).call(n,1))}break;case-1:t.push({name:"text",text:n}),n="";break;default:t.push({name:"text",text:s()(n).call(n,0,o)}),n=n.substring(o);break}return t}},b0af:function(e){e.exports=JSON.parse('{"发起会话":"发起会话","发起单聊":"发起单聊","发起群聊":"发起群聊","该用户不存在":"该用户不存在","创建群聊，请注册 TUIGroup 模块":"创建群聊，请注册 TUIGroup 模块","创建成功":"创建成功","发起多人会话（群聊）":"发起多人会话（群聊）","群头像":"群头像","群名称":"群名称","群ID":"群ID","群类型":"群类型","选填":"选填","取消":"取消","创建":"创建","类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见":"类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见","类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见":"类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见","创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见":"创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见","创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见":"创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见","产品文档":"产品文档","设置群名称":"设置群名称","请输入群名称":"请输入群名称","设置群ID":"设置群ID","请输入群ID":"请输入群ID","选择群类型":"选择群类型"}')},b15c:function(e){e.exports=JSON.parse('{"周":"周","天":"天","小时":"小时","分钟":"分钟","刚刚":"刚刚","前":"前","昨天":"昨天","星期一":"星期一","星期二":"星期二","星期三":"星期三","星期四":"星期四","星期五":"星期五","星期六":"星期六","星期日":"星期日"}')},b23d:function(e,t,n){"use strict";n("dd7e")},b56c:function(e,t,n){},b77c:function(e,t,n){"use strict";n("74a8")},bbb6:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n("e311");const a=604800;function i(e){const{SDKAppID:t,secretKey:n,userID:i}=e,s=new o["a"](t,n,a),r=s.genTestUserSig(i);return{SDKAppID:t,userSig:r}}},bc82:function(e){e.exports=JSON.parse('{"资料设置":"Edit profile","头像":"Profile photo","昵称":"Name","账号":"Account","个性签名":"Status","性别":"Gender","男":"Male","女":"Female","不显示":"Rather not say","出生年月":"Birthday","取消":"Cancel","保存":"Save","请选择出生日期":"Select the date of birthday","选择头像":"Select Avatar","设置昵称":"Setting Name","仅限中文、字母、数字和下划线，2-20个字":"Chinese, letters, numbers and underscores only, 2-20 words","请输入昵称":"Enter Name","性别选择":"Select gender","请输入内容":"Enter content","用户ID":"userID","暂未设置":"Not set yet"}')},bccb:function(e,t,n){},be7e:function(e,t,n){"use strict";n("0a23")},c0a5:function(e,t,n){},c165:function(e,t,n){"use strict";n("7a81")},c193:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return l["a"]})),n.d(t,"b",(function(){return c["a"]})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return k}));const o={theme:"dark"};function a(e){e.setCommonStore(o)}function i(e){console.log("app",e)}const s={name:"TUITheme",plugin:a,install:i};var r=s,l=n("c7e2"),c=n("6ba3"),d=n("2b0b"),u=n.n(d),p=n("14b1"),h=n.n(p);const m=[{name:"TUILongPress",callback:(e,t,n)=>{if("function"!==typeof t.value){const e=n.context.name;let o=`[longpress:] provided expression '${t.expression}' is not afunction, but has to be `;e&&(o+=`Found in component '${e}' `),console.warn(o)}let o=null;const a=e=>{"click"===e.type&&0!==e.button||null===o&&(o=u()(()=>{s(e)},1e3))},i=e=>{null!==o&&(clearTimeout(o),o=null)},s=e=>{t.value(e)};e.addEventListener("mousedown",a,!1),e.addEventListener("touchstart",a,!1),e.addEventListener("click",i),e.addEventListener("mouseout",i),e.addEventListener("touchend",i),e.addEventListener("touchcancel",i)}}],v=e=>{h()(m).call(m,t=>{e.directive(t.name,{beforeMount:t.callback})})};var f=v,g=n("3818"),b=n.n(g),O=n("259d"),y=n("ea1b"),j=n.n(y);class I{constructor(e){this.allowNotifications=!0,this.showPreviews=!0,this.notificationTitle="腾讯云 IM ",this.notificationIcon="https://web.sdk.qcloud.com/im/demo/latest/faviconnew.png",e&&(void 0!==(null===e||void 0===e?void 0:e.allowNotifications)&&(this.allowNotifications=e.allowNotifications),void 0!==(null===e||void 0===e?void 0:e.showPreviews)&&(this.showPreviews=e.showPreviews),void 0!==(null===e||void 0===e?void 0:e.notificationTitle)&&(this.notificationTitle=e.notificationTitle),void 0!==(null===e||void 0===e?void 0:e.notificationIcon)&&(this.notificationIcon=e.notificationIcon))}static getInstance(e){return I.instance||(I.instance=new I(e)),I.instance}static plugin(e,t){e.config.notification=this.getInstance(t),this.TUICore=e}static install(e){e.use(this.getInstance())}setNotificationConfiguration(e){e&&(void 0!==(null===e||void 0===e?void 0:e.allowNotifications)&&(this.allowNotifications=e.allowNotifications),void 0!==(null===e||void 0===e?void 0:e.showPreviews)&&(this.showPreviews=e.showPreviews),void 0!==(null===e||void 0===e?void 0:e.notificationTitle)&&(this.notificationTitle=e.notificationTitle),void 0!==(null===e||void 0===e?void 0:e.notificationIcon)&&(this.notificationIcon=e.notificationIcon))}async notify(e){this.allowNotifications&&this.checkNotificationAbility()&&await this.requestNotificationPermission()&&await this.handleNotification(e)}checkNotificationAbility(){return"Notification"in window&&"denied"!==window.Notification.permission}requestNotificationPermission(){return new b.a((e,t)=>{var n;null!==(n=window)&&void 0!==n&&n.Notification||t(!1),"granted"===window.Notification.permission&&e(!0),window.Notification.requestPermission().then(t=>{"granted"===t&&e(!0)}).catch(()=>{t(!1)})})}async handleNotification(e){var t;if(!this._isMessageNeedNotification(e))return;const n=this._handleNotificationType(e);let o,a={badge:this.notificationIcon,icon:this.notificationIcon,body:"",requireInteraction:!1};switch(n){case"call":if(o=this._handleCallNotificationContent(e),null===(t=o)||void 0===t||!t.content)return;a.body=o.content,a.requireInteraction=!o.callEnd;break;case"chat":a.body=await this._handleChatNotificationContent(e),a.requireInteraction=!1;break}const i=new Notification(this.notificationTitle,a);i.onclick=()=>{var t,n;if(window.focus(),!e||null===e||void 0===e||!e.conversationID)return;const o=null===I||void 0===I||null===(t=I.TUICore)||void 0===t||null===(n=t.TUIServer)||void 0===n?void 0:n.TUIConversation;(null===e||void 0===e?void 0:e.conversationType)!==j.a.TYPES.CONV_C2C&&(null===e||void 0===e?void 0:e.conversationType)!==j.a.TYPES.CONV_GROUP||null===o||void 0===o||o.getConversationProfile(null===e||void 0===e?void 0:e.conversationID).then(e=>{var t,n;(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.conversation)&&o.handleCurrentConversation(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.conversation)}),i.close()}}_isMessageNeedNotification(e){var t,n,o,a;if(!e||null===e||void 0===e||!e.ID||null===e||void 0===e||!e.type||null!==e&&void 0!==e&&e.isRevoked||null!==e&&void 0!==e&&e.isDeleted||O["v"]&&Object(O["v"])(e))return!1;if((null===e||void 0===e?void 0:e.type)===j.a.TYPES.MSG_GRP_TIP||(null===e||void 0===e?void 0:e.type)===j.a.TYPES.MSG_GRP_SYS_NOTICE)return!1;const i=null===I||void 0===I||null===(t=I.TUICore)||void 0===t||null===(n=t.TUIServer)||void 0===n||null===(o=n.TUIConversation)||void 0===o||null===(a=o.currentStore)||void 0===a?void 0:a.currentConversationID;return!this.checkPageFocus()||(null===e||void 0===e?void 0:e.conversationID)!==i}_handleNotificationType(e){if(e.type===j.a.TYPES.MSG_CUSTOM){var t;const n=Object(O["a"])(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.data);if(1===(null===n||void 0===n?void 0:n.businessID)||"av_call"===(null===n||void 0===n?void 0:n.businessID))return"call"}return"chat"}async _handleChatNotificationContent(e){var t,n;let o="";if(!e||null===e||void 0===e||!e.ID||null===e||void 0===e||!e.type)return o;switch(this.showPreviews){case!0:o=await this._handleChatNotificationContentTitle(e),o+=this._handleChatNotificationContentText(e);break;case!1:o="您有"+await(null===I||void 0===I||null===(t=I.TUICore)||void 0===t||null===(n=t.tim)||void 0===n?void 0:n.getTotalUnreadMessageCount())+"条新消息";break;default:break}return o}async _handleChatNotificationContentTitle(e){var t,n,o;let a="";switch(null===e||void 0===e?void 0:e.conversationType){case j.a.TYPES.CONV_C2C:a=((null===e||void 0===e?void 0:e.nick)||(null===e||void 0===e?void 0:e.from))+": ";break;case j.a.TYPES.CONV_GROUP:a=(null===e||void 0===e?void 0:e.conversationID)+": ",await(null===I||void 0===I||null===(t=I.TUICore)||void 0===t||null===(n=t.tim)||void 0===n||null===(o=n.getConversationProfile(null===e||void 0===e?void 0:e.conversationID))||void 0===o?void 0:o.then(t=>{var n,o,i;a=((null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.conversation)||void 0===o||null===(i=o.groupProfile)||void 0===i?void 0:i.name)||(null===e||void 0===e?void 0:e.conversationID))+": "}).catch(()=>{a=(null===e||void 0===e?void 0:e.conversationID)+": "}));break;case j.a.TYPES.CONV_SYSTEM:a="系统消息: ";break;default:break}return a}_handleChatNotificationContentText(e){var t;let n="";switch(e.type){case j.a.TYPES.MSG_TEXT:n+=null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.text;break;case j.a.TYPES.MSG_CUSTOM:n+="[自定义消息]";break;case j.a.TYPES.MSG_IMAGE:n+="[图片]";break;case j.a.TYPES.MSG_AUDIO:n+="[语音]";break;case j.a.TYPES.MSG_VIDEO:n+="[视频]";break;case j.a.TYPES.MSG_FILE:n+="[文件]";break;case j.a.TYPES.MSG_FACE:n+="[表情]";break;case j.a.TYPES.MSG_MERGER:n+="[聊天记录]";break;case j.a.TYPES.MSG_LOCATION:n+="[位置]";break;default:break}return n}_handleCallNotificationContent(e){let t="",n=!1;try{if(e.type===j.a.TYPES.MSG_CUSTOM){var o;const a=Object(O["a"])(null===e||void 0===e||null===(o=e.payload)||void 0===o?void 0:o.data),i=Object(O["a"])(a.data);1===(null===a||void 0===a?void 0:a.businessID)&&(1===a.actionType&&(a.groupID&&a.timeout>0||!a.call_end&&0!==a.call_end&&!a.groupID&&(null===i||void 0===i||!i.data||"switchToAudio"!==(null===i||void 0===i?void 0:i.data.cmd)&&"switchToVideo"!==(null===i||void 0===i?void 0:i.data.cmd)))?(t=this.showPreviews?a.inviter+" 发起通话":"您有一个通话请求",n=!1):2===a.actionType&&(t=this.showPreviews?a.inviter+" 取消通话":"通话取消",n=!0))}}catch(a){console.warn(a)}return{content:t,callEnd:n}}checkPageFocus(){return document.hasFocus()}}var k=I},c1e1:function(e,t,n){},c20b:function(e,t,n){},c4d2:function(e,t,n){},c548:function(e,t,n){"use strict";n("faef")},c7e2:function(e,t,n){"use strict";n.d(t,"b",(function(){return N}));var o=n("47e2"),a=n("37a4"),i=n("292f"),s=n("8fe9"),r=n("bc82"),l=n("336d"),c=n("e32f"),d=n("9c10"),u=n("f017"),p=n("999c"),h=n("72af"),m=n("8893");const v={en:{"取消":"Cancel","发送":"Send","系统通知":"System notification","关闭":"Close","确定":"Save",TUIChat:a,TUIConversation:i,TUIGroup:s,TUIProfile:r,TUIContact:l,message:d,component:u,time:p,Evaluate:m,Words:h,TUISearch:c}};var f=v,g=n("45e3"),b=n("4189"),O=n("a46a"),y=n("5ce0"),j=n("d39e"),I=n("b0af"),k=n("6609"),w=n("92c8"),E=n("b15c"),C=n("524e"),T=n("403c");const _={zh_cn:{"取消":"取消","发送":"发送","系统通知":"系统通知","关闭":"关闭","确定":"确定",TUIChat:g,TUIConversation:b,TUIGroup:O,TUIProfile:y,TUIContact:j,message:k,component:w,time:E,Evaluate:T,Words:C,TUISearch:I}};var S=_;const D={...f,...S};var U=D;class M{constructor(e){this.messages={en:{},zh_cn:{}},this.messages=e}static getInstance(){return M.instance||(M.instance=new M(U)),M.instance}provideMessage(e){return this.messages.en={...this.messages.en,...e.en},this.messages.zh_cn={...this.messages.zh_cn,...e.zh_cn},this.messages}useI18n(){return Object(o["b"])()}static install(e){const t=M.getInstance(),n="zh";t.i18n=Object(o["a"])({legacy:!1,globalInjection:!0,global:!0,locale:"zh"===n?"zh_cn":n,fallbackLocale:"zh_cn",messages:t.messages}),e.use(t.i18n)}static plugin(e){e.config.i18n=M.getInstance()}}function N(){return M.getInstance().i18n.global.locale}t["a"]=M},c885:function(e,t,n){},c959:function(e,t,n){"use strict";var o=n("ea1b"),a=n.n(o);t["a"]=a.a},cb8a:function(e,t,n){"use strict";n("9dea")},cd49:function(e,t,n){"use strict";n.r(t),n.d(t,"SDKAppID",(function(){return M})),n.d(t,"secretKey",(function(){return N}));var o=n("7a23");const a={class:"app"};function i(e,t){const n=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createVNode"])(n)])}n("35a0");var s=n("6b0d"),r=n.n(s);const l={},c=r()(l,[["render",i]]);var d=c,u=n("afbc"),p=n("5b1a"),h=n.n(p),m=n("5502");const v=[{id:1,label:"发送一条消息",status:!1},{id:2,label:"撤回一条消息",status:!1},{id:3,label:"修改一次我的昵称",status:!1},{id:4,label:"发起一个群聊",status:!1},{id:5,label:"开启一次群禁言",status:!1},{id:6,label:"解散一个群聊",status:!1},{id:7,label:"发起一次通话",status:!1}],f={taskList:v,userInfo:{},isMsgNeedReadReceipt:!0,displayOnlineStatus:!0,allowNotification:!0,_isTIMCallKit:!0};if(localStorage.getItem("TUIKit-userInfo")){const e=localStorage.getItem("TUIKit-userInfo")||{};try{f.userInfo=JSON.parse(e)}catch(L){f.userInfo={}}}if(sessionStorage.getItem("isMsgNeedReadReceipt")){const e=sessionStorage.getItem("isMsgNeedReadReceipt")||"";try{f.isMsgNeedReadReceipt=JSON.parse(e)}catch(L){f.isMsgNeedReadReceipt=!1}}if(sessionStorage.getItem("displayOnlineStatus")){const e=sessionStorage.getItem("displayOnlineStatus")||"";try{f.displayOnlineStatus=JSON.parse(e)}catch(L){f.displayOnlineStatus=!1}}if(sessionStorage.getItem("allowNotification")){const e=sessionStorage.getItem("allowNotification")||"";try{f.allowNotification=JSON.parse(e)}catch(L){f.allowNotification=!1}}var g=Object(m["a"])({state:f,mutations:{handleTask(e,t){e.taskList[t].status=!0},setUserInfo(e,t){e.userInfo=t,localStorage.setItem("TUIKit-userInfo",h()(t))},setNeedReadReceipt(e,t){e.isMsgNeedReadReceipt=t,sessionStorage.setItem("isMsgNeedReadReceipt",h()(t))},setDisplayOnlineStatus(e,t){e.displayOnlineStatus=t,sessionStorage.setItem("displayOnlineStatus",h()(t))},setNotification(e,t){e.allowNotification=t,sessionStorage.setItem("allowNotification",h()(t))}},actions:{},modules:{}}),b=n("c3a1");n("7437");const O=n("01496"),y=n("f712"),j={en:{"当前语言":"English","即时通信":"IM","即时通信IM":"IM","社交娱乐":"Entertaining & Socializing","腾讯云":"Tencent Cloud","使用指引":"User Guide",Login:O,Home:y}};var I=j;const k=n("e68c"),w=n("54ba"),E={zh_cn:{"当前语言":"简体中文","即时通信":"即时通信","即时通信IM":"即时通信IM","社交娱乐":"社交娱乐","腾讯云":"腾讯云","使用指引":"使用指引",Login:k,Home:w}};var C=E;const T={...I,...C};var _=T,S=n("fcd0"),D=n("f4d1"),U=n("c193");const M=1400813313,N="3dcd65cb5ccbd9982f95b1a124a799fda6f3770d55c132171424222164c6d62b",B=S["b"].init({SDKAppID:M});B.config.i18n.provideMessage(_),B.use(S["a"]),B.use(D["a"]),B.use(U["c"]);const R=Object(o["createApp"])(d);R.use(g).use(u["a"]).use(B).use(b["a"]).mount("#app")},ce3c:function(e,t,n){},cfc8:function(e,t,n){"use strict";n("8a4c")},d013:function(e,t,n){},d0f1:function(e,t,n){"use strict";n("f7a6")},d161:function(e,t,n){},d35b:function(e,t,n){e.exports=n.p+"img/mute.fdf21a75.svg"},d39e:function(e){e.exports=JSON.parse('{"群聊通知":"群聊通知","系统通知":"系统通知","我的群聊":"我的群聊","输入群ID，按回车搜索":"输入群ID，按回车搜索","群名称":"群名称","群ID":"群ID","加入群聊":"加入群聊","解散群聊":"解散群聊","退出群聊":"退出群聊","进入群聊":"进入群聊","群类型":"群类型","请填写验证信息":"请填写验证信息","申请加入":"申请加入","已申请":"已申请","接受":"接受","拒绝":"拒绝","已处理":"已处理","添加群聊":"添加群聊","已加入":"已加入","该群组不存在":"该群组不存在","加群":"加群","我的好友":"我的好友","发送消息":"发送消息","个性签名":"个性签名"}')},d45a:function(e,t,n){"use strict";n("c885")},d4db:function(e,t,n){"use strict";n("fa4f")},d6b2:function(e,t,n){},d871:function(e,t,n){},dc3f:function(e,t,n){"use strict";n("d6b2")},dd7e:function(e,t,n){},e157:function(e,t,n){"use strict";n("9d69")},e311:function(e,t,n){"use strict";(function(e){var o,a,i=n("e946"),s=n.n(i),r=n("52da"),l=n.n(r),c=n("65b8"),d=n.n(c),u=n("05f2"),p=n.n(u),h=n("9474"),m=n.n(h),v=n("b0bc"),f=n.n(v),g=n("44a4"),b=n.n(g),O=n("2e10"),y=n.n(O),j=n("acf5"),I=n.n(j),k=n("a3e3"),w=n.n(k),E=n("3393"),C=n.n(E),T=n("2b0b"),_=n.n(T),S=n("cca4"),D=n.n(S),U=n("fa81"),M=n.n(U),N=n("2b58"),B=n.n(N),R=n("5b1a"),L=n.n(R),V=n("4573"),x=n.n(V),P=n("ec69"),A=n.n(P),G=n("14b1"),H=n.n(G),$=n("298b"),z=n.n($),F=n("7c78"),Y=n.n(F),K=n("2d80"),W=n.n(K),q=n("78b2"),Z=n.n(q),X=n("b6ce"),J=n.n(X),Q=n("f72b"),ee=n.n(Q),te=n("3002"),ne=n.n(te),oe=(n("c73d"),n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),n("14d9"),n("d9e2"),n("5377"),"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),ae=[],ie=[],se="undefined"!=typeof Uint8Array?Uint8Array:Array,re=!1;function le(){re=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)ae[t]=e[t],ie[e.charCodeAt(t)]=t;ie["-".charCodeAt(0)]=62,ie["_".charCodeAt(0)]=63}function ce(e,t,n){for(var o,a,i=[],s=t;s<n;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(ae[(a=o)>>18&63]+ae[a>>12&63]+ae[a>>6&63]+ae[63&a]);return i.join("")}function de(e){var t;re||le();for(var n=e.length,o=n%3,a="",i=[],s=0,r=n-o;s<r;s+=16383)i.push(ce(e,s,s+16383>r?r:s+16383));return 1===o?(t=e[n-1],a+=ae[t>>2],a+=ae[t<<4&63],a+="=="):2===o&&(t=(e[n-2]<<8)+e[n-1],a+=ae[t>>10],a+=ae[t>>4&63],a+=ae[t<<2&63],a+="="),i.push(a),i.join("")}function ue(e,t,n,o,a){var i,s,r=8*a-o-1,l=(1<<r)-1,c=l>>1,d=-7,u=n?a-1:0,p=n?-1:1,h=e[t+u];for(u+=p,i=h&(1<<-d)-1,h>>=-d,d+=r;d>0;i=256*i+e[t+u],u+=p,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=o;d>0;s=256*s+e[t+u],u+=p,d-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,o),i-=c}return(h?-1:1)*s*Math.pow(2,i-o)}function pe(e,t,n,o,a,i){var s,r,l,c=8*i-a-1,d=(1<<c)-1,u=d>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,m=o?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?p/l:p*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=d?(r=0,s=d):s+u>=1?(r=(t*l-1)*Math.pow(2,a),s+=u):(r=t*Math.pow(2,u-1)*Math.pow(2,a),s=0));a>=8;e[n+h]=255&r,h+=m,r/=256,a-=8);for(s=s<<a|r,c+=a;c>0;e[n+h]=255&s,h+=m,s/=256,c-=8);e[n+h-m]|=128*v}var he={}.toString,me=s.a||function(e){return"[object Array]"==he.call(e)};function ve(){return ge.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function fe(e,t){if(ve()<t)throw new RangeError("Invalid typed array length");return ge.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ge.prototype:(null===e&&(e=new ge(t)),e.length=t),e}function ge(e,t,n){if(!(ge.TYPED_ARRAY_SUPPORT||this instanceof ge))return new ge(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return ye(this,e)}return be(this,e,t,n)}function be(e,t,n,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),ge.TYPED_ARRAY_SUPPORT?(e=t).__proto__=ge.prototype:e=je(e,t),e}(e,t,n,o):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!ge.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|we(t,n),a=(e=fe(e,o)).write(t,n);return a!==o&&(e=l()(e).call(e,0,a)),e}(e,t,n):function(e,t){if(ke(t)){var n=0|Ie(t.length);return 0===(e=fe(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?fe(e,0):je(e,t);if("Buffer"===t.type&&me(t.data))return je(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Oe(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function ye(e,t){if(Oe(t),e=fe(e,t<0?0:0|Ie(t)),!ge.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function je(e,t){var n=t.length<0?0:0|Ie(t.length);e=fe(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function Ie(e){if(e>=ve())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ve().toString(16)+" bytes");return 0|e}function ke(e){return!(null==e||!e._isBuffer)}function we(e,t){if(ke(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Xe(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Je(e).length;default:if(o)return Xe(e).length;t=(""+t).toLowerCase(),o=!0}}function Ee(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Ae(this,t,n);case"utf8":case"utf-8":return Le(this,t,n);case"ascii":return xe(this,t,n);case"latin1":case"binary":return Pe(this,t,n);case"base64":return Re(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ge(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function Ce(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function Te(e,t,n,o,a){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=ge.from(t,o)),ke(t))return 0===t.length?-1:_e(e,t,n,o,a);if("number"==typeof t)return t&=255,ge.TYPED_ARRAY_SUPPORT&&"function"==typeof d()(Uint8Array.prototype)?a?d()(Uint8Array.prototype).call(e,t,n):p()(Uint8Array.prototype).call(e,t,n):_e(e,[t],n,o,a);throw new TypeError("val must be string, number or Buffer")}function _e(e,t,n,o,a){var i,s=1,r=e.length,l=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;s=2,r/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){var d=-1;for(i=n;i<r;i++)if(c(e,i)===c(t,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===l)return d*s}else-1!==d&&(i-=i-d),d=-1}else for(n+l>r&&(n=r-l),i=n;i>=0;i--){for(var u=!0,p=0;p<l;p++)if(c(e,i+p)!==c(t,p)){u=!1;break}if(u)return i}return-1}function Se(e,t,n,o){n=Number(n)||0;var a=e.length-n;o?(o=Number(o))>a&&(o=a):o=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var s=0;s<o;++s){var r=m()(t.substr(2*s,2),16);if(isNaN(r))return s;e[n+s]=r}return s}function De(e,t,n,o){return Qe(Xe(t,e.length-n),e,n,o)}function Ue(e,t,n,o){return Qe(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function Me(e,t,n,o){return Ue(e,t,n,o)}function Ne(e,t,n,o){return Qe(Je(t),e,n,o)}function Be(e,t,n,o){return Qe(function(e,t){for(var n,o,a,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),o=n>>8,a=n%256,i.push(a),i.push(o);return i}(t,e.length-n),e,n,o)}function Re(e,t,n){return 0===t&&n===e.length?de(e):de(l()(e).call(e,t,n))}function Le(e,t,n){n=Math.min(e.length,n);for(var o=[],a=t;a<n;){var i,s,r,c,d=e[a],u=null,p=d>239?4:d>223?3:d>191?2:1;if(a+p<=n)switch(p){case 1:d<128&&(u=d);break;case 2:128==(192&(i=e[a+1]))&&(c=(31&d)<<6|63&i)>127&&(u=c);break;case 3:i=e[a+1],s=e[a+2],128==(192&i)&&128==(192&s)&&(c=(15&d)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=e[a+1],s=e[a+2],r=e[a+3],128==(192&i)&&128==(192&s)&&128==(192&r)&&(c=(15&d)<<18|(63&i)<<12|(63&s)<<6|63&r)>65535&&c<1114112&&(u=c)}null===u?(u=65533,p=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),a+=p}return function(e){var t=e.length;if(t<=Ve)return String.fromCharCode.apply(String,e);for(var n="",o=0;o<t;)n+=String.fromCharCode.apply(String,l()(e).call(e,o,o+=Ve));return n}(o)}ge.TYPED_ARRAY_SUPPORT=void 0===oe.TYPED_ARRAY_SUPPORT||oe.TYPED_ARRAY_SUPPORT,ge.poolSize=8192,ge._augment=function(e){return e.__proto__=ge.prototype,e},ge.from=function(e,t,n){return be(null,e,t,n)},ge.TYPED_ARRAY_SUPPORT&&(ge.prototype.__proto__=Uint8Array.prototype,ge.__proto__=Uint8Array),ge.alloc=function(e,t,n){return function(e,t,n,o){var a,i;return Oe(t),t<=0?fe(e,t):void 0!==n?"string"==typeof o?f()(a=fe(e,t)).call(a,n,o):f()(i=fe(e,t)).call(i,n):fe(e,t)}(null,e,t,n)},ge.allocUnsafe=function(e){return ye(null,e)},ge.allocUnsafeSlow=function(e){return ye(null,e)},ge.isBuffer=et,ge.compare=function(e,t){if(!ke(e)||!ke(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,a=0,i=Math.min(n,o);a<i;++a)if(e[a]!==t[a]){n=e[a],o=t[a];break}return n<o?-1:o<n?1:0},ge.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ge.concat=function(e,t){if(!me(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ge.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=ge.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!ke(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(o,a),a+=i.length}return o},ge.byteLength=we,ge.prototype._isBuffer=!0,ge.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ce(this,t,t+1);return this},ge.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ce(this,t,t+3),Ce(this,t+1,t+2);return this},ge.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ce(this,t,t+7),Ce(this,t+1,t+6),Ce(this,t+2,t+5),Ce(this,t+3,t+4);return this},ge.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Le(this,0,e):Ee.apply(this,arguments)},ge.prototype.equals=function(e){if(!ke(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ge.compare(this,e)},ge.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},ge.prototype.compare=function(e,t,n,o,a){if(!ke(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),t<0||n>e.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&t>=n)return 0;if(o>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(o>>>=0),s=(n>>>=0)-(t>>>=0),r=Math.min(i,s),c=l()(p=this).call(p,o,a),d=l()(e).call(e,t,n),u=0;u<r;++u){var p;if(c[u]!==d[u]){i=c[u],s=d[u];break}}return i<s?-1:s<i?1:0},ge.prototype.includes=function(e,t,n){var o;return-1!==d()(o=this).call(o,e,t,n)},ge.prototype.indexOf=function(e,t,n){return Te(this,e,t,n,!0)},ge.prototype.lastIndexOf=function(e,t,n){return Te(this,e,t,n,!1)},ge.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return Se(this,e,t,n);case"utf8":case"utf-8":return De(this,e,t,n);case"ascii":return Ue(this,e,t,n);case"latin1":case"binary":return Me(this,e,t,n);case"base64":return Ne(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},ge.prototype.toJSON=function(){return{type:"Buffer",data:l()(Array.prototype).call(this._arr||this,0)}};var Ve=4096;function xe(e,t,n){var o="";n=Math.min(e.length,n);for(var a=t;a<n;++a)o+=String.fromCharCode(127&e[a]);return o}function Pe(e,t,n){var o="";n=Math.min(e.length,n);for(var a=t;a<n;++a)o+=String.fromCharCode(e[a]);return o}function Ae(e,t,n){var o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var a="",i=t;i<n;++i)a+=Ze(e[i]);return a}function Ge(e,t,n){for(var o=l()(e).call(e,t,n),a="",i=0;i<o.length;i+=2)a+=String.fromCharCode(o[i]+256*o[i+1]);return a}function He(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function $e(e,t,n,o,a,i){if(!ke(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function ze(e,t,n,o){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(o?a:1-a))>>>8*(o?a:1-a)}function Fe(e,t,n,o){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(o?a:3-a)&255}function Ye(e,t,n,o,a,i){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ke(e,t,n,o,a){return a||Ye(e,0,n,4),pe(e,t,n,o,23,4),n+4}function We(e,t,n,o,a){return a||Ye(e,0,n,8),pe(e,t,n,o,52,8),n+8}ge.prototype.slice=function(e,t){var n,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),t<e&&(t=e),ge.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=ge.prototype;else{var a=t-e;n=new ge(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},ge.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||He(e,t,this.length);for(var o=this[e],a=1,i=0;++i<t&&(a*=256);)o+=this[e+i]*a;return o},ge.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||He(e,t,this.length);for(var o=this[e+--t],a=1;t>0&&(a*=256);)o+=this[e+--t]*a;return o},ge.prototype.readUInt8=function(e,t){return t||He(e,1,this.length),this[e]},ge.prototype.readUInt16LE=function(e,t){return t||He(e,2,this.length),this[e]|this[e+1]<<8},ge.prototype.readUInt16BE=function(e,t){return t||He(e,2,this.length),this[e]<<8|this[e+1]},ge.prototype.readUInt32LE=function(e,t){return t||He(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ge.prototype.readUInt32BE=function(e,t){return t||He(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ge.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||He(e,t,this.length);for(var o=this[e],a=1,i=0;++i<t&&(a*=256);)o+=this[e+i]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*t)),o},ge.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||He(e,t,this.length);for(var o=t,a=1,i=this[e+--o];o>0&&(a*=256);)i+=this[e+--o]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},ge.prototype.readInt8=function(e,t){return t||He(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ge.prototype.readInt16LE=function(e,t){t||He(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},ge.prototype.readInt16BE=function(e,t){t||He(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},ge.prototype.readInt32LE=function(e,t){return t||He(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ge.prototype.readInt32BE=function(e,t){return t||He(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ge.prototype.readFloatLE=function(e,t){return t||He(e,4,this.length),ue(this,e,!0,23,4)},ge.prototype.readFloatBE=function(e,t){return t||He(e,4,this.length),ue(this,e,!1,23,4)},ge.prototype.readDoubleLE=function(e,t){return t||He(e,8,this.length),ue(this,e,!0,52,8)},ge.prototype.readDoubleBE=function(e,t){return t||He(e,8,this.length),ue(this,e,!1,52,8)},ge.prototype.writeUIntLE=function(e,t,n,o){e=+e,t|=0,n|=0,o||$e(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},ge.prototype.writeUIntBE=function(e,t,n,o){e=+e,t|=0,n|=0,o||$e(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},ge.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,1,255,0),ge.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ge.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,2,65535,0),ge.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ze(this,e,t,!0),t+2},ge.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,2,65535,0),ge.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ze(this,e,t,!1),t+2},ge.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,4,4294967295,0),ge.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Fe(this,e,t,!0),t+4},ge.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,4,4294967295,0),ge.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Fe(this,e,t,!1),t+4},ge.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var a=Math.pow(2,8*n-1);$e(this,e,t,n,a-1,-a)}var i=0,s=1,r=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===r&&0!==this[t+i-1]&&(r=1),this[t+i]=(e/s>>0)-r&255;return t+n},ge.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var a=Math.pow(2,8*n-1);$e(this,e,t,n,a-1,-a)}var i=n-1,s=1,r=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===r&&0!==this[t+i+1]&&(r=1),this[t+i]=(e/s>>0)-r&255;return t+n},ge.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,1,127,-128),ge.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ge.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,2,32767,-32768),ge.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ze(this,e,t,!0),t+2},ge.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,2,32767,-32768),ge.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ze(this,e,t,!1),t+2},ge.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,4,2147483647,-2147483648),ge.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Fe(this,e,t,!0),t+4},ge.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||$e(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ge.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Fe(this,e,t,!1),t+4},ge.prototype.writeFloatLE=function(e,t,n){return Ke(this,e,t,!0,n)},ge.prototype.writeFloatBE=function(e,t,n){return Ke(this,e,t,!1,n)},ge.prototype.writeDoubleLE=function(e,t,n){return We(this,e,t,!0,n)},ge.prototype.writeDoubleBE=function(e,t,n){return We(this,e,t,!1,n)},ge.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var a,i=o-n;if(this===e&&n<t&&t<o)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!ge.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},ge.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!ge.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=ke(e)?e:Xe(new ge(e,o).toString()),r=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%r]}return this};var qe=/[^+\/0-9A-Za-z-_]/g;function Ze(e){return e<16?"0"+e.toString(16):e.toString(16)}function Xe(e,t){var n;t=t||1/0;for(var o=e.length,a=null,i=[],s=0;s<o;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===o){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Je(e){return function(e){var t,n,o,a,i,s;re||le();var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[r-2]?2:"="===e[r-1]?1:0,s=new se(3*r/4-i),o=i>0?r-4:r;var l=0;for(t=0,n=0;t<o;t+=4,n+=3)a=ie[e.charCodeAt(t)]<<18|ie[e.charCodeAt(t+1)]<<12|ie[e.charCodeAt(t+2)]<<6|ie[e.charCodeAt(t+3)],s[l++]=a>>16&255,s[l++]=a>>8&255,s[l++]=255&a;return 2===i?(a=ie[e.charCodeAt(t)]<<2|ie[e.charCodeAt(t+1)]>>4,s[l++]=255&a):1===i&&(a=ie[e.charCodeAt(t)]<<10|ie[e.charCodeAt(t+1)]<<4|ie[e.charCodeAt(t+2)]>>2,s[l++]=a>>8&255,s[l++]=255&a),s}(function(e){if((e=function(e){return b()(e)?b()(e).call(e):e.replace(/^\s+|\s+$/g,"")}(e).replace(qe,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Qe(e,t,n,o){for(var a=0;a<o&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function et(e){return null!=e&&(!!e._isBuffer||tt(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof l()(e)&&tt(l()(e).call(e,0,0))}(e))}function tt(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function nt(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof y.a?y.a:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;var ot=nt((function(e,t){var n;e.exports=(n=n||function(e,t){var n=I.a||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},a=o.lib={},i=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,a=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<a;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(i=0;i<a;i+=4)t[o+i>>>2]=n[i>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e,t=i.clone.call(this);return t.words=l()(e=this.words).call(e,0),t},random:function(t){for(var n,o=[],a=function(t){t=t;var n=987654321,o=4294967295;return function(){var a=((n=36969*(65535&n)+(n>>16)&o)<<16)+(t=18e3*(65535&t)+(t>>16)&o)&o;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var r=a(4294967296*(n||e.random()));n=987654071*r(),o.push(4294967296*r()|0)}return new s.init(o,t)}}),r=o.enc={},c=r.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],a=0;a<n;a++){var i=t[a>>>2]>>>24-a%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=m()(e.substr(o,2),16)<<24-o%8*4;return new s.init(n,t/2)}},d=r.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],a=0;a<n;a++){var i=t[a>>>2]>>>24-a%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new s.init(n,t)}},u=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){var t;"string"==typeof e&&(e=u.parse(e)),w()(t=this._data).call(t,e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,a=n.sigBytes,i=this.blockSize,r=4*i,l=a/r,c=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*i,d=e.min(4*c,a);if(c){for(var u=0;u<c;u+=i)this._doProcessBlock(o,u);var p=C()(o).call(o,0,c);n.sigBytes-=d}return new s.init(p,d)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(a.Hasher=p.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math),n)})),at=(nt((function(e,t){var n,o,a,i,s,r;e.exports=(a=(o=n=ot).lib,i=a.Base,s=a.WordArray,(r=o.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],o=0;o<t;o++){var a=e[o];n.push(a.high),n.push(a.low)}return s.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=l()(a=this.words).call(a,0),n=t.length,o=0;o<n;o++){var a;t[o]=t[o].clone()}return e}}),n)})),nt((function(e,t){var n;e.exports=(n=ot,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,o=[],a=0;a<n;a++)o[a>>>2]|=e[a]<<24-a%4*8;t.call(this,o,n)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray)})),nt((function(e,t){var n;e.exports=(n=ot,function(){var e=n,t=e.lib.WordArray,o=e.enc;function a(e){return e<<8&4278255360|e>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],a=0;a<n;a+=2){var i=t[a>>>2]>>>16-a%4*8&65535;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var n=e.length,o=[],a=0;a<n;a++)o[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return t.create(o,2*n)}},o.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i+=2){var s=a(t[i>>>2]>>>16-i%4*8&65535);o.push(String.fromCharCode(s))}return o.join("")},parse:function(e){for(var n=e.length,o=[],i=0;i<n;i++)o[i>>>1]|=a(e.charCodeAt(i)<<16-i%2*16);return t.create(o,2*n)}}}(),n.enc.Utf16)})),nt((function(e,t){var n,o,a;e.exports=(a=(o=n=ot).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var a=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,r=0;r<4&&i+.75*r<n;r++)a.push(o.charAt(s>>>6*(3-r)&63));var l=o.charAt(64);if(l)for(;a.length%4;)a.push(l);return a.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var s=n.charAt(64);if(s){var r=d()(e).call(e,s);-1!==r&&(t=r)}return function(e,t,n){for(var o=[],i=0,s=0;s<t;s++)if(s%4){var r=n[e.charCodeAt(s-1)]<<s%4*2,l=n[e.charCodeAt(s)]>>>6-s%4*2;o[i>>>2]|=(r|l)<<24-i%4*8,i++}return a.create(o,i)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)})),nt((function(e,t){var n;e.exports=(n=ot,function(e){var t=n,o=t.lib,a=o.WordArray,i=o.Hasher,s=t.algo,r=[];!function(){for(var t=0;t<64;t++)r[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=s.MD5=i.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,a=e[o];e[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i=this._hash.words,s=e[t+0],l=e[t+1],h=e[t+2],m=e[t+3],v=e[t+4],f=e[t+5],g=e[t+6],b=e[t+7],O=e[t+8],y=e[t+9],j=e[t+10],I=e[t+11],k=e[t+12],w=e[t+13],E=e[t+14],C=e[t+15],T=i[0],_=i[1],S=i[2],D=i[3];T=c(T,_,S,D,s,7,r[0]),D=c(D,T,_,S,l,12,r[1]),S=c(S,D,T,_,h,17,r[2]),_=c(_,S,D,T,m,22,r[3]),T=c(T,_,S,D,v,7,r[4]),D=c(D,T,_,S,f,12,r[5]),S=c(S,D,T,_,g,17,r[6]),_=c(_,S,D,T,b,22,r[7]),T=c(T,_,S,D,O,7,r[8]),D=c(D,T,_,S,y,12,r[9]),S=c(S,D,T,_,j,17,r[10]),_=c(_,S,D,T,I,22,r[11]),T=c(T,_,S,D,k,7,r[12]),D=c(D,T,_,S,w,12,r[13]),S=c(S,D,T,_,E,17,r[14]),T=d(T,_=c(_,S,D,T,C,22,r[15]),S,D,l,5,r[16]),D=d(D,T,_,S,g,9,r[17]),S=d(S,D,T,_,I,14,r[18]),_=d(_,S,D,T,s,20,r[19]),T=d(T,_,S,D,f,5,r[20]),D=d(D,T,_,S,j,9,r[21]),S=d(S,D,T,_,C,14,r[22]),_=d(_,S,D,T,v,20,r[23]),T=d(T,_,S,D,y,5,r[24]),D=d(D,T,_,S,E,9,r[25]),S=d(S,D,T,_,m,14,r[26]),_=d(_,S,D,T,O,20,r[27]),T=d(T,_,S,D,w,5,r[28]),D=d(D,T,_,S,h,9,r[29]),S=d(S,D,T,_,b,14,r[30]),T=u(T,_=d(_,S,D,T,k,20,r[31]),S,D,f,4,r[32]),D=u(D,T,_,S,O,11,r[33]),S=u(S,D,T,_,I,16,r[34]),_=u(_,S,D,T,E,23,r[35]),T=u(T,_,S,D,l,4,r[36]),D=u(D,T,_,S,v,11,r[37]),S=u(S,D,T,_,b,16,r[38]),_=u(_,S,D,T,j,23,r[39]),T=u(T,_,S,D,w,4,r[40]),D=u(D,T,_,S,s,11,r[41]),S=u(S,D,T,_,m,16,r[42]),_=u(_,S,D,T,g,23,r[43]),T=u(T,_,S,D,y,4,r[44]),D=u(D,T,_,S,k,11,r[45]),S=u(S,D,T,_,C,16,r[46]),T=p(T,_=u(_,S,D,T,h,23,r[47]),S,D,s,6,r[48]),D=p(D,T,_,S,b,10,r[49]),S=p(S,D,T,_,E,15,r[50]),_=p(_,S,D,T,f,21,r[51]),T=p(T,_,S,D,k,6,r[52]),D=p(D,T,_,S,m,10,r[53]),S=p(S,D,T,_,j,15,r[54]),_=p(_,S,D,T,l,21,r[55]),T=p(T,_,S,D,O,6,r[56]),D=p(D,T,_,S,C,10,r[57]),S=p(S,D,T,_,g,15,r[58]),_=p(_,S,D,T,w,21,r[59]),T=p(T,_,S,D,v,6,r[60]),D=p(D,T,_,S,I,10,r[61]),S=p(S,D,T,_,h,15,r[62]),_=p(_,S,D,T,y,21,r[63]),i[0]=i[0]+T|0,i[1]=i[1]+_|0,i[2]=i[2]+S|0,i[3]=i[3]+D|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var i=e.floor(o/4294967296),s=o;n[15+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(a+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var r=this._hash,l=r.words,c=0;c<4;c++){var d=l[c];l[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return r},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,o,a,i,s){var r=e+(t&n|~t&o)+a+s;return(r<<i|r>>>32-i)+t}function d(e,t,n,o,a,i,s){var r=e+(t&o|n&~o)+a+s;return(r<<i|r>>>32-i)+t}function u(e,t,n,o,a,i,s){var r=e+(t^n^o)+a+s;return(r<<i|r>>>32-i)+t}function p(e,t,n,o,a,i,s){var r=e+(n^(t|~o))+a+s;return(r<<i|r>>>32-i)+t}t.MD5=i._createHelper(l),t.HmacMD5=i._createHmacHelper(l)}(Math),n.MD5)})),nt((function(e,t){var n,o,a,i,s,r,l,c;e.exports=(a=(o=n=ot).lib,i=a.WordArray,s=a.Hasher,r=o.algo,l=[],c=r.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],a=n[1],i=n[2],s=n[3],r=n[4],c=0;c<80;c++){if(c<16)l[c]=0|e[t+c];else{var d=l[c-3]^l[c-8]^l[c-14]^l[c-16];l[c]=d<<1|d>>>31}var u=(o<<5|o>>>27)+r+l[c];u+=c<20?1518500249+(a&i|~a&s):c<40?1859775393+(a^i^s):c<60?(a&i|a&s|i&s)-1894007588:(a^i^s)-899497514,r=s,s=i,i=a<<30|a>>>2,a=o,o=u}n[0]=n[0]+o|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+r|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),o.SHA1=s._createHelper(c),o.HmacSHA1=s._createHmacHelper(c),n.SHA1)})),nt((function(e,t){var n;e.exports=(n=ot,function(e){var t=n,o=t.lib,a=o.WordArray,i=o.Hasher,s=t.algo,r=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),o=2;o<=n;o++)if(!(t%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,a=0;a<64;)t(o)&&(a<8&&(r[a]=n(e.pow(o,.5))),c[a]=n(e.pow(o,1/3)),a++),o++}();var d=[],u=s.SHA256=i.extend({_doReset:function(){this._hash=new a.init(l()(r).call(r,0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],a=n[1],i=n[2],s=n[3],r=n[4],l=n[5],u=n[6],p=n[7],h=0;h<64;h++){if(h<16)d[h]=0|e[t+h];else{var m=d[h-15],v=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,f=d[h-2],g=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;d[h]=v+d[h-7]+g+d[h-16]}var b=o&a^o&i^a&i,O=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),y=p+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&l^~r&u)+c[h]+d[h];p=u,u=l,l=r,r=s+y|0,s=i,i=a,a=o,o=y+(O+b)|0}n[0]=n[0]+o|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+r|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(o/4294967296),n[15+(a+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(u),t.HmacSHA256=i._createHmacHelper(u)}(Math),n.SHA256)})),nt((function(e,t){var n,o,a,i,s,r;e.exports=(a=(o=n=ot).lib.WordArray,i=o.algo,s=i.SHA256,r=i.SHA224=s.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}}),o.SHA224=s._createHelper(r),o.HmacSHA224=s._createHmacHelper(r),n.SHA224)})),nt((function(e,t){var n;e.exports=(n=ot,function(){var e=n,t=e.lib.Hasher,o=e.x64,a=o.Word,i=o.WordArray,s=e.algo;function r(){return a.create.apply(a,arguments)}var l=[r(1116352408,3609767458),r(1899447441,602891725),r(3049323471,3964484399),r(3921009573,2173295548),r(961987163,4081628472),r(1508970993,3053834265),r(2453635748,2937671579),r(2870763221,3664609560),r(3624381080,2734883394),r(310598401,1164996542),r(607225278,1323610764),r(1426881987,3590304994),r(1925078388,4068182383),r(2162078206,991336113),r(2614888103,633803317),r(3248222580,3479774868),r(3835390401,2666613458),r(4022224774,944711139),r(264347078,2341262773),r(604807628,2007800933),r(770255983,1495990901),r(1249150122,1856431235),r(1555081692,3175218132),r(1996064986,2198950837),r(2554220882,3999719339),r(2821834349,766784016),r(2952996808,2566594879),r(3210313671,3203337956),r(3336571891,1034457026),r(3584528711,2466948901),r(113926993,3758326383),r(338241895,168717936),r(666307205,1188179964),r(773529912,1546045734),r(1294757372,1522805485),r(1396182291,2643833823),r(1695183700,2343527390),r(1986661051,1014477480),r(2177026350,1206759142),r(2456956037,344077627),r(2730485921,1290863460),r(2820302411,3158454273),r(3259730800,3505952657),r(3345764771,106217008),r(3516065817,3606008344),r(3600352804,1432725776),r(4094571909,1467031594),r(275423344,851169720),r(430227734,3100823752),r(506948616,1363258195),r(659060556,3750685593),r(883997877,3785050280),r(958139571,3318307427),r(1322822218,3812723403),r(1537002063,2003034995),r(1747873779,3602036899),r(1955562222,1575990012),r(2024104815,1125592928),r(2227730452,2716904306),r(2361852424,442776044),r(2428436474,593698344),r(2756734187,3733110249),r(3204031479,2999351573),r(3329325298,3815920427),r(3391569614,3928383900),r(3515267271,566280711),r(3940187606,3454069534),r(4118630271,4000239992),r(116418474,1914138554),r(174292421,2731055270),r(289380356,3203993006),r(460393269,320620315),r(685471733,587496836),r(852142971,1086792851),r(1017036298,365543100),r(1126000580,2618297676),r(1288033470,3409855158),r(1501505948,4234509866),r(1607167915,987167468),r(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=r()}();var d=s.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],a=n[1],i=n[2],s=n[3],r=n[4],d=n[5],u=n[6],p=n[7],h=o.high,m=o.low,v=a.high,f=a.low,g=i.high,b=i.low,O=s.high,y=s.low,j=r.high,I=r.low,k=d.high,w=d.low,E=u.high,C=u.low,T=p.high,_=p.low,S=h,D=m,U=v,M=f,N=g,B=b,R=O,L=y,V=j,x=I,P=k,A=w,G=E,H=C,$=T,z=_,F=0;F<80;F++){var Y=c[F];if(F<16)var K=Y.high=0|e[t+2*F],W=Y.low=0|e[t+2*F+1];else{var q=c[F-15],Z=q.high,X=q.low,J=(Z>>>1|X<<31)^(Z>>>8|X<<24)^Z>>>7,Q=(X>>>1|Z<<31)^(X>>>8|Z<<24)^(X>>>7|Z<<25),ee=c[F-2],te=ee.high,ne=ee.low,oe=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ae=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=c[F-7],se=ie.high,re=ie.low,le=c[F-16],ce=le.high,de=le.low;K=(K=(K=J+se+((W=Q+re)>>>0<Q>>>0?1:0))+oe+((W+=ae)>>>0<ae>>>0?1:0))+ce+((W+=de)>>>0<de>>>0?1:0),Y.high=K,Y.low=W}var ue,pe=V&P^~V&G,he=x&A^~x&H,me=S&U^S&N^U&N,ve=D&M^D&B^M&B,fe=(S>>>28|D<<4)^(S<<30|D>>>2)^(S<<25|D>>>7),ge=(D>>>28|S<<4)^(D<<30|S>>>2)^(D<<25|S>>>7),be=(V>>>14|x<<18)^(V>>>18|x<<14)^(V<<23|x>>>9),Oe=(x>>>14|V<<18)^(x>>>18|V<<14)^(x<<23|V>>>9),ye=l[F],je=ye.high,Ie=ye.low,ke=$+be+((ue=z+Oe)>>>0<z>>>0?1:0),we=ge+ve;$=G,z=H,G=P,H=A,P=V,A=x,V=R+(ke=(ke=(ke=ke+pe+((ue+=he)>>>0<he>>>0?1:0))+je+((ue+=Ie)>>>0<Ie>>>0?1:0))+K+((ue+=W)>>>0<W>>>0?1:0))+((x=L+ue|0)>>>0<L>>>0?1:0)|0,R=N,L=B,N=U,B=M,U=S,M=D,S=ke+(fe+me+(we>>>0<ge>>>0?1:0))+((D=ue+we|0)>>>0<ue>>>0?1:0)|0}m=o.low=m+D,o.high=h+S+(m>>>0<D>>>0?1:0),f=a.low=f+M,a.high=v+U+(f>>>0<M>>>0?1:0),b=i.low=b+B,i.high=g+N+(b>>>0<B>>>0?1:0),y=s.low=y+L,s.high=O+R+(y>>>0<L>>>0?1:0),I=r.low=I+x,r.high=j+V+(I>>>0<x>>>0?1:0),w=d.low=w+A,d.high=k+P+(w>>>0<A>>>0?1:0),C=u.low=C+H,u.high=E+G+(C>>>0<H>>>0?1:0),_=p.low=_+z,p.high=T+$+(_>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(o+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(d),e.HmacSHA512=t._createHmacHelper(d)}(),n.SHA512)})),nt((function(e,t){var n,o,a,i,s,r,l,c;e.exports=(a=(o=n=ot).x64,i=a.Word,s=a.WordArray,r=o.algo,l=r.SHA512,c=r.SHA384=l.extend({_doReset:function(){this._hash=new s.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=l._doFinalize.call(this);return e.sigBytes-=16,e}}),o.SHA384=l._createHelper(c),o.HmacSHA384=l._createHmacHelper(c),n.SHA384)})),nt((function(e,t){var n;e.exports=(n=ot,function(e){var t=n,o=t.lib,a=o.WordArray,i=o.Hasher,s=t.x64.Word,r=t.algo,c=[],d=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;e<5;e++)for(t=0;t<5;t++)d[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,i=0;i<24;i++){for(var r=0,l=0,p=0;p<7;p++){if(1&a){var h=(1<<p)-1;h<32?l^=1<<h:r^=1<<h-32}128&a?a=a<<1^113:a<<=1}u[i]=s.create(r,l)}}();var p=[];!function(){for(var e=0;e<25;e++)p[e]=s.create()}();var h=r.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,o=this.blockSize/2,a=0;a<o;a++){var i=e[t+2*a],s=e[t+2*a+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(_=n[a]).high^=s,_.low^=i}for(var r=0;r<24;r++){for(var l=0;l<5;l++){for(var h=0,m=0,v=0;v<5;v++)h^=(_=n[l+5*v]).high,m^=_.low;var f=p[l];f.high=h,f.low=m}for(l=0;l<5;l++){var g=p[(l+4)%5],b=p[(l+1)%5],O=b.high,y=b.low;for(h=g.high^(O<<1|y>>>31),m=g.low^(y<<1|O>>>31),v=0;v<5;v++)(_=n[l+5*v]).high^=h,_.low^=m}for(var j=1;j<25;j++){var I=(_=n[j]).high,k=_.low,w=c[j];w<32?(h=I<<w|k>>>32-w,m=k<<w|I>>>32-w):(h=k<<w-32|I>>>64-w,m=I<<w-32|k>>>64-w);var E=p[d[j]];E.high=h,E.low=m}var C=p[0],T=n[0];for(C.high=T.high,C.low=T.low,l=0;l<5;l++)for(v=0;v<5;v++){var _=n[j=l+5*v],S=p[j],D=p[(l+1)%5+5*v],U=p[(l+2)%5+5*v];_.high=S.high^~D.high&U.high,_.low=S.low^~D.low&U.low}_=n[0];var M=u[r];_.high^=M.high,_.low^=M.low}},_doFinalize:function(){var t=this._data,n=t.words,o=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;n[o>>>5]|=1<<24-o%32,n[(e.ceil((o+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,r=this.cfg.outputLength/8,l=r/8,c=[],d=0;d<l;d++){var u=s[d],p=u.high,h=u.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(p)}return new a.init(c,r)},clone:function(){for(var e=i.clone.call(this),t=e._state=l()(o=this._state).call(o,0),n=0;n<25;n++){var o;t[n]=t[n].clone()}return e}});t.SHA3=i._createHelper(h),t.HmacSHA3=i._createHmacHelper(h)}(Math),n.SHA3)})),nt((function(e,t){var n;e.exports=(n=ot,function(e){var t=n,o=t.lib,a=o.WordArray,i=o.Hasher,s=t.algo,r=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=a.create([0,1518500249,1859775393,2400959708,2840853838]),p=a.create([1352829926,1548603684,1836072691,2053994217,0]),h=s.RIPEMD160=i.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,a=e[o];e[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i,s,h,y,j,I,k,w,E,C,T,_=this._hash.words,S=u.words,D=p.words,U=r.words,M=l.words,N=c.words,B=d.words;for(I=i=_[0],k=s=_[1],w=h=_[2],E=y=_[3],C=j=_[4],n=0;n<80;n+=1)T=i+e[t+U[n]]|0,T+=n<16?m(s,h,y)+S[0]:n<32?v(s,h,y)+S[1]:n<48?f(s,h,y)+S[2]:n<64?g(s,h,y)+S[3]:b(s,h,y)+S[4],T=(T=O(T|=0,N[n]))+j|0,i=j,j=y,y=O(h,10),h=s,s=T,T=I+e[t+M[n]]|0,T+=n<16?b(k,w,E)+D[0]:n<32?g(k,w,E)+D[1]:n<48?f(k,w,E)+D[2]:n<64?v(k,w,E)+D[3]:m(k,w,E)+D[4],T=(T=O(T|=0,B[n]))+C|0,I=C,C=E,E=O(w,10),w=k,k=T;T=_[1]+h+E|0,_[1]=_[2]+y+C|0,_[2]=_[3]+j+I|0,_[3]=_[4]+i+k|0,_[4]=_[0]+s+w|0,_[0]=T},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,i=a.words,s=0;s<5;s++){var r=i[s];i[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function m(e,t,n){return e^t^n}function v(e,t,n){return e&t|~e&n}function f(e,t,n){return(e|~t)^n}function g(e,t,n){return e&n|t&~n}function b(e,t,n){return e^(t|~n)}function O(e,t){return e<<t|e>>>32-t}t.RIPEMD160=i._createHelper(h),t.HmacRIPEMD160=i._createHmacHelper(h)}(),n.RIPEMD160)})),nt((function(e,t){var n,o,a,i,s,r;e.exports=(o=(n=ot).lib,a=o.Base,i=n.enc,s=i.Utf8,r=n.algo,void(r.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),i=this._iKey=t.clone(),r=a.words,l=i.words,c=0;c<n;c++)r[c]^=1549556828,l[c]^=909522486;a.sigBytes=i.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t,n=this._hasher,o=n.finalize(e);n.reset();var a=n.finalize(w()(t=this._oKey.clone()).call(t,o));return a}})))})),nt((function(e,t){var n,o,a,i,s,r,l,c,d;e.exports=(a=(o=n=ot).lib,i=a.Base,s=a.WordArray,r=o.algo,l=r.SHA1,c=r.HMAC,d=r.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=c.create(n.hasher,e),a=s.create(),i=s.create([1]),r=a.words,l=i.words,d=n.keySize,u=n.iterations;r.length<d;){var p=o.update(t).finalize(i);o.reset();for(var h=p.words,m=h.length,v=p,f=1;f<u;f++){v=o.finalize(v),o.reset();for(var g=v.words,b=0;b<m;b++)h[b]^=g[b]}w()(a).call(a,p),l[0]++}return a.sigBytes=4*d,a}}),o.PBKDF2=function(e,t,n){return d.create(n).compute(e,t)},n.PBKDF2)})),nt((function(e,t){var n,o,a,i,s,r,l,c;e.exports=(a=(o=n=ot).lib,i=a.Base,s=a.WordArray,r=o.algo,l=r.MD5,c=r.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=n.hasher.create(),a=s.create(),i=a.words,r=n.keySize,l=n.iterations;i.length<r;){c&&o.update(c);var c=o.update(e).finalize(t);o.reset();for(var d=1;d<l;d++)c=o.finalize(c),o.reset();w()(a).call(a,c)}return a.sigBytes=4*r,a}}),o.EvpKDF=function(e,t,n){return c.create(n).compute(e,t)},n.EvpKDF)})),nt((function(e,t){var n,o,a,i,s,r,c,d,u,p,h,m,v,f,g,b,O,y,j,I,k,E,T,_;e.exports=void((n=ot).lib.Cipher||(a=n,i=a.lib,s=i.Base,r=i.WordArray,c=i.BufferedBlockAlgorithm,d=a.enc,d.Utf8,u=d.Base64,p=a.algo,h=p.EvpKDF,m=i.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:k}return function(t){return{encrypt:function(n,o,a){return e(o).encrypt(t,n,o,a)},decrypt:function(n,o,a){return e(o).decrypt(t,n,o,a)}}}}()}),i.StreamCipher=m.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),v=a.mode={},f=i.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=v.CBC=function(){var e=f.extend();function t(e,t,n){var a=this._iv;if(a){var i=a;this._iv=o}else i=this._prevBlock;for(var s=0;s<n;s++)e[t+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,a=o.blockSize;t.call(this,e,n,a),o.encryptBlock(e,n),this._prevBlock=l()(e).call(e,n,n+a)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,a=o.blockSize,i=l()(e).call(e,n,n+a);o.decryptBlock(e,n),t.call(this,e,n,a),this._prevBlock=i}}),e}(),b=a.pad={},O=b.Pkcs7={pad:function(e,t){for(var n=4*t,o=n-e.sigBytes%n,a=o<<24|o<<16|o<<8|o,i=[],s=0;s<o;s+=4)i.push(a);var l=r.create(i,o);w()(e).call(e,l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=m.extend({cfg:m.cfg.extend({mode:g,padding:O}),reset:function(){m.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=n.createEncryptor;else{o=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==o?this._mode.init(this,t&&t.words):(this._mode=o.call(n,this,t&&t.words),this._mode.__creator=o)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),y=i.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),j=a.format={},I=j.OpenSSL={stringify:function(e){var t,n,o=e.ciphertext,a=e.salt;if(a)var i=w()(t=w()(n=r.create([1398893684,1701076831])).call(n,a)).call(t,o);else i=o;return i.toString(u)},parse:function(e){var t=u.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var o=r.create(l()(n).call(n,2,4));C()(n).call(n,0,4),t.sigBytes-=16}return y.create({ciphertext:t,salt:o})}},k=i.SerializableCipher=s.extend({cfg:s.extend({format:I}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var a=e.createEncryptor(n,o),i=a.finalize(t),s=a.cfg;return y.create({ciphertext:i,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var a=e.createDecryptor(n,o).finalize(t.ciphertext);return a},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),E=a.kdf={},T=E.OpenSSL={execute:function(e,t,n,o){var a;o||(o=r.random(8));var i=h.create({keySize:t+n}).compute(e,o),s=r.create(l()(a=i.words).call(a,t),4*n);return i.sigBytes=4*t,y.create({key:i,iv:s,salt:o})}},_=i.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:T}),encrypt:function(e,t,n,o){var a=(o=this.cfg.extend(o)).kdf.execute(n,e.keySize,e.ivSize);o.iv=a.iv;var i=k.encrypt.call(this,e,t,a.key,o);return i.mixIn(a),i},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var a=o.kdf.execute(n,e.keySize,e.ivSize,t.salt);o.iv=a.iv;var i=k.decrypt.call(this,e,t,a.key,o);return i}})))})),nt((function(e,t){var n;e.exports=((n=ot).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,o){var a=this._iv;if(a){var i=l()(a).call(a,0);this._iv=void 0}else i=this._prevBlock;o.encryptBlock(i,0);for(var s=0;s<n;s++)e[t+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,a=o.blockSize;t.call(this,e,n,a,o),this._prevBlock=l()(e).call(e,n,n+a)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,a=o.blockSize,i=l()(e).call(e,n,n+a);t.call(this,e,n,a,o),this._prevBlock=i}}),e}(),n.mode.CFB)})),nt((function(e,t){var n,o,a;e.exports=((n=ot).mode.CTR=(o=n.lib.BlockCipherMode.extend(),a=o.Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=l()(a).call(a,0),this._iv=void 0);var s=l()(i).call(i,0);n.encryptBlock(s,0),i[o-1]=i[o-1]+1|0;for(var r=0;r<o;r++)e[t+r]^=s[r]}}),o.Decryptor=a,o),n.mode.CTR)})),nt((function(e,t){var n;e.exports=((n=ot).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,o=255&e;255===t?(t=0,255===n?(n=0,255===o?o=0:++o):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=o}else e+=1<<24;return e}var o=e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,a=o.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=l()(i).call(i,0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(s);var r=l()(s).call(s,0);o.encryptBlock(r,0);for(var c=0;c<a;c++)e[n+c]^=r[c]}});return e.Decryptor=o,e}(),n.mode.CTRGladman)})),nt((function(e,t){var n,o,a;e.exports=((n=ot).mode.OFB=(o=n.lib.BlockCipherMode.extend(),a=o.Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,a=this._iv,i=this._keystream;a&&(i=this._keystream=l()(a).call(a,0),this._iv=void 0),n.encryptBlock(i,0);for(var s=0;s<o;s++)e[t+s]^=i[s]}}),o.Decryptor=a,o),n.mode.OFB)})),nt((function(e,t){var n,o;e.exports=((n=ot).mode.ECB=((o=n.lib.BlockCipherMode.extend()).Encryptor=o.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),o.Decryptor=o.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),o),n.mode.ECB)})),nt((function(e,t){var n;e.exports=((n=ot).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,o=4*t,a=o-n%o,i=n+a-1;e.clamp(),e.words[i>>>2]|=a<<24-i%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)})),nt((function(e,t){var n;e.exports=((n=ot).pad.Iso10126={pad:function(e,t){var o,a=4*t,i=a-e.sigBytes%a;w()(o=w()(e).call(e,n.lib.WordArray.random(i-1))).call(o,n.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)})),nt((function(e,t){var n;e.exports=((n=ot).pad.Iso97971={pad:function(e,t){w()(e).call(e,n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)})),nt((function(e,t){var n;e.exports=((n=ot).pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},n.pad.ZeroPadding)})),nt((function(e,t){var n;e.exports=((n=ot).pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)})),nt((function(e,t){var n,o,a,i;e.exports=(a=(o=n=ot).lib.CipherParams,i=o.enc.Hex,o.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return a.create({ciphertext:t})}},n.format.Hex)})),nt((function(e,t){var n;e.exports=(n=ot,function(){var e=n,t=e.lib.BlockCipher,o=e.algo,a=[],i=[],s=[],r=[],l=[],c=[],d=[],u=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var m=o^o<<1^o<<2^o<<3^o<<4;m=m>>>8^255&m^99,a[n]=m,i[m]=n;var v=e[n],f=e[v],g=e[f],b=257*e[m]^16843008*m;s[n]=b<<24|b>>>8,r[n]=b<<16|b>>>16,l[n]=b<<8|b>>>24,c[n]=b,b=16843009*g^65537*f^257*v^16843008*n,d[m]=b<<24|b>>>8,u[m]=b<<16|b>>>16,p[m]=b<<8|b>>>24,h[m]=b,n?(n=v^e[e[e[g^v]]],o^=e[e[o]]):n=o=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,o=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],s=0;s<o;s++)if(s<n)i[s]=t[s];else{var r=i[s-1];s%n?n>6&&s%n==4&&(r=a[r>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r]):(r=a[(r=r<<8|r>>>24)>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r],r^=m[s/n|0]<<24),i[s]=i[s-n]^r}for(var l=this._invKeySchedule=[],c=0;c<o;c++)s=o-c,r=c%4?i[s]:i[s-4],l[c]=c<4||s<=4?r:d[a[r>>>24]]^u[a[r>>>16&255]]^p[a[r>>>8&255]]^h[a[255&r]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,r,l,c,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,u,p,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,a,i,s,r){for(var l=this._nRounds,c=e[t]^n[0],d=e[t+1]^n[1],u=e[t+2]^n[2],p=e[t+3]^n[3],h=4,m=1;m<l;m++){var v=o[c>>>24]^a[d>>>16&255]^i[u>>>8&255]^s[255&p]^n[h++],f=o[d>>>24]^a[u>>>16&255]^i[p>>>8&255]^s[255&c]^n[h++],g=o[u>>>24]^a[p>>>16&255]^i[c>>>8&255]^s[255&d]^n[h++],b=o[p>>>24]^a[c>>>16&255]^i[d>>>8&255]^s[255&u]^n[h++];c=v,d=f,u=g,p=b}v=(r[c>>>24]<<24|r[d>>>16&255]<<16|r[u>>>8&255]<<8|r[255&p])^n[h++],f=(r[d>>>24]<<24|r[u>>>16&255]<<16|r[p>>>8&255]<<8|r[255&c])^n[h++],g=(r[u>>>24]<<24|r[p>>>16&255]<<16|r[c>>>8&255]<<8|r[255&d])^n[h++],b=(r[p>>>24]<<24|r[c>>>16&255]<<16|r[d>>>8&255]<<8|r[255&u])^n[h++],e[t]=v,e[t+1]=f,e[t+2]=g,e[t+3]=b},keySize:8});e.AES=t._createHelper(v)}(),n.AES)})),nt((function(e,t){var n;e.exports=(n=ot,function(){var e=n,t=e.lib,o=t.WordArray,a=t.BlockCipher,i=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],r=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=i.DES=a.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var o=s[n]-1;t[n]=e[o>>>5]>>>31-o%32&1}for(var a=this._subKeys=[],i=0;i<16;i++){var l=a[i]=[],d=c[i];for(n=0;n<24;n++)l[n/6|0]|=t[(r[n]-1+d)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(r[n+24]-1+d)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var u=this._invSubKeys=[];for(n=0;n<16;n++)u[n]=a[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),h.call(this,1,1431655765);for(var o=0;o<16;o++){for(var a=n[o],i=this._lBlock,s=this._rBlock,r=0,l=0;l<8;l++)r|=d[l][((s^a[l])&u[l])>>>0];this._lBlock=s,this._rBlock=i^r}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,h.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function m(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=a._createHelper(p);var v=i.TripleDES=a.extend({_doReset:function(){var e=this._key.words;this._des1=p.createEncryptor(o.create(l()(e).call(e,0,2))),this._des2=p.createEncryptor(o.create(l()(e).call(e,2,4))),this._des3=p.createEncryptor(o.create(l()(e).call(e,4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=a._createHelper(v)}(),n.TripleDES)})),nt((function(e,t){var n;e.exports=(n=ot,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,a=o.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,o=this._S=[],a=0;a<256;a++)o[a]=a;a=0;for(var i=0;a<256;a++){var s=a%n,r=t[s>>>2]>>>24-s%4*8&255;i=(i+o[a]+r)%256;var l=o[a];o[a]=o[i],o[i]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,o=0,a=0;a<4;a++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,o|=e[(e[t]+e[n])%256]<<24-8*a}return this._i=t,this._j=n,o}e.RC4=t._createHelper(a);var s=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(s)}(),n.RC4)})),nt((function(e,t){var n;e.exports=(n=ot,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,a=[],i=[],s=[],r=o.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)a[n]^=o[n+4&7];if(t){var i=t.words,s=i[0],r=i[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),u=c>>>16|4294901760&d,p=d<<16|65535&c;for(a[0]^=c,a[1]^=u,a[2]^=d,a[3]^=p,a[4]^=c,a[5]^=u,a[6]^=d,a[7]^=p,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),e[t+o]^=a[o]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],a=65535&o,r=o>>>16,l=((a*a>>>17)+a*r>>>15)+r*r,c=((4294901760&o)*o|0)+((65535&o)*o|0);s[n]=l^c}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.Rabbit=t._createHelper(r)}(),n.Rabbit)})),nt((function(e,t){var n;e.exports=(n=ot,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,a=[],i=[],s=[],r=o.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)l.call(this);for(a=0;a<8;a++)o[a]^=n[a+4&7];if(t){var i=t.words,s=i[0],r=i[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),u=c>>>16|4294901760&d,p=d<<16|65535&c;for(o[0]^=c,o[1]^=u,o[2]^=d,o[3]^=p,o[4]^=c,o[5]^=u,o[6]^=d,o[7]^=p,a=0;a<4;a++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),e[t+o]^=a[o]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],a=65535&o,r=o>>>16,l=((a*a>>>17)+a*r>>>15)+r*r,c=((4294901760&o)*o|0)+((65535&o)*o|0);s[n]=l^c}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.RabbitLegacy=t._createHelper(r)}(),n.RabbitLegacy)})),nt((function(e,t){e.exports=ot})));function it(){throw new Error("setTimeout has not been defined")}function st(){throw new Error("clearTimeout has not been defined")}var rt=it,lt=st;function ct(e){if(rt===_.a)return _()(e,0);if((rt===it||!rt)&&_.a)return rt=_.a,_()(e,0);try{return rt(e,0)}catch(ae){try{return rt.call(null,e,0)}catch(ae){return rt.call(this,e,0)}}}"function"==typeof _.a&&(rt=_.a),"function"==typeof oe.clearTimeout&&(lt=clearTimeout);var dt,ut=[],pt=!1,ht=-1;function mt(){pt&&dt&&(pt=!1,dt.length?ut=w()(dt).call(dt,ut):ht=-1,ut.length&&vt())}function vt(){if(!pt){var e=ct(mt);pt=!0;for(var t=ut.length;t;){for(dt=ut,ut=[];++ht<t;)dt&&dt[ht].run();ht=-1,t=ut.length}dt=null,pt=!1,function(e){if(lt===clearTimeout)return clearTimeout(e);if((lt===st||!lt)&&clearTimeout)return lt=clearTimeout,clearTimeout(e);try{lt(e)}catch(t){try{return lt.call(null,e)}catch(t){return lt.call(this,e)}}}(e)}}function ft(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ut.push(new gt(e,t)),1!==ut.length||pt||ct(vt)}function gt(e,t){this.fun=e,this.array=t}gt.prototype.run=function(){this.fun.apply(null,this.array)};var bt=oe.performance||{};function Ot(){}function yt(){yt.init.call(this)}function jt(e){return void 0===e._maxListeners?yt.defaultMaxListeners:e._maxListeners}function It(e,t,n){if(t)e.call(n);else for(var o=e.length,a=Dt(e,o),i=0;i<o;++i)a[i].call(n)}function kt(e,t,n,o){if(t)e.call(n,o);else for(var a=e.length,i=Dt(e,a),s=0;s<a;++s)i[s].call(n,o)}function wt(e,t,n,o,a){if(t)e.call(n,o,a);else for(var i=e.length,s=Dt(e,i),r=0;r<i;++r)s[r].call(n,o,a)}function Et(e,t,n,o,a,i){if(t)e.call(n,o,a,i);else for(var s=e.length,r=Dt(e,s),l=0;l<s;++l)r[l].call(n,o,a,i)}function Ct(e,t,n,o){if(t)e.apply(n,o);else for(var a=e.length,i=Dt(e,a),s=0;s<a;++s)i[s].apply(n,o)}function Tt(e,t,n,o){var a,i,s,r;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]):(i=e._events=new Ot,e._eventsCount=0),s){if("function"==typeof s?s=i[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),!s.warned&&(a=jt(e))&&a>0&&s.length>a){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,r=l,"function"==typeof console.warn?console.warn(r):console.log(r)}}else s=i[t]=n,++e._eventsCount;return e}function _t(e,t,n){var o=!1;function a(){e.removeListener(t,a),o||(o=!0,n.apply(e,arguments))}return a.listener=n,a}function St(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Dt(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}bt.now||bt.mozNow||bt.msNow||bt.oNow||bt.webkitNow,Ot.prototype=I()(null),yt.EventEmitter=yt,yt.usingDomains=!1,yt.prototype.domain=void 0,yt.prototype._events=void 0,yt.prototype._maxListeners=void 0,yt.defaultMaxListeners=10,yt.init=function(){this.domain=null,yt.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==D()(this)._events||(this._events=new Ot,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},yt.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},yt.prototype.getMaxListeners=function(){return jt(this)},yt.prototype.emit=function(e){var t,n,o,a,i,s,r,l="error"===e;if(s=this._events)l=l&&null==s.error;else if(!l)return!1;if(r=this.domain,l){if(t=arguments[1],!r){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=r,t.domainThrown=!1,r.emit("error",t),!1}if(!(n=s[e]))return!1;var d="function"==typeof n;switch(o=arguments.length){case 1:It(n,d,this);break;case 2:kt(n,d,this,arguments[1]);break;case 3:wt(n,d,this,arguments[1],arguments[2]);break;case 4:Et(n,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(o-1),i=1;i<o;i++)a[i-1]=arguments[i];Ct(n,d,this,a)}return!0},yt.prototype.addListener=function(e,t){return Tt(this,e,t,!1)},yt.prototype.on=yt.prototype.addListener,yt.prototype.prependListener=function(e,t){return Tt(this,e,t,!0)},yt.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_t(this,e,t)),this},yt.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_t(this,e,t)),this},yt.prototype.removeListener=function(e,t){var n,o,a,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new Ot:(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=n[i].listener,a=i;break}if(a<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Ot,this;delete o[e]}else!function(e,t){for(var n=t,o=n+1,a=e.length;o<a;n+=1,o+=1)e[n]=e[o];e.pop()}(n,a);o.removeListener&&this.emit("removeListener",e,s||t)}return this},yt.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Ot,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new Ot:delete n[e]),this;if(0===arguments.length){for(var o,a=M()(n),i=0;i<a.length;++i)"removeListener"!==(o=a[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new Ot,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},yt.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},yt.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):St.call(e,t)},yt.prototype.listenerCount=St,yt.prototype.eventNames=function(){return this._eventsCount>0?B()(this._events):[]};var Ut="function"==typeof I.a?function(e,t){e.super_=t,e.prototype=I()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},Mt=/%[sdj%]/g;function Nt(e){if(!Ft(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(Vt(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,a=o.length,i=String(e).replace(Mt,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return L()(o[n++])}catch(e){return"[Circular]"}default:return e}})),s=o[n];n<a;s=o[++n])zt(s)||!Wt(s)?i+=" "+s:i+=" "+Vt(s);return i}function Bt(e,t){if(Yt(oe.process))return function(){return Bt(e,t).apply(this,arguments)};var n=!1;return function(){return n||(console.error(t),n=!0),e.apply(this,arguments)}}var Rt,Lt={};function Vt(e,t){var n={seen:[],stylize:Pt};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),$t(t)?n.showHidden=t:t&&function(e,t){if(!t||!Wt(t))return e;for(var n=M()(t),o=n.length;o--;)e[n[o]]=t[n[o]]}(n,t),Yt(n.showHidden)&&(n.showHidden=!1),Yt(n.depth)&&(n.depth=2),Yt(n.colors)&&(n.colors=!1),Yt(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=xt),At(n,e,n.depth)}function xt(e,t){var n=Vt.styles[t];return n?"["+Vt.colors[n][0]+"m"+e+"["+Vt.colors[n][1]+"m":e}function Pt(e,t){return e}function At(e,t,n){if(e.customInspect&&t&&Xt(t.inspect)&&t.inspect!==Vt&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return Ft(o)||(o=At(e,o,n)),o}var a=function(e,t){if(Yt(t))return e.stylize("undefined","undefined");if(Ft(t)){var n="'"+L()(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return o=t,"number"==typeof o?e.stylize(""+t,"number"):$t(t)?e.stylize(""+t,"boolean"):zt(t)?e.stylize("null","null"):void 0;var o}(e,t);if(a)return a;var i=M()(t),r=function(e){var t={};return x()(e).call(e,(function(e,n){t[e]=!0})),t}(i);if(e.showHidden&&(i=A()(t)),Zt(t)&&(d()(i).call(i,"message")>=0||d()(i).call(i,"description")>=0))return Gt(t);if(0===i.length){if(Xt(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(Kt(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(qt(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Zt(t))return Gt(t)}var c,u,p="",h=!1,m=["{","}"];return c=t,s()(c)&&(h=!0,m=["[","]"]),Xt(t)&&(p=" [Function"+(t.name?": "+t.name:"")+"]"),Kt(t)&&(p=" "+RegExp.prototype.toString.call(t)),qt(t)&&(p=" "+Date.prototype.toUTCString.call(t)),Zt(t)&&(p=" "+Gt(t)),0!==i.length||h&&0!=t.length?n<0?Kt(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=h?function(e,t,n,o,a){for(var i=[],s=0,r=t.length;s<r;++s)Qt(t,String(s))?i.push(Ht(e,t,n,o,String(s),!0)):i.push("");return x()(a).call(a,(function(a){a.match(/^\d+$/)||i.push(Ht(e,t,n,o,a,!0))})),i}(e,t,n,r,i):H()(i).call(i,(function(o){return Ht(e,t,n,r,o,h)})),e.seen.pop(),function(e,t,n){return z()(e).call(e,(function(e,t){return d()(t).call(t,"\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,p,m)):m[0]+p+m[1]}function Gt(e){return"["+Error.prototype.toString.call(e)+"]"}function Ht(e,t,n,o,a,i){var s,r,l,c,u,p,h;if((h=Y()(t,a)||{value:t[a]}).get?p=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(p=e.stylize("[Setter]","special")),Qt(o,a)||(u="["+a+"]"),p||(d()(s=e.seen).call(s,h.value)<0?d()(r=p=zt(n)?At(e,h.value,null):At(e,h.value,n-1)).call(r,"\n")>-1&&(p=i?H()(l=p.split("\n")).call(l,(function(e){return"  "+e})).join("\n").substr(2):"\n"+H()(c=p.split("\n")).call(c,(function(e){return"   "+e})).join("\n")):p=e.stylize("[Circular]","special")),Yt(u)){if(i&&a.match(/^\d+$/))return p;(u=L()(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+p}function $t(e){return"boolean"==typeof e}function zt(e){return null===e}function Ft(e){return"string"==typeof e}function Yt(e){return void 0===e}function Kt(e){return Wt(e)&&"[object RegExp]"===Jt(e)}function Wt(e){return"object"==typeof e&&null!==e}function qt(e){return Wt(e)&&"[object Date]"===Jt(e)}function Zt(e){return Wt(e)&&("[object Error]"===Jt(e)||e instanceof Error)}function Xt(e){return"function"==typeof e}function Jt(e){return Object.prototype.toString.call(e)}function Qt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function en(){this.head=null,this.tail=null,this.length=0}Vt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Vt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},en.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},en.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},en.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},en.prototype.clear=function(){this.head=this.tail=null,this.length=0},en.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},en.prototype.concat=function(e){if(0===this.length)return ge.alloc(0);if(1===this.length)return this.head.data;for(var t=ge.allocUnsafe(e>>>0),n=this.head,o=0;n;)n.data.copy(t,o),o+=n.data.length,n=n.next;return t};var tn=ge.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function nn(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!tn(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=an;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=sn;break;default:return void(this.write=on)}this.charBuffer=new ge(6),this.charReceived=0,this.charLength=0}function on(e){return e.toString(this.encoding)}function an(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function sn(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}nn.prototype.write=function(e){for(var t="";this.charLength;){var n,o=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,o),this.charReceived+=o,this.charReceived<this.charLength)return"";if(e=l()(e).call(e,o,e.length),!((a=(t=l()(n=this.charBuffer).call(n,0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&a<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var a,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(a=t.charCodeAt(i))>=55296&&a<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,i)}return t},nn.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},nn.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,o=this.charBuffer,a=this.encoding;t+=l()(o).call(o,0,n).toString(a)}return t},cn.ReadableState=ln;var rn=function(e){return Yt(Rt)&&(Rt=""),e=e.toUpperCase(),Lt[e]||(new RegExp("\\b"+e+"\\b","i").test(Rt)?Lt[e]=function(){var t=Nt.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:Lt[e]=function(){}),Lt[e]}("stream");function ln(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Vn&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new en,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new nn(e.encoding),this.encoding=e.encoding)}function cn(e){if(!(this instanceof cn))return new cn(e);this._readableState=new ln(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),yt.call(this)}function dn(e,t,n,o,a){var i=function(e,t){var n=null;return et(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(i)e.emit("error",i);else if(null===n)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,hn(e)}}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!a){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&a){var r=new Error("stream.unshift() after end event");e.emit("error",r)}else{var l;!t.decoder||a||o||(n=t.decoder.write(n),l=!t.objectMode&&0===n.length),a||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&hn(e))),function(e,t){t.readingMore||(t.readingMore=!0,ft(vn,e,t))}(e,t)}else a||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}Ut(cn,yt),cn.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=ge.from(e,t),t=""),dn(this,n,e,t,!1)},cn.prototype.unshift=function(e){return dn(this,this._readableState,e,"",!0)},cn.prototype.isPaused=function(){return!1===this._readableState.flowing},cn.prototype.setEncoding=function(e){return this._readableState.decoder=new nn(e),this._readableState.encoding=e,this};var un=8388608;function pn(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=un?e=un:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function hn(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(rn("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?ft(mn,e):mn(e))}function mn(e){rn("emit readable"),e.emit("readable"),bn(e)}function vn(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(rn("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function fn(e){rn("readable nexttick read 0"),e.read(0)}function gn(e,t){t.reading||(rn("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),bn(e),t.flowing&&!t.reading&&e.read(0)}function bn(e){var t=e._readableState;for(rn("flow",t.flowing);t.flowing&&null!==e.read(););}function On(e,t){var n,o;return 0===t.length?null:(t.objectMode?o=t.buffer.shift():!e||e>=t.length?(o=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:w()(n=t.buffer).call(n,t.length),t.buffer.clear()):o=function(e,t,n){var o,a,i;return e<t.head.data.length?(i=l()(o=t.head.data).call(o,0,e),t.head.data=l()(a=t.head.data).call(a,e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,o=1,a=n.data;for(e-=a.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(s===i.length?a+=i:a+=l()(i).call(i,0,e),0===(e-=s)){s===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=l()(i).call(i,s));break}++o}return t.length-=o,a}(e,t):function(e,t){var n=ge.allocUnsafe(e),o=t.head,a=1;for(o.data.copy(n),e-=o.data.length;o=o.next;){var i=o.data,s=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,s),0===(e-=s)){s===i.length?(++a,o.next?t.head=o.next:t.head=t.tail=null):(t.head=o,o.data=l()(i).call(i,s));break}++a}return t.length-=a,n}(e,t),i}(e,t.buffer,t.decoder),o)}function yn(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,ft(jn,t,e))}function jn(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function In(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function kn(){}function wn(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function En(e,t){W()(this,"buffer",{get:Bt((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Vn&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,o=n.sync,a=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,o,a){--t.pendingcb,n?ft(a,o):a(o),e._writableState.errorEmitted=!0,e.emit("error",o)}(e,n,o,t,a);else{var i=Dn(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||Sn(e,n),o?ft(_n,e,n,i,a):_n(e,n,i,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Nn(this)}function Cn(e){if(!(this instanceof Cn||this instanceof Vn))return new Cn(e);this._writableState=new En(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),yt.call(this)}function Tn(e,t,n,o,a,i,s){t.writelen=o,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function _n(e,t,n,o){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,o(),Mn(e,t)}function Sn(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,a=new Array(o),i=t.corkedRequestsFree;i.entry=n;for(var s=0;n;)a[s]=n,n=n.next,s+=1;Tn(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Nn(t)}else{for(;n;){var r=n.chunk,l=n.encoding,c=n.callback;if(Tn(e,t,!1,t.objectMode?1:r.length,r,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function Dn(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Un(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Mn(e,t){var n=Dn(t);return n&&(0===t.pendingcb?(Un(e,t),t.finished=!0,e.emit("finish")):Un(e,t)),n}function Nn(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var o=t.entry;for(t.entry=null;o;){var a=o.callback;e.pendingcb--,a(n),o=o.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}cn.prototype.read=function(e){rn("read",e),e=m()(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return rn("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?yn(this):hn(this),null;if(0===(e=pn(e,t))&&t.ended)return 0===t.length&&yn(this),null;var o,a=t.needReadable;return rn("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&rn("length less than watermark",a=!0),t.ended||t.reading?rn("reading or ended",a=!1):a&&(rn("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=pn(n,t))),null===(o=e>0?On(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&yn(this)),null!==o&&this.emit("data",o),o},cn.prototype._read=function(e){this.emit("error",new Error("not implemented"))},cn.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,rn("pipe count=%d opts=%j",o.pipesCount,t);var a=t&&!1===t.end?d:r;function i(e){rn("onunpipe"),e===n&&d()}function r(){rn("onend"),e.end()}o.endEmitted?ft(a):n.once("end",a),e.on("unpipe",i);var l=function(e){return function(){var t=e._readableState;rn("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,bn(e))}}(n);e.on("drain",l);var c=!1;function d(){rn("cleanup"),e.removeListener("close",m),e.removeListener("finish",v),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",i),n.removeListener("end",r),n.removeListener("end",d),n.removeListener("data",p),c=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l()}var u=!1;function p(t){rn("ondata"),u=!1,!1!==e.write(t)||u||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==In(o.pipes,e))&&!c&&(rn("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,u=!0),n.pause())}function h(t){var n;rn("onerror",t),f(),e.removeListener("error",h),0===(n="error",e.listeners(n).length)&&e.emit("error",t)}function m(){e.removeListener("finish",v),f()}function v(){rn("onfinish"),e.removeListener("close",m),f()}function f(){rn("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s()(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",m),e.once("finish",v),e.emit("pipe",n),o.flowing||(rn("pipe resume"),n.resume()),e},cn.prototype.unpipe=function(e){var t,n=this._readableState;if(0===n.pipesCount)return this;if(1===n.pipesCount)return e&&e!==n.pipes||(e||(e=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var o=n.pipes,a=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var i=0;i<a;i++)o[i].emit("unpipe",this);return this}var s=In(n.pipes,e);return-1===s||(C()(t=n.pipes).call(t,s,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),e.emit("unpipe",this)),this},cn.prototype.on=function(e,t){var n=yt.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&hn(this):ft(fn,this))}return n},cn.prototype.addListener=cn.prototype.on,cn.prototype.resume=function(){var e=this._readableState;return e.flowing||(rn("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,ft(gn,e,t))}(this,e)),this},cn.prototype.pause=function(){return rn("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(rn("pause"),this._readableState.flowing=!1,this.emit("pause")),this},cn.prototype.wrap=function(e){var t=this._readableState,n=!1,o=this;for(var a in e.on("end",(function(){if(rn("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&o.push(e)}o.push(null)})),e.on("data",(function(a){rn("wrapped data"),t.decoder&&(a=t.decoder.write(a)),t.objectMode&&null==a||(t.objectMode||a&&a.length)&&(o.push(a)||(n=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));return function(e,t){for(var n=0,o=e.length;n<o;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],(function(t){var n;e.on(t,Z()(n=o.emit).call(n,o,t))})),o._read=function(t){rn("wrapped _read",t),n&&(n=!1,e.resume())},o},cn._fromList=On,Cn.WritableState=En,Ut(Cn,yt),En.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Cn.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Cn.prototype.write=function(e,t,n){var o=this._writableState,a=!1;return"function"==typeof t&&(n=t,t=null),ge.isBuffer(e)?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=kn),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),ft(t,n)}(this,n):function(e,t,n,o){var a=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):ge.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),ft(o,i),a=!1),a}(this,o,e,n)&&(o.pendingcb++,a=function(e,t,n,o,a){n=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=ge.from(t,n)),t}(t,n,o),ge.isBuffer(n)&&(o="buffer");var i=t.objectMode?1:n.length;t.length+=i;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var r=t.lastBufferedRequest;t.lastBufferedRequest=new wn(n,o,a),r?r.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Tn(e,t,!1,i,n,o,a);return s}(this,o,e,t,n)),a},Cn.prototype.cork=function(){this._writableState.corked++},Cn.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Sn(this,e))},Cn.prototype.setDefaultEncoding=function(e){var t;if("string"==typeof e&&(e=e.toLowerCase()),!(d()(t=["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"]).call(t,(e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Cn.prototype._write=function(e,t,n){n(new Error("not implemented"))},Cn.prototype._writev=null,Cn.prototype.end=function(e,t,n){var o=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||function(e,t,n){t.ending=!0,Mn(e,t),n&&(t.finished?ft(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,o,n)},Ut(Vn,cn);for(var Bn=M()(Cn.prototype),Rn=0;Rn<Bn.length;Rn++){var Ln=Bn[Rn];Vn.prototype[Ln]||(Vn.prototype[Ln]=Cn.prototype[Ln])}function Vn(e){if(!(this instanceof Vn))return new Vn(e);cn.call(this,e),Cn.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",xn)}function xn(){this.allowHalfOpen||this._writableState.ended||ft(Pn,this)}function Pn(e){e.end()}function An(e){this.afterTransform=function(t,n){return function(e,t,n){var o=e._transformState;o.transforming=!1;var a=o.writecb;if(!a)return e.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,null!=n&&e.push(n),a(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Gn(e){if(!(this instanceof Gn))return new Gn(e);Vn.call(this,e),this._transformState=new An(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){Hn(t,e)})):Hn(t)}))}function Hn(e,t){if(t)return e.emit("error",t);var n=e._writableState,o=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function $n(e){if(!(this instanceof $n))return new $n(e);Gn.call(this,e)}function zn(){yt.call(this)}Ut(Gn,Vn),Gn.prototype.push=function(e,t){return this._transformState.needTransform=!1,Vn.prototype.push.call(this,e,t)},Gn.prototype._transform=function(e,t,n){throw new Error("Not implemented")},Gn.prototype._write=function(e,t,n){var o=this._transformState;if(o.writecb=n,o.writechunk=e,o.writeencoding=t,!o.transforming){var a=this._readableState;(o.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Gn.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Ut($n,Gn),$n.prototype._transform=function(e,t,n){n(null,e)},Ut(zn,yt),zn.Readable=cn,zn.Writable=Cn,zn.Duplex=Vn,zn.Transform=Gn,zn.PassThrough=$n,zn.Stream=zn,zn.prototype.pipe=function(e,t){var n=this;function o(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",o),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",r));var i=!1;function s(){i||(i=!0,e.end())}function r(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===yt.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",o),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",r),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e};var Fn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function Yn(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Kn(e,t,n,o,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+o),a);else for(var i=0;i<o;i++)e[a+i]=t[n+i]}var Wn=Uint8Array,qn=Uint16Array,Zn=Int32Array,Xn=4,Jn=0,Qn=1,eo=2;function to(e){for(var t=e.length;--t>=0;)e[t]=0}var no=0,oo=1,ao=2,io=29,so=256,ro=so+1+io,lo=30,co=19,uo=2*ro+1,po=15,ho=16,mo=7,vo=256,fo=16,go=17,bo=18,Oo=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],yo=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],jo=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Io=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ko=new Array(2*(ro+2));to(ko);var wo=new Array(2*lo);to(wo);var Eo=new Array(512);to(Eo);var Co=new Array(256);to(Co);var To=new Array(io);to(To);var _o,So,Do,Uo=new Array(lo);function Mo(e,t,n,o,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=o,this.max_length=a,this.has_stree=e&&e.length}function No(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Bo(e){return e<256?Eo[e]:Eo[256+(e>>>7)]}function Ro(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Lo(e,t,n){e.bi_valid>ho-n?(e.bi_buf|=t<<e.bi_valid&65535,Ro(e,e.bi_buf),e.bi_buf=t>>ho-e.bi_valid,e.bi_valid+=n-ho):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function Vo(e,t,n){Lo(e,n[2*t],n[2*t+1])}function xo(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Po(e,t,n){var o,a,i=new Array(po+1),s=0;for(o=1;o<=po;o++)i[o]=s=s+n[o-1]<<1;for(a=0;a<=t;a++){var r=e[2*a+1];0!==r&&(e[2*a]=xo(i[r]++,r))}}function Ao(e){var t;for(t=0;t<ro;t++)e.dyn_ltree[2*t]=0;for(t=0;t<lo;t++)e.dyn_dtree[2*t]=0;for(t=0;t<co;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*vo]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Go(e){e.bi_valid>8?Ro(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Ho(e,t,n,o){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&o[t]<=o[n]}function $o(e,t,n){for(var o=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&Ho(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Ho(t,o,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=o}function zo(e,t,n){var o,a,i,s,r=0;if(0!==e.last_lit)do{o=e.pending_buf[e.d_buf+2*r]<<8|e.pending_buf[e.d_buf+2*r+1],a=e.pending_buf[e.l_buf+r],r++,0===o?Vo(e,a,t):(Vo(e,(i=Co[a])+so+1,t),0!==(s=Oo[i])&&Lo(e,a-=To[i],s),Vo(e,i=Bo(--o),n),0!==(s=yo[i])&&Lo(e,o-=Uo[i],s))}while(r<e.last_lit);Vo(e,vo,t)}function Fo(e,t){var n,o,a,i=t.dyn_tree,s=t.stat_desc.static_tree,r=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=uo,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,r&&(e.static_len-=s[2*a+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)$o(e,i,n);a=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$o(e,i,1),o=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=o,i[2*a]=i[2*n]+i[2*o],e.depth[a]=(e.depth[n]>=e.depth[o]?e.depth[n]:e.depth[o])+1,i[2*n+1]=i[2*o+1]=a,e.heap[1]=a++,$o(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,o,a,i,s,r,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,m=t.stat_desc.max_length,v=0;for(i=0;i<=po;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<uo;n++)(i=l[2*l[2*(o=e.heap[n])+1]+1]+1)>m&&(i=m,v++),l[2*o+1]=i,o>c||(e.bl_count[i]++,s=0,o>=h&&(s=p[o-h]),r=l[2*o],e.opt_len+=r*(i+s),u&&(e.static_len+=r*(d[2*o+1]+s)));if(0!==v){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,v-=2}while(v>0);for(i=m;0!==i;i--)for(o=e.bl_count[i];0!==o;)(a=e.heap[--n])>c||(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),o--)}}(e,t),Po(i,c,e.bl_count)}function Yo(e,t,n){var o,a,i=-1,s=t[1],r=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,o=0;o<=n;o++)a=s,s=t[2*(o+1)+1],++r<l&&a===s||(r<c?e.bl_tree[2*a]+=r:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*fo]++):r<=10?e.bl_tree[2*go]++:e.bl_tree[2*bo]++,r=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))}function Ko(e,t,n){var o,a,i=-1,s=t[1],r=0,l=7,c=4;for(0===s&&(l=138,c=3),o=0;o<=n;o++)if(a=s,s=t[2*(o+1)+1],!(++r<l&&a===s)){if(r<c)do{Vo(e,a,e.bl_tree)}while(0!=--r);else 0!==a?(a!==i&&(Vo(e,a,e.bl_tree),r--),Vo(e,fo,e.bl_tree),Lo(e,r-3,2)):r<=10?(Vo(e,go,e.bl_tree),Lo(e,r-3,3)):(Vo(e,bo,e.bl_tree),Lo(e,r-11,7));r=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}}to(Uo);var Wo=!1;function qo(e){Wo||(function(){var e,t,n,o,a,i=new Array(po+1);for(n=0,o=0;o<io-1;o++)for(To[o]=n,e=0;e<1<<Oo[o];e++)Co[n++]=o;for(Co[n-1]=o,a=0,o=0;o<16;o++)for(Uo[o]=a,e=0;e<1<<yo[o];e++)Eo[a++]=o;for(a>>=7;o<lo;o++)for(Uo[o]=a<<7,e=0;e<1<<yo[o]-7;e++)Eo[256+a++]=o;for(t=0;t<=po;t++)i[t]=0;for(e=0;e<=143;)ko[2*e+1]=8,e++,i[8]++;for(;e<=255;)ko[2*e+1]=9,e++,i[9]++;for(;e<=279;)ko[2*e+1]=7,e++,i[7]++;for(;e<=287;)ko[2*e+1]=8,e++,i[8]++;for(Po(ko,ro+1,i),e=0;e<lo;e++)wo[2*e+1]=5,wo[2*e]=xo(e,5);_o=new Mo(ko,Oo,so+1,ro,po),So=new Mo(wo,yo,0,lo,po),Do=new Mo(new Array(0),jo,0,co,mo)}(),Wo=!0),e.l_desc=new No(e.dyn_ltree,_o),e.d_desc=new No(e.dyn_dtree,So),e.bl_desc=new No(e.bl_tree,Do),e.bi_buf=0,e.bi_valid=0,Ao(e)}function Zo(e,t,n,o){Lo(e,(no<<1)+(o?1:0),3),function(e,t,n,o){Go(e),o&&(Ro(e,n),Ro(e,~n)),Kn(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}function Xo(e){Lo(e,oo<<1,3),Vo(e,vo,ko),function(e){16===e.bi_valid?(Ro(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}function Jo(e,t,n,o){var a,i,s=0;e.level>0?(e.strm.data_type===eo&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Jn;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Qn;for(t=32;t<so;t++)if(0!==e.dyn_ltree[2*t])return Qn;return Jn}(e)),Fo(e,e.l_desc),Fo(e,e.d_desc),s=function(e){var t;for(Yo(e,e.dyn_ltree,e.l_desc.max_code),Yo(e,e.dyn_dtree,e.d_desc.max_code),Fo(e,e.bl_desc),t=co-1;t>=3&&0===e.bl_tree[2*Io[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?Zo(e,t,n,o):e.strategy===Xn||i===a?(Lo(e,(oo<<1)+(o?1:0),3),zo(e,ko,wo)):(Lo(e,(ao<<1)+(o?1:0),3),function(e,t,n,o){var a;for(Lo(e,t-257,5),Lo(e,n-1,5),Lo(e,o-4,4),a=0;a<o;a++)Lo(e,e.bl_tree[2*Io[a]+1],3);Ko(e,e.dyn_ltree,t-1),Ko(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),zo(e,e.dyn_ltree,e.dyn_dtree)),Ao(e),o&&Go(e)}function Qo(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Co[n]+so+1)]++,e.dyn_dtree[2*Bo(t)]++),e.last_lit===e.lit_bufsize-1}function ea(e,t,n,o){for(var a=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{i=i+(a=a+t[o++]|0)|0}while(--s);a%=65521,i%=65521}return a|i<<16|0}var ta=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function na(e,t,n,o){var a=ta,i=o+n;e^=-1;for(var s=o;s<i;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}var oa,aa=0,ia=1,sa=3,ra=4,la=5,ca=0,da=1,ua=-2,pa=-3,ha=-5,ma=-1,va=1,fa=2,ga=3,ba=4,Oa=2,ya=8,ja=9,Ia=286,ka=30,wa=19,Ea=2*Ia+1,Ca=15,Ta=3,_a=258,Sa=_a+Ta+1,Da=32,Ua=42,Ma=69,Na=73,Ba=91,Ra=103,La=113,Va=666,xa=1,Pa=2,Aa=3,Ga=4,Ha=3;function $a(e,t){return e.msg=Fn[t],t}function za(e){return(e<<1)-(e>4?9:0)}function Fa(e){for(var t=e.length;--t>=0;)e[t]=0}function Ya(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Kn(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function Ka(e,t){Jo(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ya(e.strm)}function Wa(e,t){e.pending_buf[e.pending++]=t}function qa(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function Za(e,t){var n,o,a=e.max_chain_length,i=e.strstart,s=e.prev_length,r=e.nice_match,l=e.strstart>e.w_size-Sa?e.strstart-(e.w_size-Sa):0,c=e.window,d=e.w_mask,u=e.prev,p=e.strstart+_a,h=c[i+s-1],m=c[i+s];e.prev_length>=e.good_match&&(a>>=2),r>e.lookahead&&(r=e.lookahead);do{if(c[(n=t)+s]===m&&c[n+s-1]===h&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<p);if(o=_a-(p-i),i=p-_a,o>s){if(e.match_start=t,s=o,o>=r)break;h=c[i+s-1],m=c[i+s]}}}while((t=u[t&d])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead}function Xa(e){var t,n,o,a,i,s,r,l,c,d,u=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=u+(u-Sa)){Kn(e.window,e.window,u,u,0),e.match_start-=u,e.strstart-=u,e.block_start-=u,t=n=e.hash_size;do{o=e.head[--t],e.head[t]=o>=u?o-u:0}while(--n);t=n=u;do{o=e.prev[--t],e.prev[t]=o>=u?o-u:0}while(--n);a+=u}if(0===e.strm.avail_in)break;if(s=e.strm,r=e.window,l=e.strstart+e.lookahead,c=a,d=void 0,(d=s.avail_in)>c&&(d=c),n=0===d?0:(s.avail_in-=d,Kn(r,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=ea(s.adler,r,d,l):2===s.state.wrap&&(s.adler=na(s.adler,r,d,l)),s.next_in+=d,s.total_in+=d,d),e.lookahead+=n,e.lookahead+e.insert>=Ta)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+Ta-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Ta)););}while(e.lookahead<Sa&&0!==e.strm.avail_in)}function Ja(e,t){for(var n,o;;){if(e.lookahead<Sa){if(Xa(e),e.lookahead<Sa&&t===aa)return xa;if(0===e.lookahead)break}if(n=0,e.lookahead>=Ta&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ta-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Sa&&(e.match_length=Za(e,n)),e.match_length>=Ta)if(o=Qo(e,e.strstart-e.match_start,e.match_length-Ta),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Ta){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ta-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else o=Qo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(Ka(e,!1),0===e.strm.avail_out))return xa}return e.insert=e.strstart<Ta-1?e.strstart:Ta-1,t===ra?(Ka(e,!0),0===e.strm.avail_out?Aa:Ga):e.last_lit&&(Ka(e,!1),0===e.strm.avail_out)?xa:Pa}function Qa(e,t){for(var n,o,a;;){if(e.lookahead<Sa){if(Xa(e),e.lookahead<Sa&&t===aa)return xa;if(0===e.lookahead)break}if(n=0,e.lookahead>=Ta&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ta-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Ta-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Sa&&(e.match_length=Za(e,n),e.match_length<=5&&(e.strategy===va||e.match_length===Ta&&e.strstart-e.match_start>4096)&&(e.match_length=Ta-1)),e.prev_length>=Ta&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-Ta,o=Qo(e,e.strstart-1-e.prev_match,e.prev_length-Ta),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ta-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=Ta-1,e.strstart++,o&&(Ka(e,!1),0===e.strm.avail_out))return xa}else if(e.match_available){if((o=Qo(e,0,e.window[e.strstart-1]))&&Ka(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return xa}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=Qo(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Ta-1?e.strstart:Ta-1,t===ra?(Ka(e,!0),0===e.strm.avail_out?Aa:Ga):e.last_lit&&(Ka(e,!1),0===e.strm.avail_out)?xa:Pa}function ei(e,t,n,o,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=o,this.func=a}function ti(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ya,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new qn(2*Ea),this.dyn_dtree=new qn(2*(2*ka+1)),this.bl_tree=new qn(2*(2*wa+1)),Fa(this.dyn_ltree),Fa(this.dyn_dtree),Fa(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new qn(Ca+1),this.heap=new qn(2*Ia+1),Fa(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new qn(2*Ia+1),Fa(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ni(e){var t,n=function(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Oa,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Ua:La,e.adler=2===t.wrap?0:1,t.last_flush=aa,qo(t),ca):$a(e,ua)}(e);return n===ca&&((t=e.state).window_size=2*t.w_size,Fa(t.head),t.max_lazy_match=oa[t.level].max_lazy,t.good_match=oa[t.level].good_length,t.nice_match=oa[t.level].nice_length,t.max_chain_length=oa[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Ta-1,t.match_available=0,t.ins_h=0),n}function oi(e,t){var n,o,a,i;if(!e||!e.state||t>la||t<0)return e?$a(e,ua):ua;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===Va&&t!==ra)return $a(e,0===e.avail_out?ha:ua);if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===Ua)if(2===o.wrap)e.adler=0,Wa(o,31),Wa(o,139),Wa(o,8),o.gzhead?(Wa(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Wa(o,255&o.gzhead.time),Wa(o,o.gzhead.time>>8&255),Wa(o,o.gzhead.time>>16&255),Wa(o,o.gzhead.time>>24&255),Wa(o,9===o.level?2:o.strategy>=fa||o.level<2?4:0),Wa(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(Wa(o,255&o.gzhead.extra.length),Wa(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=na(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=Ma):(Wa(o,0),Wa(o,0),Wa(o,0),Wa(o,0),Wa(o,0),Wa(o,9===o.level?2:o.strategy>=fa||o.level<2?4:0),Wa(o,Ha),o.status=La);else{var s=ya+(o.w_bits-8<<4)<<8;s|=(o.strategy>=fa||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(s|=Da),s+=31-s%31,o.status=La,qa(o,s),0!==o.strstart&&(qa(o,e.adler>>>16),qa(o,65535&e.adler)),e.adler=1}if(o.status===Ma)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(e.adler=na(e.adler,o.pending_buf,o.pending-a,a)),Ya(e),a=o.pending,o.pending!==o.pending_buf_size));)Wa(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(e.adler=na(e.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=Na)}else o.status=Na;if(o.status===Na)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=na(e.adler,o.pending_buf,o.pending-a,a)),Ya(e),a=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,Wa(o,i)}while(0!==i);o.gzhead.hcrc&&o.pending>a&&(e.adler=na(e.adler,o.pending_buf,o.pending-a,a)),0===i&&(o.gzindex=0,o.status=Ba)}else o.status=Ba;if(o.status===Ba)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=na(e.adler,o.pending_buf,o.pending-a,a)),Ya(e),a=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,Wa(o,i)}while(0!==i);o.gzhead.hcrc&&o.pending>a&&(e.adler=na(e.adler,o.pending_buf,o.pending-a,a)),0===i&&(o.status=Ra)}else o.status=Ra;if(o.status===Ra&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&Ya(e),o.pending+2<=o.pending_buf_size&&(Wa(o,255&e.adler),Wa(o,e.adler>>8&255),e.adler=0,o.status=La)):o.status=La),0!==o.pending){if(Ya(e),0===e.avail_out)return o.last_flush=-1,ca}else if(0===e.avail_in&&za(t)<=za(n)&&t!==ra)return $a(e,ha);if(o.status===Va&&0!==e.avail_in)return $a(e,ha);if(0!==e.avail_in||0!==o.lookahead||t!==aa&&o.status!==Va){var r=o.strategy===fa?function(e,t){for(var n;;){if(0===e.lookahead&&(Xa(e),0===e.lookahead)){if(t===aa)return xa;break}if(e.match_length=0,n=Qo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ka(e,!1),0===e.strm.avail_out))return xa}return e.insert=0,t===ra?(Ka(e,!0),0===e.strm.avail_out?Aa:Ga):e.last_lit&&(Ka(e,!1),0===e.strm.avail_out)?xa:Pa}(o,t):o.strategy===ga?function(e,t){for(var n,o,a,i,s=e.window;;){if(e.lookahead<=_a){if(Xa(e),e.lookahead<=_a&&t===aa)return xa;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=Ta&&e.strstart>0&&(o=s[a=e.strstart-1])===s[++a]&&o===s[++a]&&o===s[++a]){i=e.strstart+_a;do{}while(o===s[++a]&&o===s[++a]&&o===s[++a]&&o===s[++a]&&o===s[++a]&&o===s[++a]&&o===s[++a]&&o===s[++a]&&a<i);e.match_length=_a-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Ta?(n=Qo(e,1,e.match_length-Ta),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Qo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ka(e,!1),0===e.strm.avail_out))return xa}return e.insert=0,t===ra?(Ka(e,!0),0===e.strm.avail_out?Aa:Ga):e.last_lit&&(Ka(e,!1),0===e.strm.avail_out)?xa:Pa}(o,t):oa[o.level].func(o,t);if(r!==Aa&&r!==Ga||(o.status=Va),r===xa||r===Aa)return 0===e.avail_out&&(o.last_flush=-1),ca;if(r===Pa&&(t===ia?Xo(o):t!==la&&(Zo(o,0,0,!1),t===sa&&(Fa(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),Ya(e),0===e.avail_out))return o.last_flush=-1,ca}return t!==ra?ca:o.wrap<=0?da:(2===o.wrap?(Wa(o,255&e.adler),Wa(o,e.adler>>8&255),Wa(o,e.adler>>16&255),Wa(o,e.adler>>24&255),Wa(o,255&e.total_in),Wa(o,e.total_in>>8&255),Wa(o,e.total_in>>16&255),Wa(o,e.total_in>>24&255)):(qa(o,e.adler>>>16),qa(o,65535&e.adler)),Ya(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?ca:da)}oa=[new ei(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Xa(e),0===e.lookahead&&t===aa)return xa;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+n;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,Ka(e,!1),0===e.strm.avail_out))return xa;if(e.strstart-e.block_start>=e.w_size-Sa&&(Ka(e,!1),0===e.strm.avail_out))return xa}return e.insert=0,t===ra?(Ka(e,!0),0===e.strm.avail_out?Aa:Ga):(e.strstart>e.block_start&&(Ka(e,!1),e.strm.avail_out),xa)})),new ei(4,4,8,4,Ja),new ei(4,5,16,8,Ja),new ei(4,6,32,32,Ja),new ei(4,4,16,16,Qa),new ei(8,16,32,32,Qa),new ei(8,16,128,128,Qa),new ei(8,32,128,256,Qa),new ei(32,128,258,1024,Qa),new ei(32,258,258,4096,Qa)];var ai=30,ii=12;function si(e,t){var n,o,a,i,s,r,l,c,d,u,p,h,m,v,f,g,b,O,y,j,I,k,w,E,C;n=e.state,o=e.next_in,E=e.input,a=o+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),r=i+(e.avail_out-257),l=n.dmax,c=n.wsize,d=n.whave,u=n.wnext,p=n.window,h=n.hold,m=n.bits,v=n.lencode,f=n.distcode,g=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{m<15&&(h+=E[o++]<<m,m+=8,h+=E[o++]<<m,m+=8),O=v[h&g];t:for(;;){if(h>>>=y=O>>>24,m-=y,0===(y=O>>>16&255))C[i++]=65535&O;else{if(!(16&y)){if(0==(64&y)){O=v[(65535&O)+(h&(1<<y)-1)];continue t}if(32&y){n.mode=ii;break e}e.msg="invalid literal/length code",n.mode=ai;break e}j=65535&O,(y&=15)&&(m<y&&(h+=E[o++]<<m,m+=8),j+=h&(1<<y)-1,h>>>=y,m-=y),m<15&&(h+=E[o++]<<m,m+=8,h+=E[o++]<<m,m+=8),O=f[h&b];n:for(;;){if(h>>>=y=O>>>24,m-=y,!(16&(y=O>>>16&255))){if(0==(64&y)){O=f[(65535&O)+(h&(1<<y)-1)];continue n}e.msg="invalid distance code",n.mode=ai;break e}if(I=65535&O,m<(y&=15)&&(h+=E[o++]<<m,(m+=8)<y&&(h+=E[o++]<<m,m+=8)),(I+=h&(1<<y)-1)>l){e.msg="invalid distance too far back",n.mode=ai;break e}if(h>>>=y,m-=y,I>(y=i-s)){if((y=I-y)>d&&n.sane){e.msg="invalid distance too far back",n.mode=ai;break e}if(k=0,w=p,0===u){if(k+=c-y,y<j){j-=y;do{C[i++]=p[k++]}while(--y);k=i-I,w=C}}else if(u<y){if(k+=c+u-y,(y-=u)<j){j-=y;do{C[i++]=p[k++]}while(--y);if(k=0,u<j){j-=y=u;do{C[i++]=p[k++]}while(--y);k=i-I,w=C}}}else if(k+=u-y,y<j){j-=y;do{C[i++]=p[k++]}while(--y);k=i-I,w=C}for(;j>2;)C[i++]=w[k++],C[i++]=w[k++],C[i++]=w[k++],j-=3;j&&(C[i++]=w[k++],j>1&&(C[i++]=w[k++]))}else{k=i-I;do{C[i++]=C[k++],C[i++]=C[k++],C[i++]=C[k++],j-=3}while(j>2);j&&(C[i++]=C[k++],j>1&&(C[i++]=C[k++]))}break}}break}}while(o<a&&i<r);o-=j=m>>3,h&=(1<<(m-=j<<3))-1,e.next_in=o,e.next_out=i,e.avail_in=o<a?a-o+5:5-(o-a),e.avail_out=i<r?r-i+257:257-(i-r),n.hold=h,n.bits=m}var ri=15,li=852,ci=592,di=0,ui=1,pi=2,hi=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],mi=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],vi=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],fi=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function gi(e,t,n,o,a,i,s,r){var l,c,d,u,p,h,m,v,f,g=r.bits,b=0,O=0,y=0,j=0,I=0,k=0,w=0,E=0,C=0,T=0,_=null,S=0,D=new qn(ri+1),U=new qn(ri+1),M=null,N=0;for(b=0;b<=ri;b++)D[b]=0;for(O=0;O<o;O++)D[t[n+O]]++;for(I=g,j=ri;j>=1&&0===D[j];j--);if(I>j&&(I=j),0===j)return a[i++]=20971520,a[i++]=20971520,r.bits=1,0;for(y=1;y<j&&0===D[y];y++);for(I<y&&(I=y),E=1,b=1;b<=ri;b++)if(E<<=1,(E-=D[b])<0)return-1;if(E>0&&(e===di||1!==j))return-1;for(U[1]=0,b=1;b<ri;b++)U[b+1]=U[b]+D[b];for(O=0;O<o;O++)0!==t[n+O]&&(s[U[t[n+O]]++]=O);if(e===di?(_=M=s,h=19):e===ui?(_=hi,S-=257,M=mi,N-=257,h=256):(_=vi,M=fi,h=-1),T=0,O=0,b=y,p=i,k=I,w=0,d=-1,u=(C=1<<I)-1,e===ui&&C>li||e===pi&&C>ci)return 1;for(;;){m=b-w,s[O]<h?(v=0,f=s[O]):s[O]>h?(v=M[N+s[O]],f=_[S+s[O]]):(v=96,f=0),l=1<<b-w,y=c=1<<k;do{a[p+(T>>w)+(c-=l)]=m<<24|v<<16|f|0}while(0!==c);for(l=1<<b-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,O++,0==--D[b]){if(b===j)break;b=t[n+s[O]]}if(b>I&&(T&u)!==d){for(0===w&&(w=I),p+=y,E=1<<(k=b-w);k+w<j&&!((E-=D[k+w])<=0);)k++,E<<=1;if(C+=1<<k,e===ui&&C>li||e===pi&&C>ci)return 1;a[d=T&u]=I<<24|k<<16|p-i|0}}return 0!==T&&(a[p+T]=b-w<<24|64<<16|0),r.bits=I,0}var bi=0,Oi=1,yi=2,ji=4,Ii=5,ki=6,wi=0,Ei=1,Ci=2,Ti=-2,_i=-3,Si=-4,Di=-5,Ui=8,Mi=1,Ni=2,Bi=3,Ri=4,Li=5,Vi=6,xi=7,Pi=8,Ai=9,Gi=10,Hi=11,$i=12,zi=13,Fi=14,Yi=15,Ki=16,Wi=17,qi=18,Zi=19,Xi=20,Ji=21,Qi=22,es=23,ts=24,ns=25,os=26,as=27,is=28,ss=29,rs=30,ls=31,cs=32,ds=852,us=592;function ps(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function hs(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new qn(320),this.work=new qn(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ms(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Mi,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Zn(ds),t.distcode=t.distdyn=new Zn(us),t.sane=1,t.back=-1,wi):Ti}(e)):Ti}function vs(e,t){var n,o;return e?(o=new hs,e.state=o,o.window=null,(n=function(e,t){var n,o;return e&&e.state?(o=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ti:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=n,o.wbits=t,ms(e))):Ti}(e,t))!==wi&&(e.state=null),n):Ti}var fs,gs,bs=!0;function Os(e){if(bs){var t;for(fs=new Zn(512),gs=new Zn(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(gi(Oi,e.lens,0,288,fs,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;gi(yi,e.lens,0,32,gs,0,e.work,{bits:5}),bs=!1}e.lencode=fs,e.lenbits=9,e.distcode=gs,e.distbits=5}function ys(e,t){var n,o,a,i,s,r,l,c,d,u,p,h,m,v,f,g,b,O,y,j,I,k,w,E,C=0,T=new Wn(4),_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Ti;(n=e.state).mode===$i&&(n.mode=zi),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,o=e.input,r=e.avail_in,c=n.hold,d=n.bits,u=r,p=l,k=wi;e:for(;;)switch(n.mode){case Mi:if(0===n.wrap){n.mode=zi;break}for(;d<16;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(2&n.wrap&&35615===c){n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=na(n.check,T,2,0),c=0,d=0,n.mode=Ni;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=rs;break}if((15&c)!==Ui){e.msg="unknown compression method",n.mode=rs;break}if(d-=4,I=8+(15&(c>>>=4)),0===n.wbits)n.wbits=I;else if(I>n.wbits){e.msg="invalid window size",n.mode=rs;break}n.dmax=1<<I,e.adler=n.check=1,n.mode=512&c?Gi:$i,c=0,d=0;break;case Ni:for(;d<16;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(n.flags=c,(255&J()(n))!==Ui){e.msg="unknown compression method",n.mode=rs;break}if(57344&J()(n)){e.msg="unknown header flags set",n.mode=rs;break}n.head&&(n.head.text=c>>8&1),512&J()(n)&&(T[0]=255&c,T[1]=c>>>8&255,n.check=na(n.check,T,2,0)),c=0,d=0,n.mode=Bi;case Bi:for(;d<32;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}n.head&&(n.head.time=c),512&J()(n)&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=na(n.check,T,4,0)),c=0,d=0,n.mode=Ri;case Ri:for(;d<16;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&J()(n)&&(T[0]=255&c,T[1]=c>>>8&255,n.check=na(n.check,T,2,0)),c=0,d=0,n.mode=Li;case Li:if(1024&J()(n)){for(;d<16;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&J()(n)&&(T[0]=255&c,T[1]=c>>>8&255,n.check=na(n.check,T,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=Vi;case Vi:if(1024&J()(n)&&((h=n.length)>r&&(h=r),h&&(n.head&&(I=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Kn(n.head.extra,o,i,h,I)),512&J()(n)&&(n.check=na(n.check,o,h,i)),r-=h,i+=h,n.length-=h),n.length))break e;n.length=0,n.mode=xi;case xi:if(2048&J()(n)){if(0===r)break e;h=0;do{I=o[i+h++],n.head&&I&&n.length<65536&&(n.head.name+=String.fromCharCode(I))}while(I&&h<r);if(512&J()(n)&&(n.check=na(n.check,o,h,i)),r-=h,i+=h,I)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Pi;case Pi:if(4096&J()(n)){if(0===r)break e;h=0;do{I=o[i+h++],n.head&&I&&n.length<65536&&(n.head.comment+=String.fromCharCode(I))}while(I&&h<r);if(512&J()(n)&&(n.check=na(n.check,o,h,i)),r-=h,i+=h,I)break e}else n.head&&(n.head.comment=null);n.mode=Ai;case Ai:if(512&J()(n)){for(;d<16;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=rs;break}c=0,d=0}n.head&&(n.head.hcrc=J()(n)>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=$i;break;case Gi:for(;d<32;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}e.adler=n.check=ps(c),c=0,d=0,n.mode=Hi;case Hi:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=r,n.hold=c,n.bits=d,Ci;e.adler=n.check=1,n.mode=$i;case $i:if(t===Ii||t===ki)break e;case zi:if(n.last){c>>>=7&d,d-=7&d,n.mode=as;break}for(;d<3;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}switch(n.last=1&c,d-=1,3&(c>>>=1)){case 0:n.mode=Fi;break;case 1:if(Os(n),n.mode=Xi,t===ki){c>>>=2,d-=2;break e}break;case 2:n.mode=Wi;break;case 3:e.msg="invalid block type",n.mode=rs}c>>>=2,d-=2;break;case Fi:for(c>>>=7&d,d-=7&d;d<32;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=rs;break}if(n.length=65535&c,c=0,d=0,n.mode=Yi,t===ki)break e;case Yi:n.mode=Ki;case Ki:if(h=n.length){if(h>r&&(h=r),h>l&&(h=l),0===h)break e;Kn(a,o,i,h,s),r-=h,i+=h,l-=h,s+=h,n.length-=h;break}n.mode=$i;break;case Wi:for(;d<14;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=rs;break}n.have=0,n.mode=qi;case qi:for(;n.have<n.ncode;){for(;d<3;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}n.lens[_[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[_[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},k=gi(bi,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,k){e.msg="invalid code lengths set",n.mode=rs;break}n.have=0,n.mode=Zi;case Zi:for(;n.have<n.nlen+n.ndist;){for(;g=(C=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,b=65535&C,!((f=C>>>24)<=d);){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(b<16)c>>>=f,d-=f,n.lens[n.have++]=b;else{if(16===b){for(E=f+2;d<E;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(c>>>=f,d-=f,0===n.have){e.msg="invalid bit length repeat",n.mode=rs;break}I=n.lens[n.have-1],h=3+(3&c),c>>>=2,d-=2}else if(17===b){for(E=f+3;d<E;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}d-=f,I=0,h=3+(7&(c>>>=f)),c>>>=3,d-=3}else{for(E=f+7;d<E;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}d-=f,I=0,h=11+(127&(c>>>=f)),c>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=rs;break}for(;h--;)n.lens[n.have++]=I}}if(n.mode===rs)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=rs;break}if(n.lenbits=9,w={bits:n.lenbits},k=gi(Oi,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,k){e.msg="invalid literal/lengths set",n.mode=rs;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},k=gi(yi,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,k){e.msg="invalid distances set",n.mode=rs;break}if(n.mode=Xi,t===ki)break e;case Xi:n.mode=Ji;case Ji:if(r>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=r,n.hold=c,n.bits=d,si(e,p),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,o=e.input,r=e.avail_in,c=n.hold,d=n.bits,n.mode===$i&&(n.back=-1);break}for(n.back=0;g=(C=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,b=65535&C,!((f=C>>>24)<=d);){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(g&&0==(240&g)){for(O=f,y=g,j=b;g=(C=n.lencode[j+((c&(1<<O+y)-1)>>O)])>>>16&255,b=65535&C,!(O+(f=C>>>24)<=d);){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}c>>>=O,d-=O,n.back+=O}if(c>>>=f,d-=f,n.back+=f,n.length=b,0===g){n.mode=os;break}if(32&g){n.back=-1,n.mode=$i;break}if(64&g){e.msg="invalid literal/length code",n.mode=rs;break}n.extra=15&g,n.mode=Qi;case Qi:if(n.extra){for(E=n.extra;d<E;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=es;case es:for(;g=(C=n.distcode[c&(1<<n.distbits)-1])>>>16&255,b=65535&C,!((f=C>>>24)<=d);){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(0==(240&g)){for(O=f,y=g,j=b;g=(C=n.distcode[j+((c&(1<<O+y)-1)>>O)])>>>16&255,b=65535&C,!(O+(f=C>>>24)<=d);){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}c>>>=O,d-=O,n.back+=O}if(c>>>=f,d-=f,n.back+=f,64&g){e.msg="invalid distance code",n.mode=rs;break}n.offset=b,n.extra=15&g,n.mode=ts;case ts:if(n.extra){for(E=n.extra;d<E;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=rs;break}n.mode=ns;case ns:if(0===l)break e;if(h=p-l,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=rs;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),v=n.window}else v=a,m=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{a[s++]=v[m++]}while(--h);0===n.length&&(n.mode=Ji);break;case os:if(0===l)break e;a[s++]=n.length,l--,n.mode=Ji;break;case as:if(n.wrap){for(;d<32;){if(0===r)break e;r--,c|=o[i++]<<d,d+=8}if(p-=l,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=J()(n)?na(n.check,a,p,s-p):ea(n.check,a,p,s-p)),p=l,(J()(n)?c:ps(c))!==n.check){e.msg="incorrect data check",n.mode=rs;break}c=0,d=0}n.mode=is;case is:if(n.wrap&&J()(n)){for(;d<32;){if(0===r)break e;r--,c+=o[i++]<<d,d+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=rs;break}c=0,d=0}n.mode=ss;case ss:k=Ei;break e;case rs:k=_i;break e;case ls:return Si;case cs:default:return Ti}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=r,n.hold=c,n.bits=d,(n.wsize||p!==e.avail_out&&n.mode<rs&&(n.mode<as||t!==ji))&&function(e,t,n,o){var a,i=e.state;null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Wn(i.wsize)),o>=i.wsize?(Kn(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>o&&(a=o),Kn(i.window,t,n-o,a,i.wnext),(o-=a)?(Kn(i.window,t,n-o,o,0),i.wnext=o,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a)))}(e,e.output,e.next_out,p-e.avail_out),u-=e.avail_in,p-=e.avail_out,e.total_in+=u,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=J()(n)?na(n.check,a,p,e.next_out-p):ea(n.check,a,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===$i?128:0)+(n.mode===Xi||n.mode===Yi?256:0),(0===u&&0===p||t===ji)&&k===wi&&(k=Di),k}var js,Is=1,ks=7;function ws(e){if(e<Is||e>ks)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function Es(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}ws.prototype.init=function(e,t,n,o,a){var i;switch(this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=o,3!==this.mode&&4!==this.mode||(this.windowBits+=16),this.mode===ks&&(this.windowBits+=32),5!==this.mode&&6!==this.mode||(this.windowBits=-this.windowBits),this.strm=new Yn,this.mode){case Is:case 3:case 5:i=function(e,t,n,o,a,i){if(!e)return ua;var s=1;if(t===ma&&(t=6),o<0?(s=0,o=-o):o>15&&(s=2,o-=16),a<1||a>ja||n!==ya||o<8||o>15||t<0||t>9||i<0||i>ba)return $a(e,ua);8===o&&(o=9);var r=new ti;return e.state=r,r.strm=e,r.wrap=s,r.gzhead=null,r.w_bits=o,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=a+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+Ta-1)/Ta),r.window=new Wn(2*r.w_size),r.head=new qn(r.hash_size),r.prev=new qn(r.w_size),r.lit_bufsize=1<<a+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new Wn(r.pending_buf_size),r.d_buf=1*r.lit_bufsize,r.l_buf=3*r.lit_bufsize,r.level=t,r.strategy=i,r.method=n,ni(e)}(this.strm,this.level,8,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case ks:i=vs(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}0===i?(this.write_in_progress=!1,this.init_done=!0):this._error(i)},ws.prototype.params=function(){throw new Error("deflateParams Not supported")},ws.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(0===this.mode)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},ws.prototype.write=function(e,t,n,o,a,i,s){this._writeCheck(),this.write_in_progress=!0;var r=this;return ft((function(){r.write_in_progress=!1;var l=r._write(e,t,n,o,a,i,s);r.callback(l[0],l[1]),r.pending_close&&r.close()})),this},ws.prototype.writeSync=function(e,t,n,o,a,i,s){return this._writeCheck(),this._write(e,t,n,o,a,i,s)},ws.prototype._write=function(e,t,n,o,a,i,s){if(this.write_in_progress=!0,0!==e&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e)throw new Error("Invalid flush value");null==t&&(t=new ge(0),o=0,n=0),a._set?a.set=a._set:a.set=Es;var r,l=this.strm;switch(l.avail_in=o,l.input=t,l.next_in=n,l.avail_out=s,l.output=a,l.next_out=i,this.mode){case Is:case 3:case 5:r=oi(l,e);break;case ks:case 2:case 4:case 6:r=ys(l,e);break;default:throw new Error("Unknown mode "+this.mode)}return 1!==r&&0!==r&&this._error(r),this.write_in_progress=!1,[l.avail_in,l.avail_out]},ws.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===Is||3===this.mode||5===this.mode?function(e){var t;e&&e.state&&((t=e.state.status)!==Ua&&t!==Ma&&t!==Na&&t!==Ba&&t!==Ra&&t!==La&&t!==Va?$a(e,ua):(e.state=null,t===La&&$a(e,pa)))}(this.strm):function(e){if(!e||!e.state)return Ti;var t=e.state;t.window&&(t.window=null),e.state=null}(this.strm),this.mode=0)},ws.prototype.reset=function(){switch(this.mode){case Is:case 5:js=ni(this.strm);break;case 2:case 6:js=ms(this.strm)}0!==js&&this._error(js)},ws.prototype._error=function(e){this.onerror(Fn[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var Cs=ee()({NONE:0,DEFLATE:Is,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:ks,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:ws}),Ts={};x()(o=M()(Cs)).call(o,(function(e){Ts[e]=Cs[e]})),Ts.Z_MIN_WINDOWBITS=8,Ts.Z_MAX_WINDOWBITS=15,Ts.Z_DEFAULT_WINDOWBITS=15,Ts.Z_MIN_CHUNK=64,Ts.Z_MAX_CHUNK=1/0,Ts.Z_DEFAULT_CHUNK=16384,Ts.Z_MIN_MEMLEVEL=1,Ts.Z_MAX_MEMLEVEL=9,Ts.Z_DEFAULT_MEMLEVEL=8,Ts.Z_MIN_LEVEL=-1,Ts.Z_MAX_LEVEL=9,Ts.Z_DEFAULT_LEVEL=Ts.Z_DEFAULT_COMPRESSION;var _s={Z_OK:Ts.Z_OK,Z_STREAM_END:Ts.Z_STREAM_END,Z_NEED_DICT:Ts.Z_NEED_DICT,Z_ERRNO:Ts.Z_ERRNO,Z_STREAM_ERROR:Ts.Z_STREAM_ERROR,Z_DATA_ERROR:Ts.Z_DATA_ERROR,Z_MEM_ERROR:Ts.Z_MEM_ERROR,Z_BUF_ERROR:Ts.Z_BUF_ERROR,Z_VERSION_ERROR:Ts.Z_VERSION_ERROR};function Ss(e,t,n){var o=[],a=0;function i(){for(var t;null!==(t=e.read());)o.push(t),a+=t.length;e.once("readable",i)}function s(){var t=w()(ge).call(ge,o,a);o=[],n(null,t),e.close()}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",i),n(t)})),e.on("end",s),e.end(t),i()}function Ds(e,t){if("string"==typeof t&&(t=new ge(t)),!et(t))throw new TypeError("Not a string or buffer");var n=Ts.Z_FINISH;return e._processChunk(t,n)}function Us(e){if(!(this instanceof Us))return new Us(e);xs.call(this,e,Ts.DEFLATE)}function Ms(e){if(!(this instanceof Ms))return new Ms(e);xs.call(this,e,Ts.INFLATE)}function Ns(e){if(!(this instanceof Ns))return new Ns(e);xs.call(this,e,Ts.GZIP)}function Bs(e){if(!(this instanceof Bs))return new Bs(e);xs.call(this,e,Ts.GUNZIP)}function Rs(e){if(!(this instanceof Rs))return new Rs(e);xs.call(this,e,Ts.DEFLATERAW)}function Ls(e){if(!(this instanceof Ls))return new Ls(e);xs.call(this,e,Ts.INFLATERAW)}function Vs(e){if(!(this instanceof Vs))return new Vs(e);xs.call(this,e,Ts.UNZIP)}function xs(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||Ts.Z_DEFAULT_CHUNK,Gn.call(this,e),e.flush&&e.flush!==Ts.Z_NO_FLUSH&&e.flush!==Ts.Z_PARTIAL_FLUSH&&e.flush!==Ts.Z_SYNC_FLUSH&&e.flush!==Ts.Z_FULL_FLUSH&&e.flush!==Ts.Z_FINISH&&e.flush!==Ts.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||Ts.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<Ts.Z_MIN_CHUNK||e.chunkSize>Ts.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<Ts.Z_MIN_WINDOWBITS||e.windowBits>Ts.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<Ts.Z_MIN_LEVEL||e.level>Ts.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<Ts.Z_MIN_MEMLEVEL||e.memLevel>Ts.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=Ts.Z_FILTERED&&e.strategy!=Ts.Z_HUFFMAN_ONLY&&e.strategy!=Ts.Z_RLE&&e.strategy!=Ts.Z_FIXED&&e.strategy!=Ts.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!et(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new Ts.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(e,t){n._binding=null,n._hadError=!0;var o=new Error(e);o.errno=t,o.code=Ts.codes[t],n.emit("error",o)};var o=Ts.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var a=Ts.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(a=e.strategy),this._binding.init(e.windowBits||Ts.Z_DEFAULT_WINDOWBITS,o,e.memLevel||Ts.Z_DEFAULT_MEMLEVEL,a,e.dictionary),this._buffer=new ge(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=a,this.once("end",this.close)}x()(a=M()(_s)).call(a,(function(e){_s[_s[e]]=e})),Ut(xs,Gn),xs.prototype.params=function(e,t,n){if(e<Ts.Z_MIN_LEVEL||e>Ts.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=Ts.Z_FILTERED&&t!=Ts.Z_HUFFMAN_ONLY&&t!=Ts.Z_RLE&&t!=Ts.Z_FIXED&&t!=Ts.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var o=this;this.flush(Ts.Z_SYNC_FLUSH,(function(){o._binding.params(e,t),o._hadError||(o._level=e,o._strategy=t,n&&n())}))}else ft(n)},xs.prototype.reset=function(){return this._binding.reset()},xs.prototype._flush=function(e){this._transform(new ge(0),"",e)},xs.prototype.flush=function(e,t){var n=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=Ts.Z_FULL_FLUSH),n.ended)t&&ft(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var o=this;this.once("drain",(function(){o.flush(t)}))}else this._flushFlag=e,this.write(new ge(0),"",t)},xs.prototype.close=function(e){if(e&&ft(e),!this._closed){this._closed=!0,this._binding.close();var t=this;ft((function(){t.emit("close")}))}},xs.prototype._transform=function(e,t,n){var o,a=this._writableState,i=(a.ending||a.ended)&&(!e||a.length===e.length);if(null===!e&&!et(e))return n(new Error("invalid input"));i?o=Ts.Z_FINISH:(o=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||Ts.Z_NO_FLUSH)),this._processChunk(e,o,n)},xs.prototype._processChunk=function(e,t,n){var o=e&&e.length,a=this._chunkSize-this._offset,i=0,s=this,r="function"==typeof n;if(!r){var c,d=[],u=0;this.on("error",(function(e){c=e}));do{var p=this._binding.writeSync(t,e,i,o,this._buffer,this._offset,a)}while(!this._hadError&&v(p[0],p[1]));if(this._hadError)throw c;var h=w()(ge).call(ge,d,u);return this.close(),h}var m=this._binding.write(t,e,i,o,this._buffer,this._offset,a);function v(c,p){if(!s._hadError){var h=a-p;if(function(e,t){if(!e)throw new Error(t)}(h>=0,"have should not go down"),h>0){var m,f=l()(m=s._buffer).call(m,s._offset,s._offset+h);s._offset+=h,r?s.push(f):(d.push(f),u+=f.length)}if((0===p||s._offset>=s._chunkSize)&&(a=s._chunkSize,s._offset=0,s._buffer=new ge(s._chunkSize)),0===p){if(i+=o-c,o=c,!r)return!0;var g=s._binding.write(t,e,i,o,s._buffer,s._offset,s._chunkSize);return g.callback=v,void(g.buffer=e)}if(!r)return!1;n()}}m.buffer=e,m.callback=v},Ut(Us,xs),Ut(Ms,xs),Ut(Ns,xs),Ut(Bs,xs),Ut(Rs,xs),Ut(Ls,xs),Ut(Vs,xs);var Ps={codes:_s,createDeflate:function(e){return new Us(e)},createInflate:function(e){return new Ms(e)},createDeflateRaw:function(e){return new Rs(e)},createInflateRaw:function(e){return new Ls(e)},createGzip:function(e){return new Ns(e)},createGunzip:function(e){return new Bs(e)},createUnzip:function(e){return new Vs(e)},deflate:function(e,t,n){return"function"==typeof t&&(n=t,t={}),Ss(new Us(t),e,n)},deflateSync:function(e,t){return Ds(new Us(t),e)},gzip:function(e,t,n){return"function"==typeof t&&(n=t,t={}),Ss(new Ns(t),e,n)},gzipSync:function(e,t){return Ds(new Ns(t),e)},deflateRaw:function(e,t,n){return"function"==typeof t&&(n=t,t={}),Ss(new Rs(t),e,n)},deflateRawSync:function(e,t){return Ds(new Rs(t),e)},unzip:function(e,t,n){return"function"==typeof t&&(n=t,t={}),Ss(new Vs(t),e,n)},unzipSync:function(e,t){return Ds(new Vs(t),e)},inflate:function(e,t,n){return"function"==typeof t&&(n=t,t={}),Ss(new Ms(t),e,n)},inflateSync:function(e,t){return Ds(new Ms(t),e)},gunzip:function(e,t,n){return"function"==typeof t&&(n=t,t={}),Ss(new Bs(t),e,n)},gunzipSync:function(e,t){return Ds(new Bs(t),e)},inflateRaw:function(e,t,n){return"function"==typeof t&&(n=t,t={}),Ss(new Ls(t),e,n)},inflateRawSync:function(e,t){return Ds(new Ls(t),e)},Deflate:Us,Inflate:Ms,Gzip:Ns,Gunzip:Bs,DeflateRaw:Rs,InflateRaw:Ls,Unzip:Vs,Zlib:xs};t["a"]=class{constructor(e,t,n){this.SDKAPPID=e,this.EXPIRETIME=n,this.PRIVATEKEY=t}genTestUserSig(e){return this._isNumber(this.SDKAPPID)?this._isString(this.PRIVATEKEY)?this._isString(e)?this._isNumber(this.EXPIRETIME)?(console.log("sdkAppID="+this.SDKAPPID+" key="+this.PRIVATEKEY+" userID="+e+" expire="+this.EXPIRETIME),this.genSigWithUserbuf(e,this.EXPIRETIME,null)):(console.error("expireTime must be a number"),""):(console.error("userID must be a string"),""):(console.error("privateKey must be a string"),""):(console.error("sdkAppID must be a number"),"")}newBuffer(e,t){return ge.from?ge.from(e,t):new ge(e,t)}unescape(e){return e.replace(/_/g,"=").replace(/\-/g,"/").replace(/\*/g,"+")}escape(e){return e.replace(/\+/g,"*").replace(/\//g,"-").replace(/=/g,"_")}encode(e){return this.escape(this.newBuffer(e).toString("base64"))}decode(e){return this.newBuffer(this.unescape(e),"base64")}base64encode(e){return this.newBuffer(e).toString("base64")}base64decode(e){return this.newBuffer(e,"base64").toString()}_hmacsha256(e,t,n,o){let a="TLS.identifier:"+e+"\n";a+="TLS.sdkappid:"+this.SDKAPPID+"\n",a+="TLS.time:"+t+"\n",a+="TLS.expire:"+n+"\n",null!=o&&(a+="TLS.userbuf:"+o+"\n");let i=at.HmacSHA256(a,this.PRIVATEKEY);return at.enc.Base64.stringify(i)}_utc(){return Math.round(ne()()/1e3)}_isNumber(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"==typeof e&&e.constructor===Number)}_isString(e){return"string"==typeof e}genSigWithUserbuf(e,t,n){let o=this._utc(),a={"TLS.ver":"2.0","TLS.identifier":e,"TLS.sdkappid":this.SDKAPPID,"TLS.time":o,"TLS.expire":t},i="";if(null!=n){let s=this.base64encode(n);a["TLS.userbuf"]=s,i=this._hmacsha256(e,o,t,s)}else i=this._hmacsha256(e,o,t,null);a["TLS.sig"]=i;let s=L()(a),r=Ps.deflateSync(this.newBuffer(s)).toString("base64"),l=this.escape(r);return console.log("ret="+l),l}validate(e){let t=this.decode(e),n=Ps.inflateSync(t);console.log("validate ret="+n)}}}).call(this,n("c8ba"))},e32f:function(e){e.exports=JSON.parse('{"发起会话":"Start chat","发起单聊":"New one-to-one chat","发起群聊":"New group chat","该用户不存在":"The user does not exist","创建群聊，请注册 TUIGroup 模块":"To create a group chat, please register the TUIGroup module","创建成功":"Creation successful","发起多人会话（群聊）":"New group chat","群头像":"Group profile photo","群名称":"Group name","群ID":"Group ID","群类型":"Group type","选填":"Optional","取消":"Cancel","创建":"Create","类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见":"Similar to a WeChat group. Users can join the group only via invitation by existing members. The invitation does not need to be agreed by the invitee or approved by the group owner. See the documentation for details.","类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见":"Similar to a QQ group. After a public group is created, the group owner can designate group admins. To join the group, a user needs to search the group ID and send a request, which needs to be approved by the group owner or an admin before the user can join the group. See the documentation for details. ","创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见":"After the group is created, a user can join and quit the group freely and can view the messages sent before joining the group. It is suitable for scenarios that integrate Tencent Real-Time Communication (TRTC), such as audio and video conferences and online education. See the documentation for details.","创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见":"After a group is created, a user can join and quit the group freely. The group can have an unlimited number of members, but it does not store message history. It can be combined with Live Video Broadcasting (LVB) to support on-screen comment scenarios. See the documentation for details. ","产品文档":"product documentation","设置群名称":"Group name","请输入群名称":"Enter the group name","设置群ID":"Group ID","请输入群ID":"Enter the group ID","选择群类型":"Group type"}')},e435:function(e,t,n){e.exports=n.p+"img/downaload-image.ac16e1ec.png"},e4a3:function(e,t,n){"use strict";n("eed7")},e5cf:function(e,t,n){"use strict";n("bccb")},e68c:function(e){e.exports=JSON.parse('{"登录":"登录","登录当前账号":"登录当前账号","切换其他账号":"切换其他账号","我已阅读并同意":"我已阅读并同意","和":"和","隐私条例":"隐私条例","用户协议":"用户协议","免费体验":"免费体验","体验更多Demo":"体验更多Demo","访问官网":"访问官网","超10亿用户的信赖":"超10亿用户的信赖","一分钟":"一分钟","改2行代码，1分钟跑通demo":"改2行代码，1分钟跑通demo","每月服务客户数超过10000家":"每月服务客户数超过10000家","消息收发成功率":"消息收发成功率，服务可靠性高于99.99%","10亿":"10亿","每月活跃用户数超过10亿":"每月活跃用户数超过10亿","请输入手机号":"请输入手机号","请输入userID":"请输入userID","请输入正确的手机号":"请输入正确的手机号","请先勾选用户协议":"请先勾选用户协议","请输入验证码":"请输入验证码","获取验证码":"获取验证码","登录失败":"登录失败","验证码发送成功":"验证码发送成功","发送验证码失败":"验证码发送失败","Android":"Android","iOS":"iOS","小程序":"小程序","Windows":"Windows","Mac OS":"Mac OS","扫描二维码下载":"扫描二维码下载","微信扫码进入":"微信扫码进入","点击直接下载":"点击直接下载","更多客户端体验":"更多客户端体验","微信扫一扫，免费体验腾讯云 IM 小程序":"微信扫一扫，免费体验腾讯云 IM 小程序","或者截图至相册，切换微信扫一扫识别体验":"或者截图至相册，切换微信扫一扫识别体验"}')},ec3a:function(e,t,n){"use strict";n("31ad")},eea0:function(e,t,n){"use strict";n("5a98")},eed7:function(e,t,n){},f017:function(e){e.exports=JSON.parse('{"取消":"Cancel","完成":"Done","已选中":"Selected","人":"","保存":"Save","请输入userID":"Enter a user ID","确定":"submit","全选":"All","已在群聊中":"exists"}')},f022:function(e,t,n){},f712:function(e){e.exports=JSON.parse('{"欢迎使用":"Welcome","建议体验功能":"Recommended Demo Features","用UI组件快速集成":"Quick Integration with UI Components","创建项目":"Create a project","下载TUIKit组件":"Download the TUIKit component","引入TUIKit组件":"Import the TUIKit component","获取SDKAppID":"Obtain the SDKAppID, key, and userID","调用TUIKit组件":"Call the TUIKit component","启动项目":"Launch the project","发送您的第一条消息":"Send your first mess","首购低至1折":"Up to 90% off for first purchase","IM首购9percent折":"Up to 91% off for first purchase","续费9折起":"Up to 10% off for re-purchase","复购75%起":"Up to 25% off for re-purchase","立即选购":"Purchase now","体验更多Demo":"More demos","立即前往":"Try now","已完成":"Completed","待体验":"To try out","发送一条消息":"Send a message","撤回一条消息":"Recall a message","切换一次使用语言":"Change the language","发起一个多人会话":"Create a group chat","发起一个群聊":"New a group chat","开启一次群禁言":"Mute group members","解散一个群聊":"Disband a group","解散一个多人会话":"Disband a group","发起一次通话":"Make a call","修改一次我的昵称":"Edit a nick","我们为您默认提供了一位“示例好友”和一个“示例客服群”您不用额外添加好友和群聊就可完整体验腾讯云 IM 单聊、群聊的所有功能。":"We provide a Sample Friend and a Sample Customer Service Group by default, so that you can fully try out all the features of one-to-one chat and group chat of Tencent Cloud IM without adding additional friends or groups.","随时随地":"You can log in and try out anytime and anywhere.","男":"Male","女":"Female","用户ID":"user ID","个性签名":"Status","暂未设置":"Not set","出生年月":"Birthday","编辑资料":"Edit profile","关于腾讯云IM":"About Tencent Cloud IM","退出登录":"Log out","隐私条例":"Privacy Policy","用户协议":"User Agreement","免责声明":"Disclaimers","联系我们":"Contact us","注销账户":"Cancel account","SDK版本":"SDK version","注销后，您将无法使用当前账号，相关数据也将删除无法找回。 当前账号":"Instant Messaging (IM) is a test product provided by Tencent Cloud, and Tencent Cloud enjoys its copyright and ownership. It is for trying out features, but not for commercial use. To follow regulatory requirements of the authority, audio and video-based interactions performed via IM will be recorded and archived throughout the whole process. It is strictly prohibited to disseminate via IM any pornographic, abusive, violent, political and other noncompliant content.","IM-免责声明":"Im - Disclaimer","IM（“本产品”）是由腾讯云提供的一款测试产品，腾讯云享有本产品的著作权和所有权。本产品仅用于功能体验，不得用于任何商业用途。依据相关部门监管要求，严禁在使用中有任何色情、辱骂、暴恐、涉政等违法内容传播。":"Instant Messaging (IM) is a demo product provided by Tencent Cloud, and Tencent Cloud retains its copyright and ownership. This product is for trying out features, but not for commercial use. To follow regulatory requirements of the authority, audio and video-based interactions performed via IM will be recorded and archived throughout the whole process. It is strictly prohibited to disseminate any pornographic, abusive, violent, sensitive and other noncompliant content.","同意":"Agree","取消":"Cancel","注销":"Cancel","关闭":"close","开启":"open","关于腾讯云·通信":"About Tencent Cloud IM","消息":"message","通讯录":"contact","个人中心":"Profile","已读回执":"Read receipt","消息阅读状态":"Message read status","关闭阅读状态":"If disabled, the message read status is hidden for all your messages and for all the messages sent by memebers in a chat.","开启阅读状态":"If enabled, the message read status is displayed for all your messages and for all the messages sent by memebers in a chat.","显示在线状态":"Display online status","开启在线状态":"If enabled, the users\' online status will displayed in your session and contact list.","关闭在线状态":"If disabled, the users\' online status will not displayed in your session and contact list.","消息通知":"Message Notification"}')},f7a6:function(e,t,n){},f9db:function(e,t,n){},fa4f:function(e,t,n){},faef:function(e,t,n){},fcd0:function(e,t,n){"use strict";n.d(t,"b",(function(){return Jv})),n.d(t,"a",(function(){return Av}));var o=n("4573"),a=n.n(o),i=n("fa81"),s=n.n(i),r=n("14b1"),l=n.n(r),c=(n("14d9"),n("78b2")),d=n.n(c),u=n("e76e"),p=n.n(u),h=n("5b1a"),m=n.n(h),v=n("3818"),f=n.n(v),g=n("2b0b"),b=n.n(g),O=n("e4f0"),y=n.n(O),j=n("fc56"),I=n.n(j),k=n("4c43"),w=n.n(k),E=n("3393"),C=n.n(E),T=n("65b8"),_=n.n(T),S=n("c193");class D{destroyed(){}updateStore(e,t){}}var U=n("259d");class M extends D{constructor(e){var t;super(),this.currentStore={},this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIChat",{},d()(t=this.updateStore).call(t,this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){p()(this.currentStore,e),e.conversation.conversationID?e.conversation.conversationID&&e.conversation.conversationID!==t.conversation.conversationID&&this.render(e.conversation):this.currentStore.messageList=[]}render(e){const t=15;if(this.currentStore.isFirstRender=!0,this.currentStore.messageList=[],this.currentStore.readSet.clear(),this.getMessageList({conversationID:e.conversationID,count:t}),e.type===this.TUICore.TIM.TYPES.CONV_GROUP){var n,o,a;this.currentStore.userInfo.isGroup=!0;const t={groupID:e.groupProfile.groupID,userIDList:[e.groupProfile.selfInfo.userID]};this.getGroupProfile({groupID:e.groupProfile.groupID}),this.getGroupMemberProfile(t).then(e=>{const{memberList:t}=e.data,[n]=t;this.currentStore.selfInfo=n}),null===this||void 0===this||null===(n=this.TUICore)||void 0===n||null===(o=n.TUIServer)||void 0===o||null===(a=o.TUIGroup)||void 0===a||a.getGroupMemberList({groupID:e.groupProfile.groupID,count:100,offset:0}).then(e=>{var t;this.currentStore.allMemberList=null===(t=e.data)||void 0===t?void 0:t.memberList})}else this.currentStore.userInfo.isGroup=!1,this.currentStore.userInfo.list=[null===e||void 0===e?void 0:e.userProfile]}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_RECEIVED,this.handleMessageReceived,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_MODIFIED,this.handleMessageModified,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_REVOKED,this.handleMessageRevoked,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_READ_BY_PEER,this.handleMessageReadByPeer,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_READ_RECEIPT_RECEIVED,this.handleMessageReadReceiptReceived,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_RECEIVED,this.handleMessageReceived),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_MODIFIED,this.handleMessageModified),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_REVOKED,this.handleMessageRevoked),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_READ_BY_PEER,this.handleMessageReadByPeer),this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_READ_RECEIPT_RECEIVED,this.handleMessageReadReceiptReceived)}handleMessageReceived(e){var t;null===e||void 0===e||null===(t=e.data)||void 0===t||a()(t).call(t,e=>{var t,n;(null===e||void 0===e?void 0:e.conversationID)===(null===this||void 0===this||null===(t=this.store)||void 0===t||null===(n=t.conversation)||void 0===n?void 0:n.conversationID)&&(this.currentStore.messageList=[...this.currentStore.messageList,e]),S["c"].getInstance().notify(e)})}handleMessageModified(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleMessageRevoked(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleMessageReadByPeer(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleGroupListUpdated(e){var t;null===e||void 0===e||l()(t=e.data).call(t,e=>{var t,n,o;return(null===e||void 0===e?void 0:e.groupID)===(null===this||void 0===this||null===(t=this.store)||void 0===t||null===(n=t.conversation)||void 0===n||null===(o=n.groupProfile)||void 0===o?void 0:o.groupID)&&(this.store.conversation.groupProfile=e,this.currentStore.conversation={},this.currentStore.conversation=this.store.conversation),e})}handleMessageReadReceiptReceived(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleMessageOptions(e,t,n,o){var a,i,s,r,l,c;const d={to:"",conversationType:(null===o||void 0===o?void 0:o.type)||this.store.conversation.type,payload:e,needReadReceipt:this.currentStore.needReadReceipt};switch(this.currentStore.needTyping&&(d.cloudCustomData={messageFeature:{needTyping:1,version:1}},d.cloudCustomData=m()(d.cloudCustomData)),"file"===t&&n&&(d.onProgress=n),d.conversationType){case this.TUICore.TIM.TYPES.CONV_C2C:d.to=(null===o||void 0===o||null===(a=o.userProfile)||void 0===a?void 0:a.userID)||(null===(i=this.store.conversation)||void 0===i||null===(s=i.userProfile)||void 0===s?void 0:s.userID)||"";break;case this.TUICore.TIM.TYPES.CONV_GROUP:d.to=(null===o||void 0===o||null===(r=o.groupProfile)||void 0===r?void 0:r.groupID)||(null===(l=this.store.conversation)||void 0===l||null===(c=l.groupProfile)||void 0===c?void 0:c.groupID)||"";break;default:break}return d}handlePromiseCallback(e){return new f.a((t,n)=>{const o={TUIName:"TUIChat",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)})}handlePromiseCallbackRetry(e,t=[],n=function(){return!1}){return new f.a((o,a)=>{let i=0;function s(){i++,e().then(o).catch(e=>{i>t.length||n&&n(e)?a(e):b()(s,t[i-1])})}s()})}handleUploadProgress(e,t){var n;l()(n=this.currentStore.messageList).call(n,n=>(n.ID===t.ID&&(n.progress=e),n))}sendFaceMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=this.handleMessageOptions(e,"face"),a=this.TUICore.tim.createFaceMessage(n);this.currentStore.messageList.push(a);const i=await this.TUICore.tim.sendMessage(a);this.currentStore.messageList=l()(o=this.currentStore.messageList).call(o,e=>e.ID===i.data.message.ID?i.data.message:e),t(i)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendImageMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=this.handleMessageOptions({file:e},"file",e=>{this.handleUploadProgress(e,a)}),a=this.TUICore.tim.createImageMessage(n);a.progress=.01,this.currentStore.messageList.push(a);const i=await this.TUICore.tim.sendMessage(a);this.currentStore.messageList=l()(o=this.currentStore.messageList).call(o,e=>e.ID===i.data.message.ID?i.data.message:e),t(i)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendVideoMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=this.handleMessageOptions({file:e},"file",e=>{this.handleUploadProgress(e,a)}),a=this.TUICore.tim.createVideoMessage(n);a.progress=.01,this.currentStore.messageList.push(a);const i=await this.TUICore.tim.sendMessage(a);this.currentStore.messageList=l()(o=this.currentStore.messageList).call(o,e=>e.ID===i.data.message.ID?i.data.message:e),t(i)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendFileMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=this.handleMessageOptions({file:e},"file",e=>{this.handleUploadProgress(e,a)}),a=this.TUICore.tim.createFileMessage(n);a.progress=.01,this.currentStore.messageList.push(a);const i=await this.TUICore.tim.sendMessage(a);this.currentStore.messageList=l()(o=this.currentStore.messageList).call(o,e=>e.ID===i.data.message.ID?i.data.message:e),t(i)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendCustomMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;e.data=m()(e.data);const n=this.handleMessageOptions(e,"custom"),a=this.TUICore.tim.createCustomMessage(n);this.currentStore.messageList.push(a);const i=await this.TUICore.tim.sendMessage(a);this.currentStore.messageList=l()(o=this.currentStore.messageList).call(o,e=>e.ID===i.data.message.ID?i.data.message:e),t(i)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendLocationMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=this.handleMessageOptions(e,"location"),o=this.TUICore.tim.createLocationMessage(n);this.currentStore.messageList.push(o);const a=await this.TUICore.tim.sendMessage(o);t(a)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}forwardMessage(e,t){return this.handlePromiseCallback(async(n,o)=>{try{const o=this.handleMessageOptions(e,"forward",{},t),a=this.TUICore.tim.createForwardMessage(o),i=await this.TUICore.tim.sendMessage(a);this.store.conversation.conversationID===i.data.message.conversationID&&this.currentStore.messageList.push(i.data.message),n(i)}catch(a){o(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}async sendMessageReadReceipt(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.sendMessageReadReceipt(e);t(n)}catch(o){n(o)}})}async getMessageReadReceiptList(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getMessageReadReceiptList(e);t(n)}catch(o){n(o)}})}async getMessageList(e,t){return this.handlePromiseCallback(async(n,o)=>{try{const o=await this.TUICore.tim.getMessageList(e);o.data.messageList.length&&await this.getMessageReadReceiptList(o.data.messageList),this.currentStore.messageList=t?[...o.data.messageList,...this.currentStore.messageList]:o.data.messageList,this.currentStore.nextReqMessageID=o.data.nextReqMessageID,this.currentStore.isCompleted=o.data.isCompleted,n(o)}catch(a){o(a)}})}async getHistoryMessageList(){const e={conversationID:this.currentStore.conversation.conversationID,nextReqMessageID:this.currentStore.nextReqMessageID,count:15};this.currentStore.isCompleted||this.getMessageList(e,!0)}sendTextMessage(e,t){return this.handlePromiseCallback(async(n,o)=>{try{var a;const o=this.handleMessageOptions({text:e},"text");let i={};if(o.cloudCustomData)try{i=Object(U["a"])(o.cloudCustomData)}catch{i={}}const s=m()(t),r=p()(o,{cloudCustomData:s,...i}),c=this.TUICore.tim.createTextMessage(r);this.currentStore.messageList.push(c);const d=await this.TUICore.tim.sendMessage(c);this.currentStore.messageList=l()(a=this.currentStore.messageList).call(a,e=>e.ID===d.data.message.ID?d.data.message:e),n(d)}catch(i){o(i);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendTypingMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{e.data=m()(e.data);const n=this.handleMessageOptions(e,"custom"),o=this.TUICore.tim.createCustomMessage(n),a=await this.TUICore.tim.sendMessage(o,{onlineUserOnly:!0});t(a)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendTextAtMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=this.handleMessageOptions(e,"text"),a=this.TUICore.tim.createTextAtMessage(n);this.currentStore.messageList.push(a);const i=await this.TUICore.tim.sendMessage(a);this.currentStore.messageList=l()(o=this.currentStore.messageList).call(o,e=>e.ID===i.data.message.ID?i.data.message:e),t(i)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}sendMergerMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=this.handleMessageOptions(e,"merger"),a=this.TUICore.tim.createMergerMessage(n);this.currentStore.messageList.push(a);const i=await this.TUICore.tim.sendMessage(a);this.currentStore.messageList=l()(o=this.currentStore.messageList).call(o,e=>e.ID===i.data.message.ID?i.data.message:e),t(i)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}revokeMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=await this.TUICore.tim.revokeMessage(e),a=Object(U["a"])(null===e||void 0===e?void 0:e.cloudCustomData);null!==a&&void 0!==a&&null!==(o=a.messageReply)&&void 0!==o&&o.messageRootID&&await this.revokeReplyMessage(e),t(n)}catch(a){n(a);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}})}resendMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{var o;const n=await this.TUICore.tim.resendMessage(e);this.currentStore.messageList=y()(o=this.currentStore.messageList).call(o,t=>t.ID!==e.ID),this.currentStore.messageList.push(n.data.message),t(n)}catch(a){n(a)}})}deleteMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.deleteMessage(e);t(n);const o=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=o}catch(o){n(o)}})}modifyMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.modifyMessage(e);t(n)}catch(o){const e=null===o||void 0===o?void 0:o.code,t=null===o||void 0===o?void 0:o.data;2480===e?console.warn("MODIFY_MESSAGE_ERROR","修改消息发生冲突，data.message 是最新的消息","data.message:",null===t||void 0===t?void 0:t.message):2481===e?console.warn("MODIFY_MESSAGE_ERROR","不支持修改直播群消息"):20026===e&&console.warn("MODIFY_MESSAGE_ERROR","消息不存在"),n(o)}})}replyMessage(e,t){const n=()=>this.handlePromiseCallback(async(n,o)=>{try{var a,i,s,r;const o={messageAbstract:null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.text,messageSender:null===e||void 0===e?void 0:e.from,messageID:null===e||void 0===e?void 0:e.ID,messageType:null===e||void 0===e?void 0:e.type,messageTime:null===e||void 0===e?void 0:e.time,messageSequence:null===e||void 0===e?void 0:e.sequence,version:1};if(!t){var l,c,d;const n=Object(U["a"])(null===e||void 0===e?void 0:e.cloudCustomData),o=null===n||void 0===n||null===(l=n.messageReply)||void 0===l?void 0:l.messageRootID;t=await(null===this||void 0===this||null===(c=this.currentStore)||void 0===c||null===(d=c.messageList)||void 0===d?void 0:I()(d).call(d,e=>(null===e||void 0===e?void 0:e.ID)===o))||this.findMessage(o)}const p=null!==(i=t)&&void 0!==i&&i.cloudCustomData?Object(U["a"])(null===(s=t)||void 0===s?void 0:s.cloudCustomData):{messageReplies:{}};var u;if(null!==p&&void 0!==p&&null!==(r=p.messageReplies)&&void 0!==r&&r.replies)p.messageReplies.replies=[...null===p||void 0===p||null===(u=p.messageReplies)||void 0===u?void 0:u.replies,o];else p.messageReplies={replies:[o],version:1};t.cloudCustomData=m()(p);const h=this.modifyMessage(t);n(h)}catch(p){o(p)}}),o=function(e){return!e||2480!==(null===e||void 0===e?void 0:e.code)};return this.handlePromiseCallbackRetry(n,[500,1e3,3e3],o)}revokeReplyMessage(e,t){const n=()=>this.handlePromiseCallback(async(n,o)=>{try{var a,i,s;if(!t){var r,l,c;const n=Object(U["a"])(null===e||void 0===e?void 0:e.cloudCustomData),o=null===n||void 0===n||null===(r=n.messageReply)||void 0===r?void 0:r.messageRootID;t=await(null===this||void 0===this||null===(l=this.currentStore)||void 0===l||null===(c=l.messageList)||void 0===c?void 0:I()(c).call(c,e=>(null===e||void 0===e?void 0:e.ID)===o))||this.findMessage(o)}const o=null!==(a=t)&&void 0!==a&&a.cloudCustomData?Object(U["a"])(null===(i=t)||void 0===i?void 0:i.cloudCustomData):{messageReplies:{}};if(null!==o&&void 0!==o&&null!==(s=o.messageReplies)&&void 0!==s&&s.replies){var d,u,p;const t=w()(d=o.messageReplies.replies).call(d,t=>(null===t||void 0===t?void 0:t.messageID)===(null===e||void 0===e?void 0:e.ID));null===o||void 0===o||null===(u=o.messageReplies)||void 0===u||null===(p=u.replies)||void 0===p||C()(p).call(p,t,1)}t.cloudCustomData=m()(o);const h=this.modifyMessage(t);n(h)}catch(h){o(h)}}),o=function(e){return!e||2480!==(null===e||void 0===e?void 0:e.code)};return this.handlePromiseCallbackRetry(n,[500,1e3,3e3],o)}emojiReact(e,t){const n=()=>this.handlePromiseCallback(async(n,o)=>{try{var a,i,s,r,l,c,d,u,p,h,v,f;e&&null!==(a=e)&&void 0!==a&&a.ID&&t||o();const D=null===(i=this.TUICore)||void 0===i||null===(s=i.TUIServer)||void 0===s||null===(r=s.TUIProfile)||void 0===r||null===(l=r.store)||void 0===l||null===(c=l.profile)||void 0===c?void 0:c.userID;e=await(null===this||void 0===this||null===(d=this.currentStore)||void 0===d||null===(u=d.messageList)||void 0===u?void 0:I()(u).call(u,t=>{var n;return(null===t||void 0===t?void 0:t.ID)===(null===(n=e)||void 0===n?void 0:n.ID)}))||this.findMessage(null===(p=e)||void 0===p?void 0:p.ID);const M=null!==(h=e)&&void 0!==h&&h.cloudCustomData?Object(U["a"])(null===(v=e)||void 0===v?void 0:v.cloudCustomData):{messageReact:{}};var g;if(null!==M&&void 0!==M&&null!==(f=M.messageReact)&&void 0!==f&&f.reacts)if(null!==M&&void 0!==M&&null!==(g=M.messageReact)&&void 0!==g&&g.reacts[t]){var b,O;const e=null===M||void 0===M||null===(b=M.messageReact)||void 0===b||null===(O=b.reacts[t])||void 0===O?void 0:_()(O).call(O,D);var y,j,k,w,E,T,S;if(-1===e)null===M||void 0===M||null===(y=M.messageReact)||void 0===y||null===(j=y.reacts[t])||void 0===j||j.push(D);else if(null===M||void 0===M||null===(k=M.messageReact)||void 0===k||null===(w=k.reacts[t])||void 0===w||C()(w).call(w,e,1),0===(null===M||void 0===M||null===(E=M.messageReact)||void 0===E||null===(T=E.reacts[t])||void 0===T?void 0:T.length))null===M||void 0===M||(null===(S=M.messageReact)||void 0===S||delete S.reacts[t])}else M.messageReact.reacts[t]=[D];else M.messageReact={reacts:{},version:1},M.messageReact.reacts[t]=[D];e.cloudCustomData=m()(M);const N=this.modifyMessage(e);n(N)}catch(D){o(D)}}),o=function(e){return!e||2480!==(null===e||void 0===e?void 0:e.code)};return this.handlePromiseCallbackRetry(n,[500,1e3,3e3],o)}findMessage(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.findMessage(e);t(n)}catch(o){n(o)}})}getGroupProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupProfile(e);this.currentStore.conversation.groupProfile=n.data.group,t(n)}catch(o){n(o)}})}getGroupMemberProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupMemberProfile(e);t(n)}catch(o){n(o)}})}handleGroupApplication(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.handleGroupApplication(e);t(n)}catch(o){n(o)}})}async getUserProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}})}async getFriendList(){return this.handlePromiseCallback(async(e,t)=>{try{const t=await this.TUICore.tim.getFriendList();e(t)}catch(n){t(n)}})}async checkFriend(e,t){return this.handlePromiseCallback(async(n,o)=>{try{var a,i;const o=await this.TUICore.tim.checkFriend({userIDList:[e],type:t}),s=null===o||void 0===o||null===(a=o.data)||void 0===a||null===(i=a.successUserIDList[0])||void 0===i?void 0:i.relation;n(s)}catch(s){o(s)}})}async getGroupReadMemberList(e,t="",n=15){return this.handlePromiseCallback(async(o,a)=>{try{const a=await this.TUICore.tim.getGroupMessageReadMemberList({message:e,filter:0,cursor:t,count:n});o(a)}catch(i){a(i)}})}async getGroupUnreadMemberList(e,t="",n=15){return this.handlePromiseCallback(async(o,a)=>{try{const a=await this.TUICore.tim.getGroupMessageReadMemberList({message:e,filter:1,cursor:t,count:n});o(a)}catch(i){a(i)}})}async handleMessageSentByMeToView(e){var t,n;(null===e||void 0===e?void 0:e.conversationID)===(null===this||void 0===this||null===(t=this.store)||void 0===t||null===(n=t.conversation)||void 0===n?void 0:n.conversationID)&&this.currentStore.messageList.push(e)}bind(e){return this.currentStore=e}}var N=n("7a23");const B=e=>(Object(N["pushScopeId"])("data-v-3ea6462e"),e=e(),Object(N["popScopeId"])(),e),R={class:"TUIChat-header"},L={class:"setting"},V={class:"TUIChat-main"},x={class:"TUIChat-safe-tips"},P=["id"],A=B(()=>Object(N["createElementVNode"])("i",{class:"icon icon-bottom-double"},null,-1)),G={class:"to-bottom-tip-cont"},H={key:0,class:"dialog dialog-conversation"},$=["src"],z={class:"name"},F=["src"],Y={key:0,class:"name"},K={class:"dialog dialog-conversation"},W={class:"func",id:"func"},q={class:"func-main"},Z={class:"mask-main"},X=B(()=>Object(N["createElementVNode"])("i",null,null,-1)),J={key:1,class:"TUIChat"},Q={class:"TUIChat-header"};function ee(e,t,n,o,a,i){var s;const r=Object(N["resolveComponent"])("TypingHeader"),l=Object(N["resolveComponent"])("Manage"),c=Object(N["resolveComponent"])("Replies"),d=Object(N["resolveComponent"])("MessageTimestamp"),u=Object(N["resolveComponent"])("MessageItem"),p=Object(N["resolveComponent"])("ReadReceiptDialog"),h=Object(N["resolveComponent"])("imagePreviewer"),m=Object(N["resolveComponent"])("MessageInput"),v=Object(N["resolveComponent"])("MessageSystem");return"chat"===e.conversationType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["TUIChat",[e.env.isH5?"TUIChat-H5":""]])},[Object(N["createElementVNode"])("header",R,[e.env.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.back&&e.back(...t))})):Object(N["createCommentVNode"])("",!0),Object(N["createVNode"])(r,{needTyping:e.needTyping,conversation:e.conversation,messageList:e.messageList,ref:"typingRef"},null,8,["needTyping","conversation","messageList"]),Object(N["createElementVNode"])("aside",L,[e.conversation.groupProfile?(Object(N["openBlock"])(),Object(N["createBlock"])(l,{key:0,conversation:e.conversation,userInfo:e.userInfo,isH5:e.env.isH5},null,8,["conversation","userInfo","isH5"])):Object(N["createCommentVNode"])("",!0),Object(N["createVNode"])(c,{message:e.currentMessage,conversation:e.conversation,show:e.repliesDialogStatus,isH5:e.env.isH5,messageList:e.messageList,onCloseDialog:e.closeDialog,ref:"repliesDialog"},null,8,["message","conversation","show","isH5","messageList","onCloseDialog"])])]),Object(N["createElementVNode"])("div",V,[Object(N["createElementVNode"])("div",x,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.安全提示")),1),Object(N["createElementVNode"])("a",{onClick:t[1]||(t[1]=t=>e.openLink(e.Link.complaint))},Object(N["toDisplayString"])(e.$t("TUIChat.点此投诉")),1)]),Object(N["createElementVNode"])("ul",{class:"TUI-message-list",onClick:t[4]||(t[4]=t=>e.dialogID=""),ref:"messageEle",id:"messageEle"},[e.isCompleted?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",{key:0,class:"message-more",onClick:t[2]||(t[2]=(...t)=>e.getHistoryMessageList&&e.getHistoryMessageList(...t))},Object(N["toDisplayString"])(e.$t("TUIChat.查看更多")),1)),(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.messages,(t,n)=>{var o;return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:n,id:null===t||void 0===t?void 0:t.ID,ref_for:!0,ref:"messageAimID"},[Object(N["createVNode"])(d,{currTime:null===t||void 0===t?void 0:t.time,prevTime:n>0?null===(o=e.messages[n-1])||void 0===o?void 0:o.time:0},null,8,["currTime","prevTime"]),Object(N["createVNode"])(u,{message:t,env:e.env,types:e.types,displayGroupMessageReadReceipt:e.needGroupReceipt,displayEmojiReactions:e.isNeedEmojiReact,messageList:e.messages,onHandleEditor:e.handleEditor,onShowDialog:e.showDialog,onUploading:e.handleUploadingImageOrVideo,onJumpID:e.jumpID,onResendMessage:e.resendMessage},null,8,["message","env","types","displayGroupMessageReadReceipt","displayEmojiReactions","messageList","onHandleEditor","onShowDialog","onUploading","onJumpID","onResendMessage"])],8,P)}),128)),e.needToBottom?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:1,class:"to-bottom-tip",onClick:t[3]||(t[3]=t=>e.scrollToTarget("bottom"))},[A,Object(N["createElementVNode"])("div",G,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.toBottomTipCont),1)])])):Object(N["createCommentVNode"])("",!0)],512),e.forwardStatus&&e.messageComponents.Forward?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",H,[(Object(N["openBlock"])(),Object(N["createBlock"])(Object(N["resolveDynamicComponent"])("Forward"),{list:e.conversationData.list,message:e.currentMessage,show:e.forwardStatus,isH5:e.env.isH5,"onUpdate:show":t[5]||(t[5]=t=>e.forwardStatus=t)},{left:Object(N["withCtx"])(({data:t})=>[Object(N["createElementVNode"])("img",{class:"avatar",src:e.conversationData.handleAvatar(t)},null,8,$),Object(N["createElementVNode"])("label",z,Object(N["toDisplayString"])(e.conversationData.handleName(t)),1)]),right:Object(N["withCtx"])(({data:t})=>[Object(N["createElementVNode"])("img",{class:"avatar",src:e.conversationData.handleAvatar(t)},null,8,F),e.env.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("label",Y,Object(N["toDisplayString"])(e.conversationData.handleName(t)),1))]),_:1},40,["list","message","show","isH5"]))])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("div",K,[Object(N["createVNode"])(p,{message:e.currentMessage,conversation:e.conversation,show:e.receiptDialogStatus,isH5:e.env.isH5,onCloseDialog:e.closeDialog,ref:"readReceiptDialog"},null,8,["message","conversation","show","isH5","onCloseDialog"])]),e.showImagePreview?(Object(N["openBlock"])(),Object(N["createBlock"])(h,{key:1,currentImage:e.currentImagePreview,imageList:e.imageList,onClose:t[6]||(t[6]=t=>e.showImagePreview=!1)},null,8,["currentImage","imageList"])):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["TUIChat-footer",[e.isMute&&"disabled",e.env.isH5&&"TUIChat-H5-footer"]])},[Object(N["createElementVNode"])("div",W,[Object(N["createElementVNode"])("main",q,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.pluginComponentList,(t,n)=>(Object(N["openBlock"])(),Object(N["createBlock"])(Object(N["resolveDynamicComponent"])(t),{key:n,isMute:e.isMute,isH5:e.env.isH5,conversation:e.conversation,parentID:"func",onSend:e.handleSend},null,40,["isMute","isH5","conversation","onSend"]))),128))])]),Object(N["createVNode"])(m,{ref:"messageInput",conversation:e.conversation,memberList:e.allMemberList,env:e.env,isGroup:null===(s=e.userInfo)||void 0===s?void 0:s.isGroup,replyOrReference:e.reference,isMute:e.isMute,muteText:e.muteText,placeholder:e.$t("TUIChat.请输入消息"),onSendMessage:e.reportMessageSend,onResetReplyOrReference:e.resetReplyOrReference,onOnTyping:e.handleTyping},null,8,["conversation","memberList","env","isGroup","replyOrReference","isMute","muteText","placeholder","onSendMessage","onResetReplyOrReference","onOnTyping"])],2),Object(N["withDirectives"])(Object(N["createElementVNode"])("div",{class:"mask",onClick:t[9]||(t[9]=t=>e.showResend=!1)},[Object(N["createElementVNode"])("div",Z,[Object(N["createElementVNode"])("header",null,Object(N["toDisplayString"])(e.$t("TUIChat.确认重发该消息？")),1),Object(N["createElementVNode"])("footer",null,[Object(N["createElementVNode"])("p",{onClick:t[7]||(t[7]=t=>e.showResend=!1)},Object(N["toDisplayString"])(e.$t("TUIChat.取消")),1),X,Object(N["createElementVNode"])("p",{onClick:t[8]||(t[8]=(...t)=>e.submit&&e.submit(...t))},Object(N["toDisplayString"])(e.$t("TUIChat.确定")),1)])])],512),[[N["vShow"],e.showResend]])],2)):"system"===e.conversationType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",J,[Object(N["createElementVNode"])("header",Q,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.conversationName),1)]),Object(N["createVNode"])(v,{data:e.messages,types:e.types,onApplication:e.handleApplication},null,8,["data","types","onApplication"])])):e.slotDefault?Object(N["renderSlot"])(e.$slots,"default",{key:2},void 0,!0):Object(N["createCommentVNode"])("",!0)}var te=n("045d"),ne=n.n(te);const oe={key:0,class:"text-box"},ae=["src"];function ie(e,t,n,o,a,i){return Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.data.text,(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],{key:t},["text"===e.name?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",oe,Object(N["toDisplayString"])(e.text),1)):"img"===e.name?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:1,class:"text-img",src:e.src},null,8,ae)):Object(N["createCommentVNode"])("",!0)],64))),128)}var se=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({data:{}});return Object(N["watchEffect"])(()=>{n.data=e.data}),{...Object(N["toRefs"])(n)}}}),re=(n("5643"),n("6b0d")),le=n.n(re);const ce=le()(se,[["render",ie],["__scopeId","data-v-1a816165"]]);var de=ce,ue=n("622e"),pe=n.n(ue),he=n("e435"),me=n.n(he);const ve=e=>(Object(N["pushScopeId"])("data-v-1c5814c4"),e=e(),Object(N["popScopeId"])(),e),fe=["src","width","height"],ge={key:0,class:"progress"},be=["value"],Oe={key:0},ye=["src"],je={key:0,class:"dialog-box-h5-footer"},Ie=ve(()=>Object(N["createElementVNode"])("img",{src:pe.a},null,-1)),ke=[Ie],we=ve(()=>Object(N["createElementVNode"])("img",{src:me.a},null,-1)),Ee=[we];function Ce(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:"message-image",onClick:t[6]||(t[6]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["self"])),ref:"skeleton"},[Object(N["createElementVNode"])("img",{class:"message-img",src:e.data.url,width:e.data.width,height:e.data.height,style:Object(N["normalizeStyle"])(e.isH5?{maxWidth:e.data.width?e.data.width+"px":"calc(100vw - 180px)",maxHeight:e.data.height?e.data.height+"px":"calc(100vw - 180px)"}:{})},null,12,fe),e.data.progress?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",ge,[Object(N["createElementVNode"])("progress",{value:e.data.progress,max:"1"},null,8,be)])):Object(N["createCommentVNode"])("",!0),e.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:1,class:"dialog",onClick:t[5]||(t[5]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["self"]))},[e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",Oe,[Object(N["createElementVNode"])("i",{class:"icon icon-close",onClick:t[0]||(t[0]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["stop"]))})])),Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["dialog-box",[e.isH5?"dialog-box-h5":""]]),onClick:t[4]||(t[4]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["self"]))},[Object(N["createElementVNode"])("img",{class:Object(N["normalizeClass"])([e.isWidth?"isWidth":"isHeight"]),src:e.data.message.payload.imageInfoArray[0].url,onClick:t[1]||(t[1]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["self"]))},null,10,ye),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",je,[Object(N["createElementVNode"])("p",{onClick:t[2]||(t[2]=(...t)=>e.toggleShow&&e.toggleShow(...t))},ke),Object(N["createElementVNode"])("p",{onClick:t[3]||(t[3]=Object(N["withModifiers"])(t=>e.downloadImage(e.data.message),["stop"]))},Ee)])):Object(N["createCommentVNode"])("",!0)],2)])):Object(N["createCommentVNode"])("",!0)],512)}var Te=n("05f2"),_e=n.n(Te),Se=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},emits:["uploading","previewImage"],setup(e,t){const n=Object(N["reactive"])({data:{progress:0},show:!1}),o=Object(N["ref"])(),a=Object(N["computed"])(()=>{var e,t,o;const{width:a=0,height:i=0}=null===(e=n.data)||void 0===e||null===(t=e.message)||void 0===t||null===(o=t.payload)||void 0===o?void 0:o.imageInfoArray[0];return a>=i});Object(N["watchEffect"])(()=>{n.data=e.data,n.data&&Object(N["nextTick"])(()=>{if(n.data.progress)t.emit("uploading");else{var a,i,s;const{width:t=0,height:r=0}=n.data;if(0===t||0===r)return;const l=(null===(a=document.getElementById("app"))||void 0===a?void 0:a.clientWidth)||0,c=e.isH5?Math.min(l-180,300):300,d=Object(U["q"])(t,r,c,c);(null===o||void 0===o||null===(i=o.value)||void 0===i?void 0:i.style)&&(o.value.style.width=d.width+"px"),(null===o||void 0===o||null===(s=o.value)||void 0===s?void 0:s.style)&&(o.value.style.height=d.height+"px")}})});const i=()=>{n.data.progress||t.emit("previewImage",n.data.message)},s=e=>{const t=document.createElement("a"),n=e.payload.imageInfoArray[0].instanceID;t.setAttribute("download",n);const o=new Image;o.src=e.payload.imageInfoArray[0].url,o.setAttribute("crossOrigin","Anonymous"),o.onload=()=>{t.href=r(o),t.click()}},r=e=>{var t;const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const o=n.getContext("2d");null===o||void 0===o||o.drawImage(e,0,0,e.width,e.height);const a=e.src.substring(_e()(t=e.src).call(t,".")+1).toLowerCase();return n.toDataURL("image/"+a,1)};return{...Object(N["toRefs"])(n),toggleShow:i,skeleton:o,isWidth:a,downloadImage:s}}});n("14a4");const De=le()(Se,[["render",Ce],["__scopeId","data-v-1c5814c4"]]);var Ue=De;const Me={class:"message-video"},Ne=["src"],Be=["src","poster"],Re=["src","poster"],Le={key:3,class:"progress"},Ve=["value"],xe=["src"];function Pe(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Me,[Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["message-video-box",[!e.data.progress&&"success"===e.data.message.status&&e.isH5&&"message-video-cover"]]),onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t)),ref:"skeleton"},[e.data.progress&&e.poster||e.isH5&&e.poster?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:0,class:Object(N["normalizeClass"])(["message-img",[e.isWidth?"isWidth":"isHeight"]]),src:e.poster},null,10,Ne)):e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("video",{key:1,class:"message-img video-h5-uploading",src:e.data.url+"#t=0.1",poster:e.data.url,preload:"auto",muted:"",ref:"video"},null,8,Be)):e.data.progress||e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("video",{key:2,class:"message-img video-web",src:e.data.url,controls:"",preload:"metadata",poster:e.poster,ref:"video"},null,8,Re)),e.data.progress?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Le,[Object(N["createElementVNode"])("progress",{value:e.data.progress,max:"1"},null,8,Ve)])):Object(N["createCommentVNode"])("",!0)],2),e.show&&e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:"dialog-video",onClick:t[3]||(t[3]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["self"]))},[Object(N["createElementVNode"])("header",null,[Object(N["createElementVNode"])("i",{class:"icon icon-close",onClick:t[1]||(t[1]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["stop"]))})]),Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["dialog-video-box",[e.isH5?"dialog-video-h5":""]]),onClick:t[2]||(t[2]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["self"]))},[Object(N["createElementVNode"])("video",{class:Object(N["normalizeClass"])([e.isWidth?"isWidth":"isHeight"]),src:e.data.url,controls:"",autoplay:""},null,10,xe)],2)])):Object(N["createCommentVNode"])("",!0)])}var Ae=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},setup(e,t){const n=Object(N["reactive"])({data:{},show:!1,poster:"",posterWidth:0,posterHeight:0}),o=Object(N["ref"])(),a=Object(N["ref"])(),i=Object(N["computed"])(()=>{var e,t;const{snapshotWidth:o=0,snapshotHeight:a=0}=null===(e=n.data)||void 0===e||null===(t=e.message)||void 0===t?void 0:t.payload;return o>=a}),s="https://web.sdk.qcloud.com/im/assets/images/transparent.png",r=()=>{n.data.progress||(n.show=!n.show)},l=e=>new f.a((function(t,o){let a="",i=document.createElement("video");i.setAttribute("crossOrigin","anonymous"),i.setAttribute("src",e),i.setAttribute("preload","auto"),i.addEventListener("loadeddata",(function(){let e=document.createElement("canvas"),o=i.videoWidth,s=i.videoHeight;e.width=o,e.height=s,e.getContext("2d").drawImage(i,0,0,o,s),a=e.toDataURL("image/jpeg"),n.posterWidth=o,n.posterHeight=s,t(a)}),{once:!0})})),c=async e=>{return e?e.progress?await l(e.url):e.snapshotUrl!==s&&e.snapshotUrl||(null===e||void 0===e||null===(t=e.message)||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.snapshotUrl)!==s&&(null===e||void 0===e||null===(o=e.message)||void 0===o||null===(a=o.payload)||void 0===a?void 0:a.snapshotUrl)||(null===e||void 0===e||null===(i=e.message)||void 0===i||null===(r=i.payload)||void 0===r?void 0:r.thumbUrl)!==s&&(null===e||void 0===e||null===(c=e.message)||void 0===c||null===(d=c.payload)||void 0===d?void 0:d.thumbUrl)||await l(e.url):"";var t,n,o,a,i,r,c,d};return Object(N["watchEffect"])(async()=>{n.data=e.data,n.data&&(n.poster=await c(n.data),Object(N["nextTick"])(async()=>{var i;const r=(null===(i=document.getElementById("messageEle"))||void 0===i?void 0:i.clientWidth)||0,l=e.isH5?Math.min(r-172,300):300;let c;if(n.data.progress)t.emit("uploading");else{var d,u;let{snapshotWidth:t=0,snapshotHeight:i=0,snapshotUrl:r}=n.data;if(0===t||0===i)return;var p,h;if(r===s&&(t=n.posterWidth,i=n.posterHeight),c=Object(U["q"])(t,i,l,l),(null===o||void 0===o||null===(d=o.value)||void 0===d?void 0:d.style)&&(o.value.style.width=c.width+"px"),(null===o||void 0===o||null===(u=o.value)||void 0===u?void 0:u.style)&&(o.value.style.height=c.height+"px"),!e.isH5)(null===a||void 0===a||null===(p=a.value)||void 0===p?void 0:p.style)&&(a.value.style.width=c.width+"px"),(null===a||void 0===a||null===(h=a.value)||void 0===h?void 0:h.style)&&(a.value.style.height=c.height+"px")}}))}),Object(N["watch"])(()=>{var e;return null===(e=n.data)||void 0===e?void 0:e.progress},(e,n)=>{!e&&n&&t.emit("uploading")}),{...Object(N["toRefs"])(n),toggleShow:r,isWidth:i,getVideoBase64:l,handlePosterUrl:c,skeleton:o,video:a}}});n("9be5");const Ge=le()(Ae,[["render",Pe],["__scopeId","data-v-22afdb32"]]);var He=Ge;const $e=["src"];function ze(e,t,n,o,a,i){var s;return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["message-audio",["out"===e.data.message.flow&&"reserve"]]),onClick:t[0]||(t[0]=Object(N["withModifiers"])((...t)=>e.play&&e.play(...t),["stop"])),style:Object(N["normalizeStyle"])(`width: ${10*(null===(s=e.data)||void 0===s?void 0:s.second)+40}px`)},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon icon-voice",["out"===e.data.message.flow&&"icon-reserve"]])},null,2),Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.data.second)+"s",1),Object(N["createElementVNode"])("audio",{ref:"audio",src:e.data.url},null,8,$e)],6)}var Fe=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({data:{},show:!1}),o=Object(N["ref"])(null);Object(N["watch"])(()=>e.data,()=>{n.data=e.data},{deep:!0,immediate:!0});const a=()=>{const e=document.getElementsByTagName("audio");for(const n of e)n.paused||(n.pause(),n.load());const t=o.value;t.paused?(t.play(),n.show=!0):(t.pause(),t.load(),n.show=!1)};return{...Object(N["toRefs"])(n),audio:o,play:a}}});n("3adc");const Ye=le()(Fe,[["render",ze],["__scopeId","data-v-28dbe6bc"]]);var Ke=Ye;const We=e=>(Object(N["pushScopeId"])("data-v-3f9a76df"),e=e(),Object(N["popScopeId"])(),e),qe={class:"message-file"},Ze=["title"],Xe=We(()=>Object(N["createElementVNode"])("i",{class:"icon icon-files"},null,-1)),Je={class:"message-file-content"},Qe=["value"];function et(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",qe,[Object(N["createElementVNode"])("div",{class:"box",onClick:t[0]||(t[0]=(...t)=>e.download&&e.download(...t)),title:e.$t("TUIChat.单击下载")},[Xe,Object(N["createElementVNode"])("div",Je,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.data.name),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.data.size),1)])],8,Ze),e.data.progress?(Object(N["openBlock"])(),Object(N["createElementBlock"])("progress",{key:0,value:e.data.progress,max:"1"},null,8,Qe)):Object(N["createCommentVNode"])("",!0)])}var tt=n("47c7"),nt=n.n(tt),ot=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({data:{}});Object(N["watchEffect"])(()=>{n.data=e.data});const o=()=>{const e=n.data,t={mode:"cors",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"})};if(window.fetch)fetch(e.url,t).then(e=>e.blob()).then(t=>{const n=document.createElement("a"),o=nt.a.createObjectURL(t);n.href=o,n.download=e.name,n.click()});else{const t=document.createElement("a");t.href=e.url,t.target="_blank",t.download=e.name,t.click()}};return{...Object(N["toRefs"])(n),download:o}}});n("7c02");const at=le()(ot,[["render",et],["__scopeId","data-v-3f9a76df"]]);var it=at;const st={class:"message-image",ref:"skeleton"},rt=["src"];function lt(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",st,[Object(N["createElementVNode"])("img",{class:"message-img",src:e.data.url,style:Object(N["normalizeStyle"])(e.isH5?{maxWidth:e.data.width?e.data.width+"px":"calc(100vw - 180px)",maxHeight:e.data.height?e.data.height+"px":"calc(100vw - 180px)"}:{})},null,12,rt)],512)}var ct=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},setup(e,t){const n=Object(N["reactive"])({data:{}}),o=Object(N["ref"])();return Object(N["watchEffect"])(()=>{n.data=e.data,n.data&&Object(N["nextTick"])(()=>{var t,n,a;const i=(null===(t=document.getElementById("messageEle"))||void 0===t?void 0:t.clientWidth)||0,s=e.isH5?Math.min(i-172,300):300,r=Object(U["q"])(240,240,s,s);(null===o||void 0===o||null===(n=o.value)||void 0===n?void 0:n.style)&&(o.value.style.width=r.width+"px"),(null===o||void 0===o||null===(a=o.value)||void 0===a?void 0:a.style)&&(o.value.style.height=r.height+"px")})}),{...Object(N["toRefs"])(n),skeleton:o}}});n("e5cf");const dt=le()(ct,[["render",lt],["__scopeId","data-v-ec7124a2"]]);var ut=dt;const pt=["href"],ht={class:"el-icon-location-outline"},mt=["src"];function vt(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("a",{class:"message-location",href:e.data.href,target:"_blank",title:"点击查看详情"},[Object(N["createElementVNode"])("span",ht,Object(N["toDisplayString"])(e.data.description),1),Object(N["createElementVNode"])("img",{src:e.data.url},null,8,mt)],8,pt)}var ft=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({data:{}});return Object(N["watchEffect"])(()=>{n.data=e.data}),{...Object(N["toRefs"])(n)}}});n("e157");const gt=le()(ft,[["render",vt],["__scopeId","data-v-2ee98c02"]]);var bt=gt;const Ot=e=>(Object(N["pushScopeId"])("data-v-a9c3fbce"),e=e(),Object(N["popScopeId"])(),e),yt={class:"message-merger"},jt=["data-value"],It={class:"merger-title"},kt=Ot(()=>Object(N["createElementVNode"])("span",{class:"merger-label"}," 聊天记录",-1));function wt(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",yt,[Object(N["createElementVNode"])("div",{class:"merger-box","data-value":e.data.message},[Object(N["createElementVNode"])("p",It,Object(N["toDisplayString"])(e.data.title),1),(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.data.abstractList,(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",{class:"merger-text",key:t},Object(N["toDisplayString"])(e),1))),128))],8,jt),kt])}var Et=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({data:{}});return Object(N["watchEffect"])(()=>{n.data=e.data}),{...Object(N["toRefs"])(n)}}});n("1182");const Ct=le()(Et,[["render",wt],["__scopeId","data-v-a9c3fbce"]]);var Tt=Ct;const _t=e=>(Object(N["pushScopeId"])("data-v-11728ca4"),e=e(),Object(N["popScopeId"])(),e),St={class:"custom"},Dt={key:0},Ut=["href"],Mt={key:0},Nt=["href"],Bt={key:1},Rt={key:1,class:"evaluate"},Lt=_t(()=>Object(N["createElementVNode"])("i",{class:"icon icon-star-light"},null,-1)),Vt=[Lt],xt=["src"],Pt={key:3,class:"textLink"},At=["href"],Gt=["innerHTML"];function Ht(e,t,n,o,a,i){var s,r;return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",St,[e.isCustom===e.constant.typeService?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Dt,[Object(N["createElementVNode"])("h1",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.extension.title),1),e.extension.hyperlinks_text?(Object(N["openBlock"])(),Object(N["createElementBlock"])("a",{key:0,href:e.extension.hyperlinks_text.value,target:"view_window"},Object(N["toDisplayString"])(e.extension.hyperlinks_text.key),9,Ut)):Object(N["createCommentVNode"])("",!0)]),e.extension.item&&e.extension.item.length>0?(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",Mt,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.extension.item,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:n},[e.isUrl(t.value)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("a",{key:0,href:t.value,target:"view_window"},Object(N["toDisplayString"])(t.key),9,Nt)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",Bt,Object(N["toDisplayString"])(t.key),1))]))),128))])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("article",null,Object(N["toDisplayString"])(e.extension.description),1)])):e.isCustom.businessID===e.constant.typeEvaluate?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Rt,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("message.custom.对本次服务评价")),1),Object(N["createElementVNode"])("ul",null,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(~~e.isCustom.score,(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"evaluate-list-item",key:t},Vt))),128))]),Object(N["createElementVNode"])("article",null,Object(N["toDisplayString"])(e.isCustom.comment),1)])):e.isCustom.businessID===e.constant.typeOrder?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:2,class:"order",onClick:t[0]||(t[0]=t=>e.openLink(e.isCustom.link))},[Object(N["createElementVNode"])("img",{src:e.isCustom.imageUrl,alt:""},null,8,xt),Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.isCustom.title),1),Object(N["createElementVNode"])("p",null,Object(N["toDisplayString"])(e.isCustom.description),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.isCustom.price),1)])])):e.isCustom.businessID===e.constant.typeTextLink?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Pt,[Object(N["createElementVNode"])("p",null,Object(N["toDisplayString"])(e.isCustom.text),1),Object(N["createElementVNode"])("a",{href:e.isCustom.link,target:"view_window"},Object(N["toDisplayString"])(e.$t("message.custom.查看详情>>")),9,At)])):e.isCustom.businessID===e.constant.TYPE_CALL_MESSAGE?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:4,class:Object(N["normalizeClass"])(["call","call-"+(null===(s=e.data)||void 0===s||null===(r=s.message)||void 0===r?void 0:r.conversationType)]),onClick:t[1]||(t[1]=(...t)=>e.handleCallAgain&&e.handleCallAgain(...t))},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon",e.handleCallMessageIcon()])},null,2),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.data.custom),1)],2)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:5,innerHTML:e.data.custom},null,8,Gt))])}var $t=n("2e20");class zt{constructor(e){this.options={},this.aegisOptions=[],e?this.aegis=e:this.init(()=>{var e;(this.aegis=new window.Aegis({id:"iHWefAYqTgxNuvtAjr",uin:"",reportApiSpeed:!0,reportAssetSpeed:!0,spa:!0}),this.aegisOptions.length>0)&&(l()(e=this.aegisOptions).call(e,e=>(this.reportEvent(e),e)),this.aegisOptions=[])})}install(e){e.config.globalProperties.$TUIAegis=zt.getInstance()}static getInstance(){return zt.instance||(zt.instance=new zt(window.$Aegis)),zt.instance}setAegisOptions(e){this.options=e}reportEvent(e){if(this.aegis){var t;if((null===e||void 0===e||!e.ext3)&&(null===(t=this.options)||void 0===t||!t.ext3))return;this.aegis.reportEvent({...e,...this.options})}else this.aegisOptions=[...this.aegisOptions,e]}init(e){if(!zt.instance){const t=document.createElement("script");t.type="text/javascript",t.src="https://tam.cdn-go.cn/aegis-sdk/latest/aegis.min.js",document.getElementsByTagName("head")[0].appendChild(t),t.onload=e}}}var Ft=zt,Yt=n("5502"),Kt=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})}},setup(e,t){var n,o;const a=(null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o?void 0:o.isOfficial)&&Yt["c"]&&Object(Yt["c"])()||{},i=Object(N["reactive"])({data:{},extension:{},isCustom:"",constant:$t["a"]});Object(N["watchEffect"])(()=>{i.data=e.data;const{message:{payload:t}}=e.data;i.isCustom=t.data||" ",i.isCustom=Object(U["a"])(t.data),t.data===$t["a"].typeService&&(i.extension=Object(U["a"])(t.extension))});const s=e=>{window.open(e)},r=()=>{var e,t,n,o,a;const s=null===(e=JSON.parse(null===(t=JSON.parse(null===i||void 0===i||null===(n=i.data)||void 0===n||null===(o=n.message)||void 0===o||null===(a=o.payload)||void 0===a?void 0:a.data))||void 0===t?void 0:t.data))||void 0===e?void 0:e.call_type;let r="";switch(s){case 1:r="icon-call-voice";break;case 2:r="icon-call-video";break;default:break}return r},l=async()=>{var t,n,o,s,r,l,c,d,u,p,h;const m=null===(t=JSON.parse(null===(n=JSON.parse(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(s=o.message)||void 0===s||null===(r=s.payload)||void 0===r?void 0:r.data))||void 0===n?void 0:n.data))||void 0===t?void 0:t.call_type;switch(Ft.getInstance().reportEvent({name:"callOptions",ext1:"clickCall"}),null===i||void 0===i||null===(l=i.data)||void 0===l||null===(c=l.message)||void 0===c?void 0:c.conversationType){case window.TUIKitTUICore.TIM.TYPES.CONV_C2C:const{flow:e,to:t,from:n}=null===i||void 0===i||null===(d=i.data)||void 0===d?void 0:d.message;if(t===n)break;try{var v,f,g,b,O,y;await(null===(v=window)||void 0===v||null===(f=v.TUIKitTUICore)||void 0===f||null===(g=f.TUIServer)||void 0===g||null===(b=g.TUICallKit)||void 0===b?void 0:b.call({userID:"out"===e?t:n,type:m})),(null===(O=window)||void 0===O||null===(y=O.TUIKitTUICore)||void 0===y?void 0:y.isOfficial)&&(null===a||void 0===a?void 0:a.commit)&&(null===a||void 0===a||a.commit("handleTask",6))}catch(j){console.warn(j)}null!==(u=window)&&void 0!==u&&null!==(p=u.TUIKitTUICore)&&void 0!==p&&null!==(h=p.TUIServer)&&void 0!==h&&h.TUICallKit&&(Ft.getInstance().reportEvent({name:"callOptions",ext1:"clickCall-success"}),Ft.getInstance().reportEvent({name:"callOptions",ext1:"call-c2c"}));break;case window.TUIKitTUICore.TIM.TYPES.CONV_GROUP:break;default:break}};return{...Object(N["toRefs"])(i),isUrl:U["w"],openLink:s,handleCallMessageIcon:r,handleCallAgain:l}}});n("2b8a");const Wt=le()(Kt,[["render",Ht],["__scopeId","data-v-11728ca4"]]);var qt=Wt;const Zt={class:"message-tip"};function Xt(e,t,n,o,a,i){var s;return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Zt,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(s=e.message)||void 0===s?void 0:s.text),1)])}var Jt=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({message:{}});return Object(N["watchEffect"])(()=>{n.message=e.data}),{...Object(N["toRefs"])(n)}}});n("a6a0");const Qt=le()(Jt,[["render",Xt],["__scopeId","data-v-54b2b3c4"]]);var en=Qt;const tn=e=>(Object(N["pushScopeId"])("data-v-deb74bfa"),e=e(),Object(N["popScopeId"])(),e),nn=["src"],on={class:"message-area"},an={key:0,class:"name"},sn={key:1,ref:"dropdownRef",class:"dropdown-inner"},rn=tn(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-replies"},null,-1));function ln(e,t,n,o,a,i){var s,r,l,c,d,u,p,h;const m=Object(N["resolveComponent"])("MessageReference"),v=Object(N["resolveComponent"])("MessageEmojiReact");return Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],null,[Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["message-bubble",["in"===e.message.flow?"":"reverse"]]),ref:"htmlRefHook"},[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===(s=e.message)||void 0===s?void 0:s.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,nn),Object(N["createElementVNode"])("main",on,["in"===e.message.flow&&"GROUP"===e.message.conversationType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("label",an,Object(N["toDisplayString"])(e.message.nameCard||e.message.nick||e.message.from),1)):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(e.handleImageOrVideoBubbleStyle(e.message)),onContextmenu:t[2]||(t[2]=Object(N["withModifiers"])((...t)=>e.toggleDialog&&e.toggleDialog(...t),["prevent","right"]))},[null!==(r=e.message)&&void 0!==r&&r.cloudCustomData&&e.referenceMessage&&null!==(l=e.referenceMessage)&&void 0!==l&&l.messageRootID?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["message-replie-area",["in"===(null===(c=e.message)||void 0===c?void 0:c.flow)?"":"message-replies-area-reverse"]]),onClick:t[0]||(t[0]=t=>e.showRepliesDialog(e.message,!1))},[Object(N["createVNode"])(m,{message:e.message,referenceMessage:e.referenceMessage,referenceForShow:e.referenceForShow,url:e.url,face:e.face,allMessageID:e.allMessageID,type:"reply"},null,8,["message","referenceMessage","referenceForShow","url","face","allMessageID"])],2)):Object(N["createCommentVNode"])("",!0),Object(N["renderSlot"])(e.$slots,"default",{},void 0,!0),e.dropdown?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",sn,[Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["dialog",["in"===e.message.flow?"":"dialog-right"]]),onClick:t[1]||(t[1]=t=>e.dropdown=!1)},[Object(N["renderSlot"])(e.$slots,"dialog",{},void 0,!0)],2)],512)):Object(N["createCommentVNode"])("",!0),e.needEmojiReact&&e.isEmojiReactionInMessage(e.message)?(Object(N["openBlock"])(),Object(N["createBlock"])(v,{key:2,message:e.message,type:"content"},null,8,["message"])):Object(N["createCommentVNode"])("",!0)],34)]),"fail"===e.message.status?(Object(N["openBlock"])(),Object(N["createElementBlock"])("label",{key:0,class:"message-label fail",onClick:t[3]||(t[3]=t=>e.resendMessage(e.message))},"!")):Object(N["createCommentVNode"])("",!0),e.showReadReceiptTag(e.message)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("label",{key:1,class:Object(N["normalizeClass"])(["message-label",e.readReceiptStyle(e.message)]),onClick:t[4]||(t[4]=t=>e.showReadReceiptDialog(e.message))},[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.readReceiptCont(e.message)),1)],2)):Object(N["createCommentVNode"])("",!0)],2),null===(d=e.message)||void 0===d||!d.cloudCustomData||!e.referenceMessage||null!==(u=e.referenceMessage)&&void 0!==u&&u.messageRootID?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["message-reference-area",["in"===e.message.flow?"":"message-reference-area-reverse"]]),onClick:t[5]||(t[5]=t=>e.jumpToAim(e.referenceMessage))},[Object(N["createVNode"])(m,{message:e.message,referenceMessage:e.referenceMessage,referenceForShow:e.referenceForShow,url:e.url,face:e.face,allMessageID:e.allMessageID,type:"reference"},null,8,["message","referenceMessage","referenceForShow","url","face","allMessageID"])],2)),null!==(p=e.replies)&&void 0!==p&&p.length?(Object(N["openBlock"])(),Object(N["createElementBlock"])("label",{key:1,class:Object(N["normalizeClass"])(["message-replies",["in"===e.message.flow?"":"message-replies-reverse"]]),onClick:t[6]||(t[6]=t=>e.showRepliesDialog(e.message,!0))},[rn,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])((null===(h=e.replies)||void 0===h?void 0:h.length)+e.$t("TUIChat.条回复")),1)],2)):Object(N["createCommentVNode"])("",!0)],64)}var cn=n("9a73"),dn=n.n(cn),un=n("b05a"),pn=n("2c28"),hn=n("4176");const mn={class:"message-reference-user"},vn={class:"nick"},fn={class:"colon"},gn={key:0,class:"face-box"},bn={key:0,class:"text-box"},On=["src"],yn={key:1},jn=["src"],In={key:3,class:"message-video-cover"},kn=["src"],wn=["src"],En={key:5};function Cn(e,t,n,o,a,i){var s,r,l,c,d,u,p,h,m;return null!==(s=e.referenceMessage)&&void 0!==s&&s.messageID&&-1!==_()(r=e.allMessageID).call(r,e.referenceMessage.messageID)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(`${e.type} ${"in"===e.message.flow&&e.type+"-reverse"}`)},[Object(N["createElementVNode"])("p",mn,[Object(N["createElementVNode"])("span",vn,Object(N["toDisplayString"])(e.referenceForShow.nick||e.referenceForShow.from),1),Object(N["createElementVNode"])("span",fn,Object(N["toDisplayString"])("reference"===e.type?":":""),1)]),e.referenceMessage.messageType===e.constant.typeText?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",gn,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.face,(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:t},["text"===e.name?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",bn,Object(N["toDisplayString"])(e.text),1)):"img"===e.name?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:1,class:"text-img",src:e.src},null,8,On)):Object(N["createCommentVNode"])("",!0)]))),128))])):Object(N["createCommentVNode"])("",!0),e.referenceMessage.messageType===e.constant.typeCustom?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",yn,Object(N["toDisplayString"])(e.referenceMessage.messageAbstract),1)):Object(N["createCommentVNode"])("",!0),e.referenceMessage.messageType===e.constant.typeImage?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:2,class:"message-img",src:e.referenceForShow.payload.imageInfoArray[1].url},null,8,jn)):Object(N["createCommentVNode"])("",!0),e.referenceMessage.messageType===e.constant.typeVideo?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",In,[Object(N["createElementVNode"])("img",{class:"message-videoimg",src:(null===(l=e.referenceForShow)||void 0===l||null===(c=l.payload)||void 0===c?void 0:c.snapshotUrl)||(null===(d=e.referenceForShow)||void 0===d||null===(u=d.payload)||void 0===u?void 0:u.thumbUrl)},null,8,kn)])):Object(N["createCommentVNode"])("",!0),e.referenceMessage.messageType===e.constant.typeFace?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:4,class:"message-img",src:e.url},null,8,wn)):Object(N["createCommentVNode"])("",!0),e.referenceMessage.messageType===e.constant.typeFile||e.referenceMessage.messageType===e.constant.typeAudio?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",En,Object(N["toDisplayString"])(null===(p=e.referenceMessage)||void 0===p?void 0:p.messageAbstract),1)):Object(N["createCommentVNode"])("",!0)],2)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:1,class:Object(N["normalizeClass"])(`${e.type} ${"in"===e.message.flow&&e.type+"-reverse"}`)},[Object(N["createElementVNode"])("p",null,Object(N["toDisplayString"])(null===(h=e.referenceMessage)||void 0===h?void 0:h.messageSender),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(m=e.referenceMessage)||void 0===m?void 0:m.messageAbstract),1)],2))}const Tn=Object(N["defineComponent"])({props:{message:{type:Object,default:{}},referenceMessage:{type:Object,default:()=>({})},referenceForShow:{type:Object,default:()=>({})},face:{type:Array,default:()=>[]},url:{type:String,default:""},allMessageID:{type:String,default:""},type:{type:String,deafault:""}},setup(e,t){const n=Object(N["reactive"])({message:{},referenceMessage:{},referenceForShow:{},allMessageID:"",face:[],url:"",type:""});return Object(N["watchEffect"])(()=>{n.message=e.message,n.referenceMessage=e.referenceMessage,n.referenceForShow=e.referenceForShow,n.face=e.face,n.url=e.url,n.allMessageID=e.allMessageID,n.type=e.type}),Object(N["watch"])(()=>e.referenceForShow,()=>{n.referenceForShow=e.referenceForShow},{deep:!0}),{...Object(N["toRefs"])(n),constant:$t["a"]}}});var _n=Tn;n("3b1e");const Sn=le()(_n,[["render",Cn],["__scopeId","data-v-06f7d624"]]);var Dn=Sn;const Un={class:"face-list collapse"},Mn={class:"face-list-collapse"},Nn=["onClick"],Bn=["src"],Rn={class:"face-list face-list-expand"},Ln=["onClick"],Vn=["src"],xn={key:1,class:"emoji-content"},Pn={class:"emoji-react",ref:"container"},An=["onClick"],Gn=["src"],Hn={class:"emoji-react-item-content"};function $n(e,t,n,o,a,i){var s;return Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],null,["dropdown"===e.type?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["dialog-emoji",null!==(s=e.env)&&void 0!==s&&s.isH5?"dialog-emoji-h5":""])},[Object(N["createElementVNode"])("div",Un,[Object(N["createElementVNode"])("ul",Mn,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.emojiCollapseList,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"face-list-item",key:n,onClick:Object(N["withModifiers"])(n=>e.select(t),["stop"])},[Object(N["createElementVNode"])("img",{src:e.emojiUrl+e.emojiMap[t]},null,8,Bn)],8,Nn))),128))]),Object(N["createElementVNode"])("div",{class:"face-list-button",onClick:t[0]||(t[0]=Object(N["withModifiers"])(t=>e.isCollapse=!e.isCollapse,["stop"]))},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon",[e.isCollapse?"icon-expand":"icon-collapse"]])},null,2)])]),Object(N["withDirectives"])(Object(N["createElementVNode"])("ul",Rn,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.emojiExpandList,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"face-list-item",key:n,onClick:Object(N["withModifiers"])(n=>e.select(t),["stop"])},[Object(N["createElementVNode"])("img",{src:e.emojiUrl+e.emojiMap[t]},null,8,Vn)],8,Ln))),128))],512),[[N["vShow"],!e.isCollapse]])],2)):Object(N["createCommentVNode"])("",!0),"content"===e.type?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",xn,[Object(N["createElementVNode"])("ul",Pn,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.handleEmojiReact(e.message),(t,n)=>Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"emoji-react-item",key:n,onClick:Object(N["withModifiers"])(t=>e.select(n),["stop"])},[Object(N["createElementVNode"])("img",{src:e.emojiUrl+e.emojiMap[n]},null,8,Gn),Object(N["createElementVNode"])("div",Hn,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.handleEmojiReactItem(t)),1)])],8,An)),[[N["vShow"],t&&(null===t||void 0===t?void 0:t.length)]])),128))],512)])):Object(N["createCommentVNode"])("",!0)],64)}var zn=n("52da"),Fn=n.n(zn),Yn=n("c959"),Kn=n("17da"),Wn=Object(N["defineComponent"])({props:{message:{type:Object,default:()=>({})},emojiList:{type:Array,default:()=>[]},type:{type:String,default:""}},emits:["handleCollapse"],setup(e,t){const{TUIServer:n}=pr,o=Object(N["reactive"])({message:{},emojiUrl:Kn["d"],emojiMap:Kn["b"],emojiName:Kn["c"],isCollapse:!0,types:Yn["a"].TYPES,env:n.TUICore.TUIEnv,type:e.type,emojiReacts:{},allMemberList:[]}),i=Object(N["ref"])({}),s=Object(N["computed"])(()=>{var e;return Fn()(e=o.emojiName).call(e,0,6)}),r=Object(N["computed"])(()=>{var e;return Fn()(e=o.emojiName).call(e,6)}),l=e=>{n.emojiReact(o.message,e)},c=e=>{try{var t,n;if(null===e||void 0===e||!e.cloudCustomData)return;const a=null===(t=Object(U["a"])(null===e||void 0===e?void 0:e.cloudCustomData))||void 0===t||null===(n=t.messageReact)||void 0===n?void 0:n.reacts;if(!a)return;return o.emojiReacts=a,a}catch(a){console.warn(a)}},d=e=>{let t="";return null===e||void 0===e||a()(e).call(e,(e,n)=>{var a;const i=null===(a=o.allMemberList)||void 0===a?void 0:I()(a).call(a,t=>t.userID===e);t=t+(i?null===i||void 0===i?void 0:i.nick:e)+", "}),t.length&&(t=t.substring(0,_e()(t).call(t,","))),t},u=e=>{var t,a,i,s,r,l,c;const d=null===n||void 0===n?void 0:n.currentStore;switch(null===e||void 0===e?void 0:e.conversationType){case Yn["a"].TYPES.CONV_C2C:o.allMemberList=[{userID:null===d||void 0===d||null===(t=d.conversation)||void 0===t||null===(a=t.userProfile)||void 0===a?void 0:a.userID,nick:null===d||void 0===d||null===(i=d.conversation)||void 0===i||null===(s=i.userProfile)||void 0===s?void 0:s.nick},{userID:null===d||void 0===d||null===(r=d.selfInfo)||void 0===r?void 0:r.userID,nick:null===d||void 0===d||null===(l=d.selfInfo)||void 0===l?void 0:l.nick}];break;case Yn["a"].TYPES.CONV_GROUP:o.allMemberList=null===d||void 0===d||null===(c=d.allMemberList)||void 0===c?void 0:c.memberList;break;default:break}};return Object(N["watch"])(()=>e.message,(t,n)=>{o.message=e.message,(null===t||void 0===t?void 0:t.conversationID)!==(null===n||void 0===n?void 0:n.conversationID)&&u(t)},{deep:!0,immediate:!0}),Object(N["watch"])(()=>o.isCollapse,(e,n)=>{var a;e!==n&&null!==o&&void 0!==o&&null!==(a=o.env)&&void 0!==a&&a.isH5&&t.emit("handleCollapse",e)}),{...Object(N["toRefs"])(o),emojiCollapseList:s,emojiExpandList:r,select:l,handleEmojiReact:c,handleEmojiReactItem:d,container:i}}});n("7af0");const qn=le()(Wn,[["render",$n],["__scopeId","data-v-3266b21c"]]);var Zn=qn;const Xn=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},messagesList:{type:Array,default:()=>[]},isH5:{type:Boolean,default:!1},needGroupReceipt:{type:Boolean,default:!1},needReplies:{type:Boolean,default:!0},flow:{type:String,default:""},needEmojiReact:{type:Boolean,default:!1}},emits:["jumpID","resendMessage","showReadReceiptDialog","showRepliesDialog","dropDownOpen"],components:{MessageReference:Dn,MessageEmojiReact:Zn},setup(e,t){const{t:n}=window.TUIKitTUICore.config.i18n.useI18n(),{TUIServer:o}=pr,a=Object(N["reactive"])({env:Object(S["b"])(),message:{},messagesList:[],show:!1,type:{},referenceMessage:{},referenceForShow:{},allMessageID:"",needGroupReceipt:!1,needReplies:!0,replies:[],face:[],url:"",needEmojiReact:!1});Object(N["watchEffect"])(()=>{var t;if(a.type=$t["a"],a.messagesList=e.messagesList,a.needEmojiReact=e.needEmojiReact,a.message=Object(U["b"])((null===(t=a.messagesList)||void 0===t?void 0:I()(t).call(t,t=>{var n;return(null===t||void 0===t?void 0:t.ID)===(null===(n=e.message)||void 0===n?void 0:n.ID)}))||e.data),a.needGroupReceipt=e.needGroupReceipt,a.needReplies=e.needReplies,a.message.cloudCustomData){var n;const e=[],t=Object(U["a"])(a.message.cloudCustomData);a.replies=(null===t||void 0===t||null===(n=t.messageReplies)||void 0===n?void 0:n.replies)||[],a.referenceMessage=t.messageReply?t.messageReply:"";for(let n=0;n<a.messagesList.length;n++){var o;e.push(a.messagesList[n].ID),a.allMessageID=m()(e),a.messagesList[n].ID===(null===(o=a.referenceMessage)||void 0===o?void 0:o.messageID)&&(a.referenceForShow=a.messagesList[n],a.referenceMessage.messageType===$t["a"].typeText&&(a.face=Object(un["a"])(a.referenceForShow.payload)),a.referenceMessage.messageType===$t["a"].typeFace&&(a.url=`https://web.sdk.qcloud.com/im/assets/face-elem/${a.referenceForShow.payload.data}@2x.png`))}}else a.replies=[]});const i=Object(N["ref"])(null),r=Object(N["ref"])(!1),l=Object(N["ref"])(null),c=e=>{r.value=!r.value,r.value&&(t.emit("dropDownOpen",l),Object(N["nextTick"])(()=>{var t,n,o,i,s,r,c,d,u,p,h;const m=null===l||void 0===l||null===(t=l.value)||void 0===t?void 0:t.children[0],v=document.getElementsByClassName("dialog-item")[0],f=null===l||void 0===l||null===(n=l.value)||void 0===n?void 0:n.offsetParent,g=Object(pn["useElementBounding"])(f),b=document.getElementById("messageEle"),O=Object(pn["useElementBounding"])(b),y=null===O||void 0===O||null===(o=O.left)||void 0===o?void 0:o.value,j=(null===O||void 0===O||null===(i=O.left)||void 0===i?void 0:i.value)+b.clientWidth-m.clientWidth+76,I=null===O||void 0===O||null===(s=O.top)||void 0===s?void 0:s.value,k=(null===O||void 0===O||null===(r=O.top)||void 0===r?void 0:r.value)+b.clientHeight-m.clientHeight,{clientX:w,clientY:E}=e;if(null!==a&&void 0!==a&&null!==(c=a.env)&&void 0!==c&&c.isH5){var C,T,_,S;(null===g||void 0===g||null===(C=g.top)||void 0===C?void 0:C.value)<=(null===v||void 0===v?void 0:v.clientHeight)?m.style.bottom=`-${null===v||void 0===v?void 0:v.clientHeight}px`:"in"===(null===a||void 0===a||null===(S=a.message)||void 0===S?void 0:S.flow)?m.style.top=`-${(null===v||void 0===v?void 0:v.clientHeight)-20}px`:m.style.top=`-${null===v||void 0===v?void 0:v.clientHeight}px`;const e=(null===g||void 0===g||null===(T=g.left)||void 0===T?void 0:T.value)+(null===g||void 0===g||null===(_=g.width)||void 0===_?void 0:_.value)/2;e>v.clientWidth/2&&e<(null===b||void 0===b?void 0:b.clientWidth)-v.clientWidth/2?m.style.left="calc(50% - 135px)":e<=v.clientWidth/2?m.style.left="-20px":m.style.left=`-${v.clientWidth/2+10}px`}else{switch(!0){case w>y&&w<j:m.style.left=Math.max(e.clientX-(null===g||void 0===g||null===(d=g.left)||void 0===d?void 0:d.value)-76,-40)+"px";break;case w<=y:m.style.left="20px";break;case w>=j:m.style.right=Math.max((null===g||void 0===g||null===(u=g.left)||void 0===u?void 0:u.value)+(null===f||void 0===f?void 0:f.clientWidth)-e.clientX-256,-10)+"px";break}switch(!0){case E>I&&E<k:m.style.top=e.clientY-(null===g||void 0===g||null===(p=g.top)||void 0===p?void 0:p.value)+"px",m.style.cssText=m.style.cssText.replace("align-items:end;","");break;case E<=I:m.style.top="0px",m.style.cssText=m.style.cssText.replace("align-items:end;","");break;case E>=k:m.style.bottom=(null===g||void 0===g||null===(h=g.top)||void 0===h?void 0:h.value)+(null===f||void 0===f?void 0:f.clientHeight)-e.clientY+"px",m.style.cssText+="align-items:end;";break}}}))},d=o=>{var i,s,r;if(null!==(i=a.referenceMessage)&&void 0!==i&&i.messageID&&dn()(s=a.allMessageID).call(s,null===(r=a.referenceMessage)||void 0===r?void 0:r.messageID))t.emit("jumpID",a.referenceMessage.messageID);else{const t=n("TUIChat.无法定位到原消息");Object(hn["b"])(t,e)}};Object(pn["onClickOutside"])(l,()=>{r.value=!1});const u=e=>{var t;null!==a&&void 0!==a&&null!==(t=a.env)&&void 0!==t&&t.isH5&&c(e)};Object(pn["onLongPress"])(i,u);const p=e=>{t.emit("resendMessage",e)},h=e=>!("out"!==e.flow||"success"!==e.status||!e.needReadReceipt),v=e=>{var t,n,o;return null!==e&&void 0!==e&&null!==(t=e.readReceiptInfo)&&void 0!==t&&t.isPeerRead||void 0===(null===e||void 0===e||null===(n=e.readReceiptInfo)||void 0===n?void 0:n.isPeerRead)&&null!==e&&void 0!==e&&e.isPeerRead||0===(null===e||void 0===e||null===(o=e.readReceiptInfo)||void 0===o?void 0:o.unreadCount)?"":"unRead"},f=e=>{var t,a;switch(e.conversationType){case o.TUICore.TIM.TYPES.CONV_C2C:return null!==e&&void 0!==e&&null!==(t=e.readReceiptInfo)&&void 0!==t&&t.isPeerRead||void 0===(null===e||void 0===e||null===(a=e.readReceiptInfo)||void 0===a?void 0:a.isPeerRead)&&null!==e&&void 0!==e&&e.isPeerRead?n("TUIChat.已读"):n("TUIChat.未读");case o.TUICore.TIM.TYPES.CONV_GROUP:return 0===e.readReceiptInfo.unreadCount?n("TUIChat.全部已读"):0===e.readReceiptInfo.readCount||void 0===e.readReceiptInfo.unreadCount&&void 0===e.readReceiptInfo.readCount?n("TUIChat.未读"):""+(e.readReceiptInfo.readCount+n("TUIChat.人已读"));default:return""}},g=e=>{t.emit("showReadReceiptDialog",e,"receipt")},b=(o,i)=>{var s;if(i)t.emit("showRepliesDialog",o,"replies");else if(null!==(s=a.referenceMessage)&&void 0!==s&&s.messageRootID){var r;const o=null===(r=a.messagesList)||void 0===r?void 0:I()(r).call(r,e=>{var t;return e.ID===(null===(t=a.referenceMessage)||void 0===t?void 0:t.messageRootID)});if(o)return void t.emit("showRepliesDialog",o,"replies");{const t=n("TUIChat.无法定位到原消息");Object(hn["b"])(t,e)}}},O=e=>{const t=["content"];return e?(t.push("content-"+a.message.flow),a.message.type!==Yn["a"].TYPES.MSG_IMAGE||y(e)||t.push("content-image"),a.message.type!==Yn["a"].TYPES.MSG_VIDEO||y(e)||t.push("content-video"),t):t},y=e=>{try{var t,n;if(null===e||void 0===e||!e.cloudCustomData)return;const o=null===(t=Object(U["a"])(null===e||void 0===e?void 0:e.cloudCustomData))||void 0===t||null===(n=t.messageReact)||void 0===n?void 0:n.reacts;return!(!o||0===s()(o).length)}catch(o){return console.warn(o),!1}};return{...Object(N["toRefs"])(a),toggleDialog:c,htmlRefHook:i,jumpToAim:d,dropdown:r,dropdownRef:l,resendMessage:p,showReadReceiptTag:h,readReceiptStyle:v,readReceiptCont:f,showReadReceiptDialog:g,showRepliesDialog:b,handleImageOrVideoBubbleStyle:O,isEmojiReactionInMessage:y,TIM:Yn["a"]}}});var Jn=Xn;n("6a4c");const Qn=le()(Jn,[["render",ln],["__scopeId","data-v-deb74bfa"]]);var eo=Qn;const to={class:"revoke"},no={key:0},oo={key:1};function ao(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",to,["in"===e.message.flow?(Object(N["openBlock"])(),Object(N["createElementBlock"])("label",no,Object(N["toDisplayString"])(e.message.nick||e.message.from),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("label",oo,Object(N["toDisplayString"])(e.$t("TUIChat.您")),1)),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.撤回了一条消息")),1),"out"===e.message.flow&&e.isEdit?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:2,class:"edit",onClick:t[0]||(t[0]=(...t)=>e.edit&&e.edit(...t))},Object(N["toDisplayString"])(e.$t("TUIChat.重新编辑")),1)):Object(N["createCommentVNode"])("",!0)])}var io=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({message:{},isEdit:!1});Object(N["watchEffect"])(()=>{n.message=e.data,n.isEdit=e.isEdit});const o=()=>{t.emit("edit",n.message)};return{...Object(N["toRefs"])(n),edit:o}}});n("29ef");const so=le()(io,[["render",ao],["__scopeId","data-v-dedd5890"]]);var ro=so;const lo=e=>(Object(N["pushScopeId"])("data-v-55c508aa"),e=e(),Object(N["popScopeId"])(),e),co={class:"message-system"},uo={class:"list"},po=lo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-system"},null,-1)),ho={key:0,class:"btn-box"},mo=["onClick"],vo=["onClick"];function fo(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",co,[Object(N["createElementVNode"])("ul",uo,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.messageList,(t,n)=>{var o;return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:n},[t.type===e.types.MSG_GRP_TIP||t.type===e.types.MSG_GRP_SYS_NOTICE?(Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],{key:0},[po,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.translateGroupSystemNotice(t)),1),1===(null===t||void 0===t||null===(o=t.payload)||void 0===o?void 0:o.operationType)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",ho,[Object(N["createElementVNode"])("button",{class:"btn btn-default",onClick:n=>e.handleApplication("Agree",t)},"接受",8,mo),Object(N["createElementVNode"])("button",{class:"btn btn-cancel",onClick:n=>e.handleApplication("Reject",t)},"拒绝",8,vo)])):Object(N["createCommentVNode"])("",!0)],64)):Object(N["createCommentVNode"])("",!0)])}),128))])])}var go=Object(N["defineComponent"])({props:{data:{type:Array,default:()=>[]},types:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({messageList:[],types:{}});Object(N["watchEffect"])(()=>{n.messageList=e.data,n.types=e.types});const o=(e,n)=>{const o={handleAction:e,message:n};t.emit("application",o)};return{...Object(N["toRefs"])(n),translateGroupSystemNotice:U["x"],handleApplication:o}}});n("181e");const bo=le()(go,[["render",fo],["__scopeId","data-v-55c508aa"]]);var Oo=bo;const yo=e=>(Object(N["pushScopeId"])("data-v-60d6f26f"),e=e(),Object(N["popScopeId"])(),e),jo=yo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-copy"},null,-1)),Io=yo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-copy"},null,-1)),ko=yo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-forward"},null,-1)),wo=yo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-quote"},null,-1)),Eo=yo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-reply"},null,-1)),Co=yo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-revoke"},null,-1)),To=yo(()=>Object(N["createElementVNode"])("i",{class:"icon icon-msg-del"},null,-1));function _o(e,t,n,o,a,i){var s,r,l;const c=Object(N["resolveComponent"])("MessageEmojiReact");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["dialog-item",null!==(s=e.env)&&void 0!==s&&s.isH5?"dialog-item-h5":"dialog-item-web"])},[null!==(r=e.env)&&void 0!==r&&r.isH5&&e.needEmojiReact?(Object(N["openBlock"])(),Object(N["createBlock"])(c,{key:0,message:e.message,type:"dropdown",onHandleCollapse:e.handleCollapse},null,8,["message","onHandleCollapse"])):Object(N["createCommentVNode"])("",!0),Object(N["withDirectives"])(Object(N["createElementVNode"])("ul",{class:Object(N["normalizeClass"])(["dialog-item-list",null!==(l=e.env)&&void 0!==l&&l.isH5?"dialog-item-list-h5":"dialog-item-list-web"])},[e.message.type!==e.types.MSG_FILE&&e.message.type!==e.types.MSG_VIDEO&&e.message.type!==e.types.MSG_IMAGE||e.env.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:0,onClick:t[0]||(t[0]=t=>e.openMessage(e.message))},[jo,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.打开")),1)])),e.message.type===e.types.MSG_TEXT?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:1,onClick:t[1]||(t[1]=t=>e.handleMessage(e.message,e.constant.handleMessage.copy))},[Io,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.复制")),1)])):Object(N["createCommentVNode"])("",!0),"success"===e.message.status?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:2,onClick:t[2]||(t[2]=t=>e.handleMessage(e.message,e.constant.handleMessage.forward))},[ko,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.转发")),1)])):Object(N["createCommentVNode"])("",!0),"success"===e.message.status?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:3,onClick:t[3]||(t[3]=t=>e.handleMessage(e.message,e.constant.handleMessage.reference))},[wo,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.引用")),1)])):Object(N["createCommentVNode"])("",!0),"success"===e.message.status?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:4,onClick:t[4]||(t[4]=t=>e.handleMessage(e.message,e.constant.handleMessage.reply))},[Eo,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.回复")),1)])):Object(N["createCommentVNode"])("",!0),"out"===e.message.flow&&"success"===e.message.status&&e.message.type!==e.types.MSG_CUSTOM?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:5,onClick:t[5]||(t[5]=t=>e.handleMessage(e.message,e.constant.handleMessage.revoke))},[Co,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.撤回")),1)])):Object(N["createCommentVNode"])("",!0),"success"===e.message.status?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:6,onClick:t[6]||(t[6]=t=>e.handleMessage(e.message,e.constant.handleMessage.delete))},[To,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.删除")),1)])):Object(N["createCommentVNode"])("",!0)],2),[[N["vShow"],e.showToolList]])],2)}var So=n("a019"),Do=Object(N["defineComponent"])({props:{message:{type:Object,default:()=>({})},needEmojiReact:{type:Boolean,default:!1}},components:{MessageEmojiReact:Zn},setup(e,t){var n,o,a,i,s;const r=null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o||null===(a=o.TUIServer)||void 0===a?void 0:a.TUIChat,l=(null===(i=window)||void 0===i||null===(s=i.TUIKitTUICore)||void 0===s?void 0:s.isOfficial)&&Yt["c"]&&Object(Yt["c"])()||{},c=Object(N["reactive"])({message:{},show:!1,types:Yn["a"].TYPES,env:r.TUICore.TUIEnv,showToolList:!0,needEmojiReact:!1});Object(N["watchEffect"])(()=>{c.needEmojiReact=e.needEmojiReact}),Object(N["watch"])(()=>e.message,()=>{c.message=e.message},{deep:!0,immediate:!0});const d=e=>{let t="";switch(e.type){case c.types.MSG_FILE:t=e.payload.fileUrl;break;case c.types.MSG_VIDEO:t=e.payload.remoteVideoUrl;break;case c.types.MSG_IMAGE:t=e.payload.imageInfoArray[0].url;break}window.open(t,"_blank")},u=async(e,n)=>{switch(n){case $t["a"].handleMessage.revoke:try{var o,a;await r.revokeMessage(e),Ft.getInstance().reportEvent({name:"messageOptions",ext1:"messageRevoke"}),(null===(o=window)||void 0===o||null===(a=o.TUIKitTUICore)||void 0===a?void 0:a.isOfficial)&&(null===l||void 0===l?void 0:l.commit)&&(null===l||void 0===l||l.commit("handleTask",1))}catch(d){Object(hn["b"])(d,c.env)}break;case $t["a"].handleMessage.copy:try{var i;if((null===e||void 0===e?void 0:e.type)===c.types.MSG_TEXT&&null!==e&&void 0!==e&&null!==(i=e.payload)&&void 0!==i&&i.text){var s;const{toClipboard:t}=Object(So["a"])();await t(null===e||void 0===e||null===(s=e.payload)||void 0===s?void 0:s.text)}}catch(d){Object(hn["b"])(d,c.env)}break;case $t["a"].handleMessage.delete:await r.deleteMessage([e]),Ft.getInstance().reportEvent({name:"messageOptions",ext1:"messageDelete"});break;case $t["a"].handleMessage.forward:Ft.getInstance().reportEvent({name:"messageOptions",ext1:"messageForward"}),t.emit("handleMessage",e,$t["a"].handleMessage.forward);break;case $t["a"].handleMessage.reference:t.emit("handleMessage",e,$t["a"].handleMessage.reference);break;case $t["a"].handleMessage.reply:t.emit("handleMessage",e,$t["a"].handleMessage.reply);break}},p=e=>{var t;null!==c&&void 0!==c&&null!==(t=c.env)&&void 0!==t&&t.isH5&&(c.showToolList=e)};return{...Object(N["toRefs"])(c),openMessage:d,handleMessage:u,constant:$t["a"],handleCollapse:p}}});n("be7e");const Uo=le()(Do,[["render",_o],["__scopeId","data-v-60d6f26f"]]);var Mo=Uo;const No={class:"message-item"};var Bo=Object(N["defineComponent"])({__name:"index",props:{message:{type:Object,default:()=>({})},beforeMessage:{type:Object,default:()=>({})},types:{type:Object,default:()=>({})},env:{type:Object,default:()=>({})},messageList:{type:Array,default:()=>[]},displayGroupMessageReadReceipt:{type:Boolean,default:!0},displayEmojiReactions:{type:Boolean,default:!0}},emits:["handleEditor","showDialog","uploading","jumpID","resendMessage"],setup(e,{emit:t}){const n=e,{message:o,types:a,env:i,messageList:s,displayGroupMessageReadReceipt:r,displayEmojiReactions:l}=Object(N["toRefs"])(n),c=e=>{t("handleEditor",e,"reedit")},d=(e,n)=>{if(e&&n)switch(n){case $t["a"].handleMessage.forward:t("showDialog",e,$t["a"].handleMessage.forward);break;case $t["a"].handleMessage.reference:t("handleEditor",e,$t["a"].handleMessage.reference);break;case $t["a"].handleMessage.reply:t("handleEditor",e,$t["a"].handleMessage.reply);break;default:break}},u=e=>{e&&t("showDialog",e,"previewImage")},p=e=>{e&&t("showDialog",e,"receipt")},h=e=>{e&&t("showDialog",e,"replies")},m=e=>{e&&t("jumpID",e)},v=()=>{t("uploading")},f=e=>{e&&t("resendMessage",e)};return(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",No,[Object(N["unref"])(U["u"])(Object(N["unref"])(o))?(Object(N["openBlock"])(),Object(N["createBlock"])(en,{key:0,data:Object(N["unref"])(U["s"])(Object(N["unref"])(o))},null,8,["data"])):Object(N["unref"])(o).isRevoked?(Object(N["openBlock"])(),Object(N["createBlock"])(ro,{key:2,isEdit:Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_TEXT,data:Object(N["unref"])(o),onEdit:t[0]||(t[0]=e=>c(Object(N["unref"])(o)))},null,8,["isEdit","data"])):(Object(N["openBlock"])(),Object(N["createBlock"])(eo,{key:1,data:Object(N["unref"])(o),isH5:Object(N["unref"])(i).isH5,messagesList:Object(N["unref"])(s),needGroupReceipt:Object(N["unref"])(r),needReplies:!0,needEmojiReact:Object(N["unref"])(l),onJumpID:m,onResendMessage:f,onShowReadReceiptDialog:p,onShowRepliesDialog:h},{dialog:Object(N["withCtx"])(()=>{var e;return[Object(N["createVNode"])(Mo,{message:Object(N["unref"])(o),needEmojiReact:Object(N["unref"])(l),onHandleMessage:d},null,8,["message","needEmojiReact"]),null!==(e=Object(N["unref"])(i))&&void 0!==e&&e.isH5||!Object(N["unref"])(l)?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createBlock"])(Zn,{key:0,message:Object(N["unref"])(o),type:"dropdown"},null,8,["message"]))]}),default:Object(N["withCtx"])(()=>[Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_TEXT?(Object(N["openBlock"])(),Object(N["createBlock"])(de,{key:0,data:Object(N["unref"])(U["r"])(Object(N["unref"])(o))},null,8,["data"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_IMAGE?(Object(N["openBlock"])(),Object(N["createBlock"])(Ue,{key:1,isH5:Object(N["unref"])(i).isH5,data:Object(N["unref"])(U["j"])(Object(N["unref"])(o)),onUploading:v,onPreviewImage:u},null,8,["isH5","data"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_VIDEO?(Object(N["openBlock"])(),Object(N["createBlock"])(He,{key:2,isH5:Object(N["unref"])(i).isH5,data:Object(N["unref"])(U["t"])(Object(N["unref"])(o)),onUploading:v},null,8,["isH5","data"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_AUDIO?(Object(N["openBlock"])(),Object(N["createBlock"])(Ke,{key:3,data:Object(N["unref"])(U["e"])(Object(N["unref"])(o))},null,8,["data"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_FILE?(Object(N["openBlock"])(),Object(N["createBlock"])(it,{key:4,data:Object(N["unref"])(U["i"])(Object(N["unref"])(o))},null,8,["data"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_FACE?(Object(N["openBlock"])(),Object(N["createBlock"])(ut,{key:5,data:Object(N["unref"])(U["h"])(Object(N["unref"])(o)),isH5:Object(N["unref"])(i).isH5},null,8,["data","isH5"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_LOCATION?(Object(N["openBlock"])(),Object(N["createBlock"])(bt,{key:6,data:Object(N["unref"])(U["k"])(Object(N["unref"])(o))},null,8,["data"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_CUSTOM?(Object(N["openBlock"])(),Object(N["createBlock"])(qt,{key:7,data:Object(N["unref"])(U["g"])(Object(N["unref"])(o))},null,8,["data"])):Object(N["createCommentVNode"])("",!0),Object(N["unref"])(o).type===Object(N["unref"])(a).MSG_MERGER?(Object(N["openBlock"])(),Object(N["createBlock"])(Tt,{key:8,data:Object(N["unref"])(U["l"])(Object(N["unref"])(o))},null,8,["data"])):Object(N["createCommentVNode"])("",!0)]),_:1},8,["data","isH5","messagesList","needGroupReceipt","needEmojiReact"]))]))}});n("afe0");const Ro=le()(Bo,[["__scopeId","data-v-57bf2c24"]]);var Lo=Ro,Vo=Object(N["defineComponent"])({__name:"message-timestamp",props:{currTime:{type:Number,default:0},prevTime:{type:Number,default:0}},setup(e){var t,n,o,a;const i=e,{t:s}=null===(t=window)||void 0===t||null===(n=t.TUIKitTUICore)||void 0===n||null===(o=n.config)||void 0===o||null===(a=o.i18n)||void 0===a?void 0:a.useI18n(),{currTime:r,prevTime:l}=Object(N["toRefs"])(i),c=Object(N["ref"])(!1),d=Object(N["ref"])(""),u=(e,t)=>{if(c.value=!1,e<=0)return"";if(!t||t<=0)return c.value=!0,p(1e3*e);{const n=600,o=e-t;if(o>=n)return c.value=!0,p(1e3*e)}return""};function p(e){const t=(new Date).setHours(0,0,0,0),n=new Date((new Date).getFullYear(),0,1,0,0,0,0).getTime(),o=new Date(e),a=864e5,i=7*a,r=t-o.getTime();function l(e){return e<10?"0"+e:e.toString()}if(r<=0)return`${l(o.getHours())}:${l(o.getMinutes())}`;if(r<=a)return`${s("time.昨天")} ${l(o.getHours())}:${l(o.getMinutes())}`;if(r<=i-a){const e=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],t=e[o.getDay()];return`${s("time."+t)} ${l(o.getHours())}:${l(o.getMinutes())}`}return o.getTime()>=n?`${o.getMonth()+1}/${o.getDate()} ${l(o.getHours())}:${l(o.getMinutes())}`:`${o.getFullYear()}/${o.getMonth()+1}/${o.getDate()} ${l(o.getHours())}:${l(o.getMinutes())}`}return Object(N["watch"])(()=>[r.value,l.value],(e,t)=>{(null===e||void 0===e?void 0:e.toString())!==(null===t||void 0===t?void 0:t.toString())&&(d.value=u(r.value,l.value))},{immediate:!0}),(e,t)=>Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:"message-timestamp"},Object(N["toDisplayString"])(d.value),513)),[[N["vShow"],c.value]])}});n("944d");const xo=le()(Vo,[["__scopeId","data-v-673faa2b"]]);var Po=xo;const Ao=e=>(Object(N["pushScopeId"])("data-v-f731557c"),e=e(),Object(N["popScopeId"])(),e),Go={class:"manage-header"},Ho={class:"manage-header-left"},$o={key:0,class:"main"},zo={class:"userInfo space-top"},Fo=Ao(()=>Object(N["createElementVNode"])("i",{class:"icon icon-right"},null,-1)),Yo=["onClick"],Ko=["src"],Wo={key:0},qo={key:1},Zo=Ao(()=>Object(N["createElementVNode"])("i",{class:"icon icon-right end"},null,-1)),Xo=Ao(()=>Object(N["createElementVNode"])("i",{class:"icon icon-right"},null,-1)),Jo={class:"groupID"},Qo=["title"],ea=["src"],ta={class:"footer space-top"},na={key:4,class:"admin"},oa={key:0,class:"admin-list"},aa=["src"],ia={key:1,class:"admin-content space-top"},sa={key:2,class:"admin-list last"},ra=["src"],la={key:0,class:"delDialog-title"},ca={key:1,class:"delDialog-title"};function da(e,t,n,o,a,i){var s,r,l,c,d;const u=Object(N["resolveComponent"])("ManageName"),p=Object(N["resolveComponent"])("ManageMember"),h=Object(N["resolveComponent"])("MemeberProfile"),m=Object(N["resolveComponent"])("ManageNotification"),v=Object(N["resolveComponent"])("Slider"),f=Object(N["resolveComponent"])("Transfer"),g=Object(N["resolveComponent"])("Mask"),b=Object(N["resolveComponent"])("Dialog");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",null,[Object(N["createElementVNode"])("i",{class:"icon icon-chat-setting",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))}),e.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["manage",[e.isH5?"manage-h5":""]]),ref:"dialog"},[Object(N["createElementVNode"])("header",Go,[e.isH5&&!e.currentTab?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-back",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))})):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("aside",Ho,[e.currentTab?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-back",onClick:t[2]||(t[2]=t=>e.setTab(""))})):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage."+e.TabName)),1)])]),Object(N["createElementVNode"])("span",null,[e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-close",onClick:t[3]||(t[3]=(...t)=>e.toggleShow&&e.toggleShow(...t))}))])]),e.currentTab?"member"===e.currentTab?(Object(N["openBlock"])(),Object(N["createBlock"])(p,{key:1,self:e.conversation.groupProfile.selfInfo,list:e.userInfo.list,total:~~e.conversation.groupProfile.memberCount,isShowDel:"Owner"===e.conversation.groupProfile.selfInfo.role,onMore:t[14]||(t[14]=t=>e.getMember("more")),onDel:e.submit,onHandleMemberProfileShow:e.handleMemberProfileShow},null,8,["self","list","total","isShowDel","onDel","onHandleMemberProfileShow"])):"profile"===e.currentTab?(Object(N["openBlock"])(),Object(N["createBlock"])(h,{key:2,userInfo:e.currentMember},null,8,["userInfo"])):"notification"===e.currentTab?(Object(N["openBlock"])(),Object(N["createBlock"])(m,{key:3,isAuth:e.isAuth,data:e.conversation.groupProfile,onUpdate:e.updateProfile},null,8,["isAuth","data","onUpdate"])):"admin"===e.currentTab?(Object(N["openBlock"])(),Object(N["createElementBlock"])("main",na,[e.isAdmin?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",oa,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群管理员")),1),Object(N["createElementVNode"])("ol",null,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.member.admin,(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("dl",{key:t},[Object(N["createElementVNode"])("dt",null,[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===e||void 0===e?void 0:e.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,aa)]),Object(N["createElementVNode"])("dd",null,Object(N["toDisplayString"])((null===e||void 0===e?void 0:e.nick)||(null===e||void 0===e?void 0:e.userID)),1)]))),128)),Object(N["createElementVNode"])("dl",null,[Object(N["createElementVNode"])("dt",{class:"avatar",onClick:t[15]||(t[15]=t=>e.toggleMask("addAdmin"))},"+")]),Object(N["createElementVNode"])("dl",null,[e.member.admin.length>0?(Object(N["openBlock"])(),Object(N["createElementBlock"])("dt",{key:0,class:"avatar",onClick:t[16]||(t[16]=t=>e.toggleMask("removeAdmin"))},"-")):Object(N["createCommentVNode"])("",!0)])])])):Object(N["createCommentVNode"])("",!0),e.isSetMuteTime?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",ia,[Object(N["createElementVNode"])("aside",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.全员禁言")),1),Object(N["createElementVNode"])("p",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.全员禁言开启后，只允许群主和管理员发言。")),1)]),Object(N["createVNode"])(v,{open:e.conversation.groupProfile.muteAllMembers,onChange:e.setAllMuteTime},null,8,["open","onChange"])])):Object(N["createCommentVNode"])("",!0),e.isSetMuteTime?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",sa,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.单独禁言人员")),1),Object(N["createElementVNode"])("ol",null,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.member.muteMember,(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("dl",{key:t},[Object(N["createElementVNode"])("dt",null,[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===e||void 0===e?void 0:e.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,ra)]),Object(N["createElementVNode"])("dd",null,Object(N["toDisplayString"])((null===e||void 0===e?void 0:e.nick)||(null===e||void 0===e?void 0:e.userID)),1)]))),128)),Object(N["createElementVNode"])("dl",null,[Object(N["createElementVNode"])("dt",{class:"avatar",onClick:t[17]||(t[17]=t=>e.toggleMask("addMute"))},"+")]),Object(N["createElementVNode"])("dl",null,[e.member.muteMember.length>0?(Object(N["openBlock"])(),Object(N["createElementBlock"])("dt",{key:0,class:"avatar",onClick:t[18]||(t[18]=t=>e.toggleMask("removeMute"))},"-")):Object(N["createCommentVNode"])("",!0)])])])):Object(N["createCommentVNode"])("",!0)])):Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("main",$o,[Object(N["createVNode"])(u,{class:"space-top",isAuth:e.isAuth,isH5:e.isH5,data:e.conversation.groupProfile,onUpdate:e.updateProfile},null,8,["isAuth","isH5","data","onUpdate"]),Object(N["createElementVNode"])("div",zo,[Object(N["createElementVNode"])("header",{class:"userInfo-header",onClick:t[4]||(t[4]=t=>e.setTab("member"))},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群成员")),1),Object(N["createElementVNode"])("p",null,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.conversation.groupProfile.memberCount)+Object(N["toDisplayString"])(e.$t("TUIChat.manage.人")),1),Fo])]),Object(N["createElementVNode"])("ol",null,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(null===(s=e.userInfo)||void 0===s||null===(r=s.list)||void 0===r?void 0:Fn()(r).call(r,0,e.showUserNum),(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("dl",{key:n},[Object(N["createElementVNode"])("dt",{onClick:n=>e.handleMemberProfileShow(t)},[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===t||void 0===t?void 0:t.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Ko)],8,Yo),Object(N["createElementVNode"])("dd",null,Object(N["toDisplayString"])((null===t||void 0===t?void 0:t.nick)||(null===t||void 0===t?void 0:t.userID)),1)]))),128)),e.isShowAddMember?(Object(N["openBlock"])(),Object(N["createElementBlock"])("dl",Wo,[Object(N["createElementVNode"])("dt",{class:"avatar",onClick:t[5]||(t[5]=t=>e.toggleMask("add"))},"+")])):Object(N["createCommentVNode"])("",!0),"Owner"===e.conversation.groupProfile.selfInfo.role?(Object(N["openBlock"])(),Object(N["createElementBlock"])("dl",qo,[Object(N["createElementVNode"])("dt",{class:"avatar",onClick:t[6]||(t[6]=t=>e.toggleMask("remove"))},"-")])):Object(N["createCommentVNode"])("",!0)])]),Object(N["createElementVNode"])("ul",{class:"content space-top",onClick:t[10]||(t[10]=t=>e.editLableName="")},[Object(N["createElementVNode"])("li",{onClick:t[7]||(t[7]=Object(N["withModifiers"])(t=>e.setTab("notification"),["stop"]))},[Object(N["createElementVNode"])("aside",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群公告")),1),Object(N["createElementVNode"])("article",null,Object(N["toDisplayString"])(e.conversation.groupProfile.notification),1)]),Zo]),e.isAdmin&&e.isSetMuteTime?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:0,onClick:t[8]||(t[8]=Object(N["withModifiers"])(t=>e.setTab("admin"),["stop"]))},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群管理")),1),Xo])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群ID")),1),Object(N["createElementVNode"])("div",Jo,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.conversation.groupProfile.groupID),1),Object(N["createElementVNode"])("i",{class:"icon icon-msg-copy",onClick:t[9]||(t[9]=(...t)=>e.handleGroupIDCopy&&e.handleGroupIDCopy(...t)),title:e.$t("TUIChat.复制")},null,8,Qo)])]),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群头像")),1),Object(N["createElementVNode"])("img",{class:"avatar",src:(null===(l=e.conversation)||void 0===l||null===(c=l.groupProfile)||void 0===c?void 0:c.avatar)||"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,ea)]),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群类型")),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage."+e.typeName[e.conversation.groupProfile.type])),1)]),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.加群方式")),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage."+e.typeName[e.conversation.groupProfile.joinOption])),1)])]),Object(N["createElementVNode"])("ul",ta,["Owner"===e.conversation.groupProfile.selfInfo.role&&(null===(d=e.userInfo)||void 0===d?void 0:d.list.length)>1?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:0,onClick:t[11]||(t[11]=Object(N["withModifiers"])(t=>e.toggleMask("changeOwner"),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIChat.manage.转让群组")),1)):Object(N["createCommentVNode"])("",!0),e.isDismissGroupAuth?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:1,onClick:t[12]||(t[12]=Object(N["withModifiers"])(t=>e.dismiss(e.conversation.groupProfile),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIChat.manage.解散群聊")),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:2,onClick:t[13]||(t[13]=Object(N["withModifiers"])(t=>e.quit(e.conversation.groupProfile),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIChat.manage.退出群组")),1))])])),Object(N["createVNode"])(g,{show:e.mask,"onUpdate:show":t[19]||(t[19]=t=>e.mask=t)},{default:Object(N["withCtx"])(()=>[Object(N["createVNode"])(f,{title:e.$t("TUIChat.manage."+e.transferTitle),list:e.transferList,isSearch:e.isSearch,isRadio:e.isRadio,selectedList:e.selectedList,onSubmit:e.submit,onCancel:e.cancel,onSearch:e.handleSearchMember,isH5:e.isH5},null,8,["title","list","isSearch","isRadio","selectedList","onSubmit","onCancel","onSearch","isH5"])]),_:1},8,["show"]),Object(N["createVNode"])(b,{title:e.$t("TUIChat.manage.删除成员"),show:e.delDialogShow,isH5:e.isH5,center:!0,isHeaderShow:!e.isH5,onSubmit:t[20]||(t[20]=t=>e.handleManage(e.userList,"remove")),"onUpdate:show":t[21]||(t[21]=t=>e.delDialogShow=t)},{default:Object(N["withCtx"])(()=>[1===e.userList.length?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",la,Object(N["toDisplayString"])(e.$t("TUIChat.manage.确定从群聊中删除该成员？")),1)):Object(N["createCommentVNode"])("",!0),e.userList.length>1?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",ca,Object(N["toDisplayString"])(e.$t("TUIChat.manage.确定从群聊中删除所选成员？")),1)):Object(N["createCommentVNode"])("",!0)]),_:1},8,["title","show","isH5","isHeaderShow"])],2)):Object(N["createCommentVNode"])("",!0)])}var ua=n("c52e"),pa=n.n(ua);function ha(e,t,n,o,a,i){return e.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:"mask",onClick:t[0]||(t[0]=Object(N["withModifiers"])((...t)=>e.toggleView&&e.toggleView(...t),["self"]))},[Object(N["renderSlot"])(e.$slots,"default",{},void 0,!0)])):Object(N["createCommentVNode"])("",!0)}var ma=Object(N["defineComponent"])({props:{show:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({show:!1});Object(N["watchEffect"])(()=>{n.show=e.show});const o=()=>{n.show=!n.show,t.emit("update:show",n.show)};return{...Object(N["toRefs"])(n),toggleView:o}}});n("1848");const va=le()(ma,[["render",ha],["__scopeId","data-v-5acb611d"]]);var fa=va;const ga={key:0,class:"transfer-h5-header"},ba={class:"title"},Oa={class:"main"},ya={class:"left"},ja={key:0},Ia=["placeholder"],ka={class:"list"},wa={class:"all"},Ea=["onClick"],Ca=["src"],Ta={class:"name"},_a={key:0},Sa={class:"right"},Da={key:0},Ua={class:"list"},Ma={key:0},Na=["src"],Ba={key:0},Ra=["onClick"];function La(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["transfer",[e.isH5?"transfer-h5":""]])},[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",ga,[Object(N["createElementVNode"])("i",{class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.cancel&&e.cancel(...t))}),Object(N["createElementVNode"])("span",ba,Object(N["toDisplayString"])(e.title),1)])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("main",Oa,[Object(N["createElementVNode"])("div",ya,[e.isSearch?(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",ja,[Object(N["createElementVNode"])("input",{type:"text",onKeyup:t[1]||(t[1]=Object(N["withKeys"])((...t)=>e.handleInput&&e.handleInput(...t),["enter"])),placeholder:e.$t("component.请输入userID"),enterkeyhint:"search"},null,40,Ia)])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("ul",ka,[e.optional.length>1&&!e.isRadio?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:0,class:"list-item",onClick:t[2]||(t[2]=(...t)=>e.selectedAll&&e.selectedAll(...t))},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon",[e.selectedList.length===e.optional.length?"icon-selected":"icon-unselected"]])},null,2),Object(N["createElementVNode"])("span",wa,Object(N["toDisplayString"])(e.$t("component.全选")),1)])):Object(N["createCommentVNode"])("",!0),(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.list,(t,n)=>{var o;return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"list-item",key:n,onClick:n=>e.selected(t)},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon",[(null===t||void 0===t?void 0:t.isDisabled)&&"disabled",_()(o=e.selectedList).call(o,t)>-1?"icon-selected":"icon-unselected"]])},null,2),e.isCustomItem?Object(N["renderSlot"])(e.$slots,"left",{key:1,data:t},void 0,!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],{key:0},[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===t||void 0===t?void 0:t.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Ca),Object(N["createElementVNode"])("span",Ta,Object(N["toDisplayString"])((null===t||void 0===t?void 0:t.nick)||(null===t||void 0===t?void 0:t.userID)),1),null!==t&&void 0!==t&&t.isDisabled?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",_a,"（"+Object(N["toDisplayString"])(e.$t("component.已在群聊中"))+"）",1)):Object(N["createCommentVNode"])("",!0)],64))],8,Ea)}),128))])])]),Object(N["createElementVNode"])("div",Sa,[e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",Da,Object(N["toDisplayString"])(e.title),1)),Object(N["withDirectives"])(Object(N["createElementVNode"])("ul",Ua,[e.selectedList.length>0&&!e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",Ma,Object(N["toDisplayString"])(e.$t("component.已选中"))+Object(N["toDisplayString"])(e.selectedList.length)+Object(N["toDisplayString"])(e.$t("component.人")),1)):Object(N["createCommentVNode"])("",!0),(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.selectedList,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"list-item space-between",key:n},[Object(N["createElementVNode"])("aside",null,[e.isCustomItem?Object(N["renderSlot"])(e.$slots,"right",{key:1,data:t},void 0,!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],{key:0},[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===t||void 0===t?void 0:t.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Na),e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",Ba,Object(N["toDisplayString"])(t.nick||t.userID),1))],64))]),e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-cancel",onClick:n=>e.selected(t)},null,8,Ra))]))),128))],512),[[N["vShow"],e.resultShow]]),Object(N["createElementVNode"])("footer",null,[Object(N["createElementVNode"])("button",{class:"btn btn-cancel",onClick:t[3]||(t[3]=(...t)=>e.cancel&&e.cancel(...t))},Object(N["toDisplayString"])(e.$t("component.取消")),1),e.selectedList.length>0?(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:0,class:"btn",onClick:t[4]||(t[4]=(...t)=>e.submit&&e.submit(...t))},Object(N["toDisplayString"])(e.$t("component.完成")),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:1,class:"btn btn-no",onClick:t[5]||(t[5]=(...t)=>e.submit&&e.submit(...t))},Object(N["toDisplayString"])(e.$t("component.完成")),1))])])])],2)}var Va=Object(N["defineComponent"])({props:{list:{type:Array,default:()=>[]},selectedList:{type:Array,default:()=>[]},isSearch:{type:Boolean,default:()=>!0},isRadio:{type:Boolean,default:()=>!1},isCustomItem:{type:Boolean,default:()=>!1},title:{type:String,default:()=>""},type:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},resultShow:{type:Boolean,default:()=>!0}},setup(e,t){const n=Object(N["reactive"])({type:"",list:[],selectedList:[],isSearch:!0,isCustomItem:!1,title:""});Object(N["watchEffect"])(()=>{if(e.isCustomItem)for(let a=0;a<e.list.length;a++){var t,o;if(_()(t=e.list[a].conversationID).call(t,"@TIM#SYSTEM")>-1)C()(o=e.list).call(o,a,1);n.list=e.list}else n.list=e.list;n.selectedList=e.selectedList,n.isSearch=e.isSearch,n.isCustomItem=e.isCustomItem,n.title=e.title,n.type=e.type});const o=Object(N["computed"])(()=>{var e;return y()(e=n.list).call(e,e=>!e.isDisabled)}),a=e=>{t.emit("search",e.target.value)},i=t=>{if(t.isDisabled)return;let o=n.selectedList;const a=_()(o).call(o,t);var i;if(a>-1)return C()(i=n.selectedList).call(i,a,1);e.isRadio&&(o=[]),o.push(t),n.selectedList=o},s=()=>{n.selectedList.length===o.value.length?n.selectedList=[]:n.selectedList=[...o.value]},r=()=>{t.emit("submit",n.selectedList)},l=()=>{t.emit("cancel")};return{...Object(N["toRefs"])(n),optional:o,handleInput:a,selected:i,selectedAll:s,submit:r,cancel:l}}});n("dc3f");const xa=le()(Va,[["render",La],["__scopeId","data-v-88c982be"]]);var Pa=xa;const Aa=e=>(Object(N["pushScopeId"])("data-v-759db46f"),e=e(),Object(N["popScopeId"])(),e),Ga=Aa(()=>Object(N["createElementVNode"])("span",{class:"slider-block"},null,-1)),Ha=[Ga];function $a(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["slider-box",[e.open&&"slider-open"]]),onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))},Ha,2)}var za=Object(N["defineComponent"])({props:{open:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({open:!1});Object(N["watchEffect"])(()=>{n.open=e.open});const o=()=>{n.open=!n.open,t.emit("change",n.open)};return{...Object(N["toRefs"])(n),toggle:o}}});n("2b91");const Fa=le()(za,[["render",$a],["__scopeId","data-v-759db46f"]]);var Ya=Fa;const Ka={class:"name"},Wa={key:0,class:"edit-h5-header"},qa={class:"left"},Za={class:"input-box"},Xa={key:1},Ja={key:1,class:"edit-h5-footer"},Qa=["disabled"],ei={key:0,class:"icon icon-edit"};function ti(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Ka,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.群名称")),1),e.isEdit?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])([e.isH5?"edit-h5":""]),ref:"dialog"},[Object(N["createElementVNode"])("main",null,[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",Wa,[Object(N["createElementVNode"])("aside",qa,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.修改群聊名称")),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.manage.修改群聊名称后，将在群内通知其他成员")),1)]),Object(N["createElementVNode"])("span",{class:"close",onClick:t[0]||(t[0]=(...t)=>e.toggleEdit&&e.toggleEdit(...t))},Object(N["toDisplayString"])(e.$t("关闭")),1)])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("div",Za,[e.isEdit?Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:0,class:"input","onUpdate:modelValue":t[1]||(t[1]=t=>e.input=t),type:"text",onKeyup:t[2]||(t[2]=Object(N["withKeys"])((...t)=>e.updateProfile&&e.updateProfile(...t),["enter"]))},null,544)),[[N["vModelText"],e.input]]):Object(N["createCommentVNode"])("",!0),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",Xa,Object(N["toDisplayString"])(e.$t("TUIChat.manage.仅限中文、字母、数字和下划线，2-20个字")),1)):Object(N["createCommentVNode"])("",!0)]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("footer",Ja,[Object(N["createElementVNode"])("button",{class:"btn",disabled:!e.input,onClick:t[3]||(t[3]=(...t)=>e.updateProfile&&e.updateProfile(...t))},Object(N["toDisplayString"])(e.$t("确认")),9,Qa)])):Object(N["createCommentVNode"])("",!0)])],2)):Object(N["createCommentVNode"])("",!0),!e.isEdit||e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",{key:1,onClick:t[4]||(t[4]=(...t)=>e.toggleEdit&&e.toggleEdit(...t))},[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.groupProfile.name),1),e.isAuth?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",ei)):Object(N["createCommentVNode"])("",!0)])):Object(N["createCommentVNode"])("",!0)])}const ni=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},isAuth:{type:Boolean,default:!1},isH5:{type:Boolean,default:!1}},setup(e,t){const n=Object(N["reactive"])({groupProfile:{},input:"",isEdit:!1});Object(N["watchEffect"])(()=>{n.groupProfile=e.data});const o=Object(N["ref"])();Object(pn["onClickOutside"])(o,()=>{n.isEdit=!1});const a=async()=>{n.input&&n.input!==n.groupProfile.name&&(t.emit("update",{key:"name",value:n.input}),n.groupProfile.name=n.input,n.input=""),i()},i=async()=>{e.isAuth&&(n.isEdit=!n.isEdit),n.isEdit&&(n.input=n.groupProfile.name)};return{...Object(N["toRefs"])(n),updateProfile:a,toggleEdit:i,dialog:o}}});var oi=ni;n("ae10");const ai=le()(oi,[["render",ti],["__scopeId","data-v-33cc130c"]]);var ii=ai;const si={class:"notification"},ri={key:1},li={key:0},ci={key:1},di={key:2};function ui(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("main",si,[e.isEdit?Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("textarea",{key:0,"onUpdate:modelValue":t[0]||(t[0]=t=>e.input=t),onKeyup:t[1]||(t[1]=Object(N["withKeys"])((...t)=>e.updateProfile&&e.updateProfile(...t),["enter"]))},null,544)),[[N["vModelText"],e.input]]):(Object(N["openBlock"])(),Object(N["createElementBlock"])("section",ri,[e.groupProfile.notification?(Object(N["openBlock"])(),Object(N["createElementBlock"])("article",ci,Object(N["toDisplayString"])(e.groupProfile.notification),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",li,Object(N["toDisplayString"])(e.$t("TUIChat.manage.暂无公告")),1))])),e.isAuth?(Object(N["openBlock"])(),Object(N["createElementBlock"])("footer",di,[e.isEdit?(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:0,class:"btn",onClick:t[2]||(t[2]=(...t)=>e.updateProfile&&e.updateProfile(...t))},Object(N["toDisplayString"])(e.$t("TUIChat.manage.发布")),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:1,class:"btn",onClick:t[3]||(t[3]=t=>e.isEdit=!e.isEdit)},Object(N["toDisplayString"])(e.$t("TUIChat.manage.编辑")),1))])):Object(N["createCommentVNode"])("",!0)])}const pi=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},isAuth:{type:Boolean,default:!1}},setup(e,t){const n=Object(N["reactive"])({groupProfile:{},input:"",isEdit:!1});Object(N["watchEffect"])(()=>{n.groupProfile=e.data,n.input=n.groupProfile.notification});const o=async()=>{n.input&&n.input!==n.groupProfile.notification&&(t.emit("update",{key:"notification",value:n.input}),n.groupProfile.notification=n.input,n.input=""),n.isEdit=!n.isEdit};return{...Object(N["toRefs"])(n),updateProfile:o}}});var hi=pi;n("c548");const mi=le()(hi,[["render",ui],["__scopeId","data-v-30b370b1"]]);var vi=mi;const fi={class:"member"},gi={class:"list"},bi=["onClick"],Oi=["src"],yi={class:"name"},ji=["onClick"];function Ii(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("main",fi,[Object(N["createElementVNode"])("ul",gi,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.list,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"list-item",key:n},[Object(N["createElementVNode"])("aside",{onClick:n=>e.handleMemberProfileShow(t)},[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===t||void 0===t?void 0:t.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Oi),Object(N["createElementVNode"])("span",yi,Object(N["toDisplayString"])((null===t||void 0===t?void 0:t.nick)||(null===t||void 0===t?void 0:t.userID)),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.handleRoleName(t)),1)],8,bi),"Owner"!==t.role&&e.isShowDel?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-del",onClick:n=>e.submit(t)},null,8,ji)):Object(N["createCommentVNode"])("",!0)]))),128)),e.list.length<e.total?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:0,class:"list-item",onClick:t[0]||(t[0]=(...t)=>e.getMore&&e.getMore(...t))},Object(N["toDisplayString"])(e.$t("TUIChat.manage.查看更多")),1)):Object(N["createCommentVNode"])("",!0)])])}var ki=n("e23e"),wi=n.n(ki);const Ei=Object(N["defineComponent"])({components:{},props:{list:{type:Array,default:()=>[]},total:{type:Number,default:()=>0},isShowDel:{type:Boolean,default:()=>!1},self:{type:Object,default:()=>({})}},setup(e,t){const n=wi.a.TYPES,o=Object(N["reactive"])({total:0,list:[],isShowDel:!1,self:{}});Object(N["watchEffect"])(()=>{o.total=e.total,o.isShowDel=e.isShowDel,o.list=e.list,o.self=e.self});const a=e=>{const{t:t}=window.TUIKitTUICore.config.i18n.useI18n();let a="";switch(null===e||void 0===e?void 0:e.role){case n.GRP_MBR_ROLE_ADMIN:a=t("TUIChat.manage.管理员");break;case n.GRP_MBR_ROLE_OWNER:a=t("TUIChat.manage.群主");break}return a&&(a=`(${a})`),e.userID===o.self.userID&&(a+=` (${t("TUIChat.manage.我")})`),a},i=()=>{t.emit("more")},s=e=>{t.emit("del",[e])},r=e=>{t.emit("handleMemberProfileShow",e)};return{...Object(N["toRefs"])(o),getMore:i,submit:s,handleRoleName:a,handleMemberProfileShow:r}}});var Ci=Ei;n("cb8a");const Ti=le()(Ci,[["render",Ii],["__scopeId","data-v-806f1058"]]);var _i=Ti;const Si=e=>(Object(N["pushScopeId"])("data-v-29f6ea36"),e=e(),Object(N["popScopeId"])(),e),Di={class:"memeber-profile"},Ui={class:"memeber-profile-main"},Mi=["src"],Ni={class:"list"},Bi=Si(()=>Object(N["createElementVNode"])("label",null,"ID：",-1)),Ri={class:"memeber-profile-footer"};function Li(e,t,n,o,a,i){var s,r,l,c,d;return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Di,[Object(N["createElementVNode"])("div",Ui,[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===(s=e.userInfo)||void 0===s?void 0:s.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Mi),Object(N["createElementVNode"])("ul",Ni,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])((null===(r=e.userInfo)||void 0===r?void 0:r.nick)||(null===(l=e.userInfo)||void 0===l?void 0:l.userID)),1),Object(N["createElementVNode"])("li",null,[Bi,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(c=e.userInfo)||void 0===c?void 0:c.userID),1)]),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.个性签名"))+"：",1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(d=e.userInfo)||void 0===d?void 0:d.selfSignature),1)])])]),Object(N["createElementVNode"])("div",Ri,[e.showEnter()?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:"button",onClick:t[0]||(t[0]=t=>{var n;return e.enter(null===(n=e.userInfo)||void 0===n?void 0:n.userID,"C2C")})},Object(N["toDisplayString"])(e.$t("TUIContact.发送消息")),1)):Object(N["createCommentVNode"])("",!0)])])}const Vi=Object(N["defineComponent"])({props:{userInfo:{type:Object,default:()=>({})}},setup(e,t){const n=null===Xi||void 0===Xi?void 0:Xi.TUIServer,o=Object(N["reactive"])({isFriendShip:!1,userInfo:{},self:{}});Object(N["watchEffect"])(()=>{o.self=e.self}),Object(N["watch"])(()=>e.userInfo,async(t,a)=>{var s;if(t===a)return;const r=await n.getUserProfile([null===e||void 0===e||null===(s=e.userInfo)||void 0===s?void 0:s.userID]);o.userInfo=null===r||void 0===r?void 0:r.data[0],i()},{deep:!0,immediate:!0});const a=async(e,t)=>{const o=`${t}${e}`;n.TUICore.TUIServer.TUIConversation.getConversationProfile(o).then(e=>{n.TUICore.TUIServer.TUIConversation.handleCurrentConversation(e.data.conversation)})},i=async()=>{if(!o.userInfo.userID)return;const e=await n.checkFriend(o.userInfo.userID,Yn["a"].TYPES.SNS_CHECK_TYPE_BOTH);o.isFriendShip=e===Yn["a"].TYPES.SNS_TYPE_BOTH_WAY},s=()=>{var e;return o.isFriendShip||!(null!==n&&void 0!==n&&null!==(e=n.TUICore)&&void 0!==e&&e.isOfficial)};return{...Object(N["toRefs"])(o),enter:a,showEnter:s}}});var xi=Vi;n("fe1e");const Pi=le()(xi,[["render",Li],["__scopeId","data-v-29f6ea36"]]);var Ai=Pi;const Gi={key:0},Hi={class:"dialog-main-content"},$i={key:1};function zi(e,t,n,o,a,i){return e.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["dialog",[e.isH5?"dialog-h5":"",e.center?"center":""]]),onClick:t[3]||(t[3]=Object(N["withModifiers"])((...t)=>e.toggleView&&e.toggleView(...t),["self"]))},[Object(N["createElementVNode"])("main",{class:"dialog-main",style:Object(N["normalizeStyle"])(!e.background&&{background:"none"})},[e.isHeaderShow?(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",Gi,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.title),1),Object(N["createElementVNode"])("i",{class:"icon icon-close",onClick:t[0]||(t[0]=(...t)=>e.toggleView&&e.toggleView(...t))})])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("div",Hi,[Object(N["renderSlot"])(e.$slots,"default",{},void 0,!0)]),e.isFooterShow?(Object(N["openBlock"])(),Object(N["createElementBlock"])("footer",$i,[Object(N["createElementVNode"])("button",{class:"btn btn-cancel",onClick:t[1]||(t[1]=(...t)=>e.toggleView&&e.toggleView(...t))},Object(N["toDisplayString"])(e.$t("component.取消")),1),Object(N["createElementVNode"])("button",{class:"btn btn-default",onClick:t[2]||(t[2]=(...t)=>e.submit&&e.submit(...t))},Object(N["toDisplayString"])(e.$t("component.确定")),1)])):Object(N["createCommentVNode"])("",!0)],4)],2)):Object(N["createCommentVNode"])("",!0)}var Fi=Object(N["defineComponent"])({props:{show:{type:Boolean,default:()=>!1},isHeaderShow:{type:Boolean,default:()=>!0},isFooterShow:{type:Boolean,default:()=>!0},background:{type:Boolean,default:()=>!0},title:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},center:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({show:!1,isHeaderShow:!0,isFooterShow:!0,background:!0,title:""});Object(N["watchEffect"])(()=>{n.show=e.show,n.title=e.title,n.isHeaderShow=e.isHeaderShow,n.isFooterShow=e.isFooterShow,n.background=e.background});const o=()=>{n.show=!n.show,t.emit("update:show",n.show)},a=()=>{t.emit("submit"),o()};return{...Object(N["toRefs"])(n),toggleView:o,submit:a}}});n("606b");const Yi=le()(Fi,[["render",zi],["__scopeId","data-v-087d9968"]]);var Ki=Yi;const Wi=Object(N["defineComponent"])({components:{Mask:fa,Transfer:Pa,Slider:Ya,ManageName:ii,ManageNotification:vi,ManageMember:_i,MemeberProfile:Ai,Dialog:Ki},props:{userInfo:{type:Object,default:()=>({isGroup:!1,list:[]})},conversation:{type:Object,default:()=>({})},show:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){var n,o;const a=Wi.TUIServer.TUICore.TIM.TYPES,{GroupServer:i}=Wi,{t:s}=Wi.TUIServer.TUICore.config.i18n.useI18n(),r=Object(N["reactive"])({conversation:{},userInfo:{isGroup:!1,list:[]},isShowMuteTimeInput:!1,editLableName:"",mask:!1,currentTab:"",transferType:"",isSearch:!1,isRadio:!1,transferList:[],selectedList:[],isMuteTime:!1,show:!1,typeName:{[a.GRP_WORK]:"好友工作群",[a.GRP_PUBLIC]:"陌生人社交群",[a.GRP_MEETING]:"临时会议群",[a.GRP_AVCHATROOM]:"直播群",[a.JOIN_OPTIONS_FREE_ACCESS]:"自由加入",[a.JOIN_OPTIONS_NEED_PERMISSION]:"需要验证",[a.JOIN_OPTIONS_DISABLE_APPLY]:"禁止加群"},delDialogShow:!1,userList:[],transferTitle:"",member:{admin:[],member:[],muteMember:[]},currentMember:{}}),c=Object(N["ref"])();Object(N["watchEffect"])(()=>{r.conversation=e.conversation,r.userInfo=e.userInfo,r.show=e.show});const d=(null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o?void 0:o.isOfficial)&&(null===Yt["b"]||void 0===Yt["b"]?void 0:Yt["b"].useStore())||{},u=Object(N["computed"])(()=>{let e="";switch(r.currentTab){case"notification":e="群公告";break;case"member":e="群成员";break;case"profile":e="群成员";break;default:e="群管理";break}return e});Object(N["watch"])(()=>r.userInfo.list,(e,t)=>{r.member={admin:[],member:[],muteMember:[]},l()(e).call(e,e=>{switch(null===e||void 0===e?void 0:e.role){case a.GRP_MBR_ROLE_ADMIN:r.member.admin.push(e);break;case a.GRP_MBR_ROLE_MEMBER:r.member.member.push(e);break;default:break}return e});const n=(new Date).getTime();r.member.muteMember=y()(e).call(e,e=>1e3*(null===e||void 0===e?void 0:e.muteUntil)-n>0)},{deep:!0});const p=Object(N["computed"])(()=>{var e,t;const{conversation:n}=r,o=null===n||void 0===n||null===(e=n.groupProfile)||void 0===e?void 0:e.selfInfo.role,i=null===n||void 0===n||null===(t=n.groupProfile)||void 0===t?void 0:t.type,s=o===a.GRP_MBR_ROLE_OWNER,l=i===a.GRP_WORK;return s&&!l}),h=Object(N["computed"])(()=>{var e;const{conversation:t}=r,n=null===t||void 0===t||null===(e=t.groupProfile)||void 0===e?void 0:e.type,o=n===a.GRP_WORK;return!!o}),m=Object(N["computed"])(()=>{let e=3;return h.value||(e+=1),"Owner"!==r.conversation.groupProfile.selfInfo.role&&(e+=1),e}),v=Object(N["computed"])(()=>{var e;const{conversation:t}=r,n=null===t||void 0===t||null===(e=t.groupProfile)||void 0===e?void 0:e.selfInfo.role,o=n===a.GRP_MBR_ROLE_OWNER,i=n===a.GRP_MBR_ROLE_ADMIN;return o||i}),f=Object(N["computed"])(()=>{var e,t;const{conversation:n}=r,o=null===n||void 0===n||null===(e=n.groupProfile)||void 0===e?void 0:e.type,i=null===n||void 0===n||null===(t=n.groupProfile)||void 0===t?void 0:t.selfInfo.role,s=i===a.GRP_MBR_ROLE_OWNER,l=o===a.GRP_WORK,c=o===a.GRP_AVCHATROOM;return!(l||c||!s)}),g=Object(N["computed"])(()=>{var e;const{conversation:t}=r,n=null===t||void 0===t||null===(e=t.groupProfile)||void 0===e?void 0:e.type,o=n===a.GRP_WORK;return!(o||!v.value)}),b=e=>{var t;const{conversation:n}=r,o={groupID:null===n||void 0===n||null===(t=n.groupProfile)||void 0===t?void 0:t.groupID,count:100,offset:e&&"more"===e?r.userInfo.list.length:0};i.getGroupMemberList(o).then(t=>{r.userInfo.list=e&&"more"===e?[...r.userInfo.list,...t.data.memberList]:t.data.memberList})},O=async e=>{const{conversation:t}=r,n={groupID:t.groupProfile.groupID,userIDList:e};await i.addGroupMember(n),b("More")},j=e=>{const{conversation:t}=r,n={groupID:t.groupProfile.groupID,userIDList:[e.userID]};i.deleteGroupMember(n)},I=async e=>{const t={groupID:r.conversation.groupProfile.groupID,newOwnerID:e},n=await i.changeGroupOwner(t);r.conversation.groupProfile={},r.conversation.groupProfile=n.data.group},k=async e=>{await i.quitGroup(e.groupID),Wi.TUIServer.store.conversation={}},w=async e=>{var t,n;await i.dismissGroup(e.groupID),Wi.TUIServer.store.conversation={},(null===(t=window)||void 0===t||null===(n=t.TUIKitTUICore)||void 0===n?void 0:n.isOfficial)&&(null===d||void 0===d?void 0:d.commit)&&(null===d||void 0===d||d.commit("handleTask",5))},E=async e=>{const{conversation:t}=r;let n="";switch(e.role){case a.GRP_MBR_ROLE_ADMIN:n=a.GRP_MBR_ROLE_MEMBER;break;case a.GRP_MBR_ROLE_MEMBER:n=a.GRP_MBR_ROLE_ADMIN;break}const o={groupID:t.groupProfile.groupID,userID:e.userID,role:n};await i.setGroupMemberRole(o),b()},C=async(e,t)=>{const{conversation:n}=r,o={groupID:n.groupProfile.groupID,userID:e,muteTime:"add"===t?2592e3:0};var a,s;(await i.setGroupMemberMuteTime(o),"add"===t)&&((null===(a=window)||void 0===a||null===(s=a.TUIKitTUICore)||void 0===s?void 0:s.isOfficial)&&(null===d||void 0===d?void 0:d.commit)&&(null===d||void 0===d||d.commit("handleTask",4)));b()},T=async e=>{const{conversation:t}=r,n={groupID:t.groupProfile.groupID,userIDList:e,reason:""};await i.deleteGroupMember(n),b()},_=e=>{r.editLableName=e},S=async e=>{const{key:t,value:n}=e,o={groupID:r.conversation.groupProfile.groupID,[t]:n},a=await i.updateGroupProfile(o),{conversation:s}=Wi.TUIServer.store;s.groupProfile=a.data.group,Wi.TUIServer.store.conversation={},Wi.TUIServer.store.conversation=s,r.editLableName=""},D=e=>{r.currentTab=e,r.editLableName="","member"===r.currentTab&&(r.transferType="remove"),r.currentTab||(r.transferType="")},U=async t=>{let n={},o={};const a={groupID:r.conversation.groupProfile.groupID,userIDList:[t]};switch(r.transferType){case"add":try{var c,d,u,p;if(o=await i.getGroupMemberProfile(a),r.transferList=y()(c=r.transferList).call(c,e=>{var t;return e.userID!==(null===(t=n.data[0])||void 0===t?void 0:t.userID)}),r.transferList=[...r.transferList,...n.data],(null===(d=o)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.memberList.length)>0)r.transferList=l()(p=r.transferList).call(p,e=>{var t,n;return e.userID===(null===(t=o)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.memberList[0].userID)&&(e.isDisabled=!0),e})}catch(f){const t=s("TUIChat.manage.该用户不存在");Object(hn["b"])(t,e)}break;case"remove":try{var h,m,v;if(n=await i.getGroupMemberProfile(a),0===n.data.memberList.length){const t=s("TUIChat.manage.该用户不在群组内");return Object(hn["b"])(t,e)}r.transferList=y()(h=r.transferList).call(h,e=>{var t,o,a;return e.userID!==(null===(t=n)||void 0===t||null===(o=t.data)||void 0===o||null===(a=o.memberList[0])||void 0===a?void 0:a.userID)}),r.transferList=[...r.transferList,...null===(m=n)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.memberList]}catch(f){const t=s("TUIChat.manage.该用户不存在");Object(hn["b"])(t,e)}break;default:break}},M=e=>{"remove"===r.transferType?(r.userList=e,r.delDialogShow=!r.delDialogShow):P(e,r.transferType),r.mask=!1},B=async()=>{var e;const t=await Wi.TUIServer.getFriendList(),n=l()(e=t.data).call(e,e=>null===e||void 0===e?void 0:e.profile);return y()(n).call(n,e=>{var t;return!pa()(t=r.userInfo.list).call(t,t=>t.userID===e.userID)})},R=()=>{L()},L=async e=>{var t;switch(r.selectedList=[],e){case"add":r.isRadio=!1,r.transferList=await B(),r.transferTitle="添加成员";break;case"remove":r.isRadio=!1,r.transferList=y()(t=r.userInfo.list).call(t,e=>{var t,n;return e.userID!==(null===(t=r.conversation)||void 0===t||null===(n=t.groupProfile)||void 0===n?void 0:n.selfInfo.userID)}),r.transferTitle="删除成员";break;case"addAdmin":r.isRadio=!0,r.transferList=r.member.member,r.transferTitle="新增管理员";break;case"removeAdmin":r.isRadio=!0,r.transferList=r.member.admin,r.transferTitle="移除管理员";break;case"changeOwner":r.isRadio=!0,r.transferList=[...r.member.admin,...r.member.member],r.transferTitle="转让群组";break;case"addMute":r.isRadio=!0,r.transferList=r.member.member,"Owner"===r.conversation.groupProfile.selfInfo.role&&(r.transferList=[...r.member.admin,...r.member.member]),r.transferTitle="新增禁言用户";break;case"removeMute":r.isRadio=!0,r.transferList=r.member.muteMember,r.transferTitle="移除禁言用户";break;default:break}r.transferType=e,r.mask=!r.mask};Object(pn["onClickOutside"])(c,()=>{r.show=!1});const V=()=>{if(!i){const t=s("TUIChat.manage.请先注册 TUIGroup 模块");return Object(hn["b"])(t,e)}r.show=!r.show,r.show||(r.currentTab=""),r.show&&(b(),Ft.getInstance().reportEvent({name:"showGroupManage",ext1:"showGroupManage"}))},x=e=>{var t,n;S({key:"muteAllMembers",value:e}),(null===(t=window)||void 0===t||null===(n=t.TUIKitTUICore)||void 0===n?void 0:n.isOfficial)&&(null===d||void 0===d?void 0:d.commit)&&(null===d||void 0===d||d.commit("handleTask",4))},P=(e,t)=>{const n=[];switch(l()(e).call(e,e=>(n.push(e.userID),e)),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupOptions"}),t){case"add":O(n),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupAddMember"});break;case"remove":T(n),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupRemoveMember"});break;case"addAdmin":E(e[0]),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupAddAdmin"});break;case"removeAdmin":E(e[0]),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupRemoveAdmin"});break;case"changeOwner":I(n[0]),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupChangeOwner"});break;case"addMute":C(n[0],"add"),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupAddMute"});break;case"removeMute":C(n[0],"remove"),Ft.getInstance().reportEvent({name:"groupOptions",ext1:"groupRemoveMute"});break;default:break}},A=async()=>{try{var e,t;const{toClipboard:n}=Object(So["a"])();await n(null===r||void 0===r||null===(e=r.conversation)||void 0===e||null===(t=e.groupProfile)||void 0===t?void 0:t.groupID)}catch(n){Object(hn["b"])(n,r.env)}},G=e=>{r.currentMember=e,D("profile")};return{...Object(N["toRefs"])(r),isDismissGroupAuth:p,isShowAddMember:h,isSetMuteTime:g,isAdmin:f,isAuth:v,addMember:O,deleteMember:j,changeOwner:I,quit:k,dismiss:w,handleAdmin:E,setMemberMuteTime:C,kickedOut:T,edit:_,updateProfile:S,setTab:D,TabName:u,getMember:b,handleSearchMember:U,submit:M,cancel:R,toggleMask:L,toggleShow:V,setAllMuteTime:x,handleManage:P,showUserNum:m,dialog:c,handleGroupIDCopy:A,handleMemberProfileShow:G}}});var qi=Wi;n("5392");const Zi=le()(qi,[["render",da],["__scopeId","data-v-f731557c"]]);var Xi=Zi;const Ji={product:{label:"产品文档",url:"https://cloud.tencent.com/document/product/269/1499#.E7.BE.A4.E7.BB.84.E5.8A.9F.E8.83.BD"},customMessage:{label:"自定义消息",url:"https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#createCustomMessage"},complaint:{label:"点此投诉",url:"https://cloud.tencent.com/apply/p/xc3oaubi98g"},implement:{label:"集成TUICallKit",url:"https://cloud.tencent.com/document/product/269/79861"},purchase:{label:"开通腾讯实时音视频服务",url:"https://cloud.tencent.com/document/product/1640/79968"}};var Qi=Ji,es=n("505e"),ts=n.n(es),ns=n("a4fc"),os=n.n(ns),as=n("5202"),is=n("41b5"),ss=n("ec4e"),rs=n("600a"),ls=n("2c34"),cs=n("cfd7"),ds=n("36f7"),us=n("1ad4"),ps=ds["a"].extend({name:"custom-image",addAttributes(){return{...ds["a"].config.addAttributes(),class:{default:"image",rendered:!1}}},addCommands(){return{setImage:e=>({tr:t,commands:n})=>{var o,a,i;return"custom-image"==(null===(o=t.selection)||void 0===o||null===(a=o.node)||void 0===a||null===(i=a.type)||void 0===i?void 0:i.name)?n.updateAttributes("custom-image",e):n.insertContent({type:this.name,attrs:e})}}},renderHTML({node:e,HTMLAttributes:t}){return t.class="custom-image-"+e.attrs.class,["img",Object(us["h"])(this.options.HTMLAttributes,t)]}});const hs={class:"memberList",ref:"dialog"},ms={key:0,class:"memberList-title"},vs={class:"title"},fs={class:"memberList-box"},gs=["onClick"],bs=["src"];function Os(e,t,n,o,a,i){return e.showAtList?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["message-input-at",[e.isH5&&"message-input-at-h5"]]),ref:"MessageInputAt"},[Object(N["createElementVNode"])("div",hs,[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",ms,[Object(N["createElementVNode"])("span",vs,Object(N["toDisplayString"])(e.$t("TUIChat.选择提醒的人")),1),Object(N["createElementVNode"])("i",{class:"icon icon-close close",onClick:t[0]||(t[0]=(...t)=>e.closeAt&&e.closeAt(...t))})])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("ul",fs,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.showMemberList,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:Object(N["normalizeClass"])(["memberList-box-body",[n===e.selectedIndex&&"selected"]]),key:n,onClick:t=>e.selectItem(n),ref_for:!0,ref:"memberListItems"},[Object(N["createElementVNode"])("img",{src:(null===t||void 0===t?void 0:t.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png"},null,8,bs),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null!==t&&void 0!==t&&t.nick?null===t||void 0===t?void 0:t.nick:null===t||void 0===t?void 0:t.userID),1)],10,gs))),128))])],512)],2)):Object(N["createCommentVNode"])("",!0)}var ys=n("703d"),js=n.n(ys);const Is=Object(N["ref"])(),ks=Object(N["ref"])(!1),ws=Object(N["ref"])(),Es=Object(N["ref"])(),Cs=Object(N["ref"])({left:0,top:0}),Ts=Object(N["ref"])(),_s=Object(N["ref"])(0),Ss=Object(N["ref"])(),Ds=Object(N["ref"])(!1),Us=()=>({allowedPrefixes:null,items:e=>{var t;const n=null===ws||void 0===ws||null===(t=ws.value)||void 0===t?void 0:y()(t).call(t,t=>{var n,o,a,i,s,r;return(null===t||void 0===t||null===(n=t.nick)||void 0===n||null===(o=n.toLowerCase())||void 0===o?void 0:os()(o).call(o,null===e||void 0===e||null===(a=e.query)||void 0===a?void 0:a.toLowerCase()))||(null===t||void 0===t||null===(i=t.userID)||void 0===i||null===(s=i.toLowerCase())||void 0===s?void 0:os()(s).call(s,null===e||void 0===e||null===(r=e.query)||void 0===r?void 0:r.toLowerCase()))});return Es.value=null!==n&&void 0!==n&&n.length?n:ws.value,Es.value},render:()=>({onStart:e=>{if(ks.value=!0,null===e||void 0===e||!e.clientRect)return;const t=null===e||void 0===e?void 0:e.clientRect();null!==t&&void 0!==t&&t.left&&null!==t&&void 0!==t&&t.top&&!Ds.value&&(Cs.value={left:null===t||void 0===t?void 0:t.left,top:null===t||void 0===t?void 0:t.top}),Ts.value=e.command},onUpdate(e){if(null===e||void 0===e||!e.clientRect)return;const t=null===e||void 0===e?void 0:e.clientRect();null!==t&&void 0!==t&&t.left&&null!==t&&void 0!==t&&t.top&&!Ds.value&&(Cs.value={left:null===t||void 0===t?void 0:t.left,top:null===t||void 0===t?void 0:t.top})},onKeyDown(e){var t,n;"Enter"===e.event.key&&(null===(t=e.event)||void 0===t||t.stopPropagation(),null===(n=e.event)||void 0===n||n.preventDefault());return"Escape"===e.event.key?(ks.value=!1,Es.value=ws.value,!0):"ArrowUp"===(null===e||void 0===e?void 0:e.event.key)?(Ms(),!0):"ArrowDown"===(null===e||void 0===e?void 0:e.event.key)?(Ns(),!0):"Enter"===(null===e||void 0===e?void 0:e.event.key)&&(Bs(),!0)},onExit(e){ks.value=!1,Es.value=ws.value,Cs.value={left:0,top:0}}})}),Ms=()=>{var e,t,n,o;null!==Es&&void 0!==Es&&null!==(e=Es.value)&&void 0!==e&&e.length&&(_s.value=(_s.value+(null===Es||void 0===Es||null===(t=Es.value)||void 0===t?void 0:t.length)-1)%(null===Es||void 0===Es||null===(n=Es.value)||void 0===n?void 0:n.length),null===Ss||void 0===Ss||null===(o=Ss.value[_s.value])||void 0===o||o.scrollIntoView(!1))},Ns=()=>{var e,t,n;null!==Es&&void 0!==Es&&null!==(e=Es.value)&&void 0!==e&&e.length&&(_s.value=(_s.value+1)%(null===Es||void 0===Es||null===(t=Es.value)||void 0===t?void 0:t.length),null===Ss||void 0===Ss||null===(n=Ss.value[_s.value])||void 0===n||n.scrollIntoView(!1))},Bs=()=>{Rs(_s.value)},Rs=e=>{var t;if(null===ws||void 0===ws||null===(t=ws.value)||void 0===t||!t.length)return;const n=null===ws||void 0===ws?void 0:ws.value[e];n&&Ts.value&&Ts.value({id:null===n||void 0===n?void 0:n.userID,label:(null===n||void 0===n?void 0:n.nick)||(null===n||void 0===n?void 0:n.userID)})},Ls=Object(N["defineComponent"])({props:{memberList:{type:Array,default:()=>[]},isGroup:{type:Boolean,default:!1},selfInfo:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},setup(e){const{memberList:t,isGroup:n,selfInfo:o}=Object(N["toRefs"])(e),a={userID:Yn["a"].TYPES.MSG_AT_ALL,nick:"所有人",isAll:!0,avatar:js.a},i=Object(N["ref"])();Object(N["watchEffect"])(()=>{ks.value=ks.value&&n.value,Ds.value=e.isH5}),Object(N["watch"])(()=>t.value,()=>{var e,n,i;null!==t&&void 0!==t&&null!==(e=t.value[0])&&void 0!==e&&e.isAll||(null===t||void 0===t||null===(i=t.value)||void 0===i||i.unshift(a));const s=null===t||void 0===t||null===(n=t.value)||void 0===n?void 0:y()(n).call(n,e=>{var t;return(null===e||void 0===e?void 0:e.userID)!==(null===o||void 0===o||null===(t=o.value)||void 0===t?void 0:t.userID)});ws.value=s,Es.value=s},{deep:!0,immediate:!0}),Object(N["watch"])(()=>[Cs.value,null===Is||void 0===Is?void 0:Is.value],()=>{var e;!Ds.value&&null!==Is&&void 0!==Is&&Is.value&&null!==Is&&void 0!==Is&&null!==(e=Is.value)&&void 0!==e&&e.style&&(Is.value.style.left=Cs.value.left+"px",Is.value.style.top=Cs.value.top-Is.value.clientHeight+"px")},{deep:!0,immediate:!0});const s=()=>{ks.value=!1,Es.value=ws.value,Cs.value={left:0,top:0}};return Object(pn["onClickOutside"])(i,()=>{s()}),{selectedIndex:_s,selectItem:Rs,showAtList:ks,closeAt:s,showMemberList:Es,allMemberList:ws,MessageInputAt:Is,memberListItems:Ss,dialog:i}}});var Vs=Ls;n("4712");const xs=le()(Vs,[["render",Os],["__scopeId","data-v-29169fdf"]]);var Ps=xs,As=Object(N["defineComponent"])({__name:"message-input-editor",props:{placeholder:{type:String,default:"this is placeholder"},replayOrReferenceMessage:{type:Object,default:()=>({})},isMute:{type:Boolean,default:!0},muteText:{type:String,default:""},enableInput:{type:Boolean,default:!0},enableAt:{type:Boolean,default:!0},enableDragUpload:{type:Boolean,default:!0},enableTyping:{type:Boolean,default:!0},isH5:{type:Boolean,default:!0},isGroup:{type:Boolean,default:!1}},emits:["sendMessage","onTyping"],setup(e,{expose:t,emit:n}){const o=e,{placeholder:i,isH5:s,enableAt:r,enableDragUpload:l,isGroup:c,enableTyping:d}=Object(N["toRefs"])(o),u=Object(N["ref"])(!0),p=Object(N["ref"])(!0),h=Object(as["b"])({extensions:[is["a"],ss["a"],ls["a"],rs["a"].configure({emptyEditorClass:"is-editor-empty",placeholder:i.value}),cs["a"].configure({HTMLAttributes:{class:"mention"},suggestion:r.value&&Us()}),ps.configure({inline:!0,allowBase64:!0,HTMLAttributes:{class:"custom-image"}})],autofocus:!0,editable:!0,injectCSS:!1,onUpdate({editor:e,transaction:t}){var o,a;d.value&&!c.value&&(p.value=!e.isFocused,(null===t||void 0===t||null===(o=t.doc)||void 0===o||null===(a=o.content)||void 0===a?void 0:a.size)>2?u.value=!1:u.value=!0,n("onTyping",u.value,p.value))},onFocus(){var e,t;if(s.value&&null!==(e=document)&&void 0!==e&&null!==(t=e.getElementById("app"))&&void 0!==t&&t.style){const e=document.body.scrollHeight-window.innerHeight;document.getElementById("app").style.marginBottom=e+"px",document.getElementById("app").style.height=`calc(100% - ${e}px)`}d.value&&!c.value&&(p.value=!0,n("onTyping",u.value,p.value))},onBlur(){var e,t;s.value&&null!==(e=document)&&void 0!==e&&null!==(t=e.getElementById("app"))&&void 0!==t&&t.style&&(document.getElementById("app").style.marginBottom="",document.getElementById("app").style.height="100%"),d.value&&!c.value&&(p.value=!0,n("onTyping",u.value,p.value))}}),m=Object(N["ref"])(),v=e=>{var t,o;null!==s&&void 0!==s&&s.value||(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),13===e.keyCode&&e.ctrlKey?null===h||void 0===h||null===(t=h.value)||void 0===t||null===(o=t.commands)||void 0===o||o.insertContent("<p></p>"):13===e.keyCode&&n("sendMessage"))},g=new ts.a,O=async(e,t)=>{if(e.preventDefault(),e.stopPropagation(),!s.value&&(null!==l&&void 0!==l&&l.value||"drop"!==t)&&("drop"===t&&e.dataTransfer||"paste"===t&&e.clipboardData)){var n,o;const s="drop"===t?null===e||void 0===e||null===(n=e.dataTransfer)||void 0===n?void 0:n.files:null===e||void 0===e||null===(o=e.clipboardData)||void 0===o?void 0:o.files;for(let e=0;e<s.length;e++){var a,i,r;const t=s[e],n=os()(a=t.type).call(a,"image/"),o=n?nt.a.createObjectURL(t):await I(t);null===h||void 0===h||null===(i=h.value)||void 0===i||null===(r=i.commands)||void 0===r||r.insertContent({type:"custom-image",attrs:{src:o,alt:null===t||void 0===t?void 0:t.name,title:null===t||void 0===t?void 0:t.name,class:n?"normal":"file"}}),g.set(o,t),e===s.length-1&&b()(()=>{var e,t,n,o;null===h||void 0===h||null===(e=h.value)||void 0===e||null===(t=e.commands)||void 0===t||t.focus("end"),null===h||void 0===h||null===(n=h.value)||void 0===n||null===(o=n.commands)||void 0===o||o.scrollIntoView()},10)}}},y=new ts.a,j=(e,t)=>new f.a((n,o)=>{if(y.has(t))n(y.get(t));else{let a=new Image;a.crossOrigin="anonymous",a.onload=()=>{y.set(t,a),n(a)},a.onerror=o,a.src=e}}),I=async e=>{const{name:t,type:n}=e,o=document.createElement("canvas");let a=160,i=50;o.style.width=a+"px",o.style.height=i+"px";var s=window.devicePixelRatio;o.width=Math.floor(a*s),o.height=Math.floor(i*s);const r=o.getContext("2d");if(!r)return"";r.scale(s,s);const{iconSrc:l,iconType:c}=k(n),d=await j(l,c);null===r||void 0===r||r.drawImage(d,10,10,30,30);const u=w(t);r.fillText(u,45,22);const p=o.toDataURL();return p},k=e=>{const t="https://web.sdk.qcloud.com/component/TUIKit/assets/file-",n=["image","pdf","text","ppt","presentation","sheet","zip","word","video","unknown"];let o="",i="";return a()(n).call(n,n=>{dn()(e).call(e,n)&&(o=t+n+".svg",i=n)}),{iconSrc:o||t+"unknown.svg",iconType:i||"unknown"}},w=e=>{if(!e)return e;let t="",n=0;for(let o=0;o<(null===e||void 0===e?void 0:e.length);o++){if(n>16){t+="...";break}t+=e[o],/[a-z]|[0-9]|[,;.!@#-+/\\$%^*()<>?:"'{}~]/i.test(e[o])?n+=1:n+=2}return t},E=()=>C(),C=()=>{var e;const t=null===h||void 0===h||null===(e=h.value)||void 0===e?void 0:e.getJSON(),n=[],o=e=>{var t;e&&e.type&&("text"===e.type||"custom-image"===e.type||"mention"===e.type?i(e):("paragraph"===e.type&&i(e),e.content&&e.content.length&&a()(t=e.content).call(t,e=>{o(e)})))},i=e=>{var t,o,a,i;if("paragraph"===e.type)n.length>0&&n[n.length-1]&&"text"===(null===(i=n[n.length-1])||void 0===i?void 0:i.type)&&(n[n.length-1].payload.text+="\n");else if("text"===e.type||"custom-image"===e.type&&"emoji"===(null===e||void 0===e||null===(t=e.attrs)||void 0===t?void 0:t.class)){var s,r;const t="text"===e.type?null===e||void 0===e?void 0:e.text:null===e||void 0===e||null===(s=e.attrs)||void 0===s?void 0:s.alt;n.length>0&&n[n.length-1]&&"text"===(null===(r=n[n.length-1])||void 0===r?void 0:r.type)?n[n.length-1].payload.text+=t:n.push({type:"text",payload:{text:t}})}else if("custom-image"===e.type&&"normal"===(null===e||void 0===e||null===(o=e.attrs)||void 0===o?void 0:o.class)){var l;n.push({type:"image",payload:{file:null===g||void 0===g?void 0:g.get(null===e||void 0===e||null===(l=e.attrs)||void 0===l?void 0:l.src)}})}else if("custom-image"===e.type&&"file"===(null===e||void 0===e||null===(a=e.attrs)||void 0===a?void 0:a.class)){var c,d;const t=null===g||void 0===g?void 0:g.get(null===e||void 0===e||null===(c=e.attrs)||void 0===c?void 0:c.src);n.push({type:null!==t&&void 0!==t&&null!==(d=t.type)&&void 0!==d&&dn()(d).call(d,"video")?"video":"file",payload:{file:t}})}else if("mention"===e.type){var u,p,h,m;const t="@"+(null===e||void 0===e||null===(u=e.attrs)||void 0===u?void 0:u.label)+" ";var v,f,b,O,y;if(n.length>0&&n[n.length-1]&&"text"===(null===(p=n[n.length-1])||void 0===p?void 0:p.type)?n[n.length-1].payload.text+=t:n.push({type:"text",payload:{text:t}}),null!==(h=n[n.length-1])&&void 0!==h&&null!==(m=h.payload)&&void 0!==m&&m.atUserList)null===(v=n[n.length-1])||void 0===v||null===(f=v.payload)||void 0===f||null===(b=f.atUserList)||void 0===b||b.push(null===e||void 0===e||null===(O=e.attrs)||void 0===O?void 0:O.id);else n[n.length-1].payload.atUserList=[null===e||void 0===e||null===(y=e.attrs)||void 0===y?void 0:y.id]}};return o(t),n},T=e=>{var t,n,o,a,i;null===h||void 0===h||null===(t=h.value)||void 0===t||null===(n=t.commands)||void 0===n||n.insertContent({type:"custom-image",attrs:{src:null===e||void 0===e?void 0:e.url,alt:null===e||void 0===e?void 0:e.name,title:null===e||void 0===e?void 0:e.name,class:"emoji"}}),null===h||void 0===h||null===(o=h.value)||void 0===o||o.commands.focus("end"),null===h||void 0===h||null===(a=h.value)||void 0===a||null===(i=a.commands)||void 0===i||i.scrollIntoView()},_=()=>{var e,t,n,o;null===h||void 0===h||null===(e=h.value)||void 0===e||null===(t=e.commands)||void 0===t||t.clearContent(!0),null===g||void 0===g||g.clear(),null===h||void 0===h||null===(n=h.value)||void 0===n||null===(o=n.commands)||void 0===o||o.focus("end"),p.value=!0,u.value=!0},S=e=>{var t,n;null===h||void 0===h||null===(t=h.value)||void 0===t||null===(n=t.commands)||void 0===n||n.insertContent(e)};return t({getEditorContent:E,addEmoji:T,resetEditor:_,setEditorContent:S}),(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["message-input-container",Object(N["unref"])(s)&&"message-input-container-h5"])},[Object(N["withDirectives"])(Object(N["createElementVNode"])("div",{class:"message-input-mute"},Object(N["toDisplayString"])(t.$t("TUIChat."+e.muteText)),513),[[N["vShow"],e.isMute]]),Object(N["withDirectives"])(Object(N["createVNode"])(Object(N["unref"])(as["a"]),{editor:Object(N["unref"])(h),class:"message-input-area",ref_key:"editorContainer",ref:m,onDrop:n[0]||(n[0]=e=>O(e,"drop")),onPaste:n[1]||(n[1]=e=>O(e,"paste")),onKeydown:Object(N["withKeys"])(v,["enter"])},null,8,["editor","onKeydown"]),[[N["vShow"],!e.isMute&&e.enableInput]])],2))}});n("c165"),n("e4a3");const Gs=le()(As,[["__scopeId","data-v-72834b20"]]);var Hs=Gs;const $s={class:"message-input-button-hover"};var zs=Object(N["defineComponent"])({__name:"message-input-button",props:{enableSend:{type:Boolean,default:!0},messages:{type:Array,default:()=>[]},isH5:{type:Boolean,default:!0}},emits:["sendMessage"],setup(e,{emit:t}){const n=e,{enableSend:o}=Object(N["toRefs"])(n),a=()=>{t("sendMessage")};return(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["message-input-button",e.isH5&&"message-input-button-h5"])},[Object(N["unref"])(o)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:0,class:"message-input-button-cont","data-type":"text",onClick:a,disabled:!1},[Object(N["createElementVNode"])("p",$s,Object(N["toDisplayString"])(t.$t("TUIChat.按Enter发送，Ctrl+Enter换行")),1),Object(N["createTextVNode"])(" "+Object(N["toDisplayString"])(t.$t("发送")),1)])):Object(N["createCommentVNode"])("",!0)],2))}});n("3e72");const Fs=le()(zs,[["__scopeId","data-v-58e1a202"]]);var Ys=Fs;const Ks=e=>(Object(N["pushScopeId"])("data-v-1333615b"),e=e(),Object(N["popScopeId"])(),e),Ws={key:0,class:"reference"},qs={class:"reference-box"},Zs={class:"reference-box-show"},Xs={class:"reference-box-show-name"},Js={key:1,class:"reply"},Qs={class:"reply-box"},er=Ks(()=>Object(N["createElementVNode"])("i",null,null,-1)),tr={class:"reply-box-show"};var nr=Object(N["defineComponent"])({__name:"message-input-reference-or-reply",props:{replyOrReference:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},emits:["resetReplyOrReference"],setup(e,{emit:t}){const n=e,{replyOrReference:o,isH5:a}=Object(N["toRefs"])(n),i=()=>{t("resetReplyOrReference")};return(e,t)=>{var n,s,r,l,c,d,u,p,h,m,v,f,g,b,O,y,j,I,k,w,E;return null!==(n=Object(N["unref"])(o))&&void 0!==n&&n.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["reference"===(null===(s=Object(N["unref"])(o))||void 0===s?void 0:s.show)&&"message-input-reference","reply"===(null===(r=Object(N["unref"])(o))||void 0===r?void 0:r.show)&&"message-input-reply",Object(N["unref"])(a)&&"reference"===(null===(l=Object(N["unref"])(o))||void 0===l?void 0:l.show)&&"message-input-reference-h5",Object(N["unref"])(a)&&"reply"===(null===(c=Object(N["unref"])(o))||void 0===c?void 0:c.show)&&"message-input-reply-h5"])},["reference"===(null===(d=Object(N["unref"])(o))||void 0===d?void 0:d.show)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Ws,[Object(N["createElementVNode"])("div",qs,[Object(N["createElementVNode"])("div",Zs,[Object(N["createElementVNode"])("span",Xs,Object(N["toDisplayString"])(null!==(u=Object(N["unref"])(o))&&void 0!==u&&null!==(p=u.message)&&void 0!==p&&p.nick?null===(h=Object(N["unref"])(o))||void 0===h||null===(m=h.message)||void 0===m?void 0:m.nick:null===(v=Object(N["unref"])(o))||void 0===v||null===(f=v.message)||void 0===f?void 0:f.from)+": ",1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(g=Object(N["unref"])(o))||void 0===g?void 0:g.content),1)]),Object(N["createElementVNode"])("label",{class:"icon icon-cancel",onClick:i})])])):"reply"===(null===(b=Object(N["unref"])(o))||void 0===b?void 0:b.show)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Js,[Object(N["createElementVNode"])("div",Qs,[er,Object(N["createElementVNode"])("div",tr,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null!==(O=Object(N["unref"])(o))&&void 0!==O&&null!==(y=O.message)&&void 0!==y&&y.nick?null===(j=Object(N["unref"])(o))||void 0===j||null===(I=j.message)||void 0===I?void 0:I.nick:null===(k=Object(N["unref"])(o))||void 0===k||null===(w=k.message)||void 0===w?void 0:w.from)+Object(N["toDisplayString"])(Object(N["unref"])(a)?":":""),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(E=Object(N["unref"])(o))||void 0===E?void 0:E.content),1)]),Object(N["createElementVNode"])("label",{class:"icon icon-cancel",onClick:i})])])):Object(N["createCommentVNode"])("",!0)],2)):Object(N["createCommentVNode"])("",!0)}}});n("aeac");const or=le()(nr,[["__scopeId","data-v-1333615b"]]);var ar=or,ir=Object(N["defineComponent"])({__name:"index",props:{placeholder:{type:String,default:"this is placeholder"},conversation:{type:Object,default:()=>({})},replyOrReference:{type:Object,default:()=>({})},isGroup:{type:Boolean,default:!1},memberList:{type:Array,default:()=>[]},isMute:{type:Boolean,default:!0},muteText:{type:String,default:""},enableInput:{type:Boolean,default:!0},enableAt:{type:Boolean,default:!0},enableDragUpload:{type:Boolean,default:!0},enableTyping:{type:Boolean,default:!0},env:{type:Object,default:()=>({})}},emits:["sendMessage","resetReplyOrReference","onTyping"],setup(e,{expose:t,emit:n}){var o;const i=e,{placeholder:s,isGroup:r,memberList:l,conversation:c,replyOrReference:d,env:u,enableTyping:p}=Object(N["toRefs"])(i),h=Object(N["ref"])(),v=Object(N["ref"])(null===i||void 0===i||null===(o=i.env)||void 0===o?void 0:o.isH5);Object(N["watch"])(()=>c.value,(e,t)=>{var n;(null===e||void 0===e?void 0:e.conversationID)!==(null===t||void 0===t?void 0:t.conversationID)&&(null===h||void 0===h||null===(n=h.value)||void 0===n||n.resetEditor())},{immediate:!0});const f=async()=>{var e,t,o,i,s;const r=null===(e=window)||void 0===e||null===(t=e.TUIKitTUICore)||void 0===t||null===(o=t.TUIServer)||void 0===o?void 0:o.TUIChat,l=null===h||void 0===h||null===(i=h.value)||void 0===i?void 0:i.getEditorContent(),c=d.value;await(null===l||void 0===l?void 0:a()(l).call(l,async e=>{var t,o,a,i;try{let u,v;switch(u=b(u),null===e||void 0===e?void 0:e.type){case"text":var s,l,d,p,h;if(u=O(u),null!==e&&void 0!==e&&null!==(t=e.payload)&&void 0!==t&&t.atUserList)v=await(null===r||void 0===r?void 0:r.sendTextAtMessage({text:JSON.parse(m()(null===e||void 0===e||null===(s=e.payload)||void 0===s?void 0:s.text)),atUserList:null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.atUserList},u));else v=await(null===r||void 0===r?void 0:r.sendTextMessage(JSON.parse(m()(null===e||void 0===e||null===(d=e.payload)||void 0===d?void 0:d.text)),u));if("reply"===(null===c||void 0===c?void 0:c.show))await r.replyMessage(null===(p=v)||void 0===p||null===(h=p.data)||void 0===h?void 0:h.message);break;case"image":await(null===r||void 0===r?void 0:r.sendImageMessage(null===e||void 0===e||null===(o=e.payload)||void 0===o?void 0:o.file));break;case"video":await(null===r||void 0===r?void 0:r.sendVideoMessage(null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.file));break;case"file":await(null===r||void 0===r?void 0:r.sendFileMessage(null===e||void 0===e||null===(i=e.payload)||void 0===i?void 0:i.file));break;default:break}n("sendMessage")}catch(v){Object(hn["b"])(v,u.value)}})),null===h||void 0===h||null===(s=h.value)||void 0===s||s.resetEditor(),j()},g=(e,t)=>{n("onTyping",e,t)},b=e=>(p.value&&(e||(e={}),e.messageFeature={needTyping:1,version:1}),e),O=e=>{var t,n,o,a,i,s,r,l,c,u,p;if("reply"!==(null===d||void 0===d||null===(t=d.value)||void 0===t?void 0:t.show)&&"reference"!==(null===d||void 0===d||null===(n=d.value)||void 0===n?void 0:n.show))return e;if(e||(e={}),e.messageReply={messageAbstract:null===d||void 0===d||null===(o=d.value)||void 0===o?void 0:o.content,messageSender:(null===d||void 0===d||null===(a=d.value)||void 0===a||null===(i=a.message)||void 0===i?void 0:i.nick)||(null===d||void 0===d||null===(s=d.value)||void 0===s||null===(r=s.message)||void 0===r?void 0:r.from),messageID:null===d||void 0===d||null===(l=d.value)||void 0===l||null===(c=l.message)||void 0===c?void 0:c.ID,messageType:null===d||void 0===d||null===(u=d.value)||void 0===u?void 0:u.type,version:1},"reply"===(null===d||void 0===d||null===(p=d.value)||void 0===p?void 0:p.show))try{var h,m,v,f;if(e.messageReply.messageRootID=null===d||void 0===d||null===(h=d.value)||void 0===h||null===(m=h.message)||void 0===m?void 0:m.ID,null!==d&&void 0!==d&&null!==(v=d.value)&&void 0!==v&&null!==(f=v.message)&&void 0!==f&&f.cloudCustomData){var g,b,O,y,j;const t=Object(U["a"])(null===d||void 0===d||null===(g=d.value)||void 0===g||null===(b=g.message)||void 0===b?void 0:b.cloudCustomData);e.messageReply.messageRootID=(null===t||void 0===t||null===(O=t.messageReply)||void 0===O?void 0:O.messageRootID)||(null===d||void 0===d||null===(y=d.value)||void 0===y||null===(j=y.message)||void 0===j?void 0:j.ID)}}catch(I){console.warn(I)}return e},y=e=>{var t;null===h||void 0===h||null===(t=h.value)||void 0===t||t.addEmoji(e)},j=()=>{n("resetReplyOrReference")},I=e=>{var t,n;null===h||void 0===h||null===(t=h.value)||void 0===t||t.resetEditor(),j(),null===h||void 0===h||null===(n=h.value)||void 0===n||n.setEditorContent(e)};return t({addEmoji:y,reEdit:I}),(t,n)=>{var o,a;return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["message-input",v.value&&"message-input-h5"])},[Object(N["createVNode"])(Hs,{ref_key:"editor",ref:h,isH5:v.value,placeholder:Object(N["unref"])(s),isGroup:Object(N["unref"])(r),isMute:e.isMute,muteText:e.muteText,enableInput:e.enableInput,enableAt:e.enableAt,enableTyping:Object(N["unref"])(p),enableDragUpload:e.enableDragUpload,onSendMessage:f,onOnTyping:g},null,8,["isH5","placeholder","isGroup","isMute","muteText","enableInput","enableAt","enableTyping","enableDragUpload"]),e.isMute?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createBlock"])(Ys,{key:0,isH5:v.value,onSendMessage:f},null,8,["isH5"])),e.enableAt?(Object(N["openBlock"])(),Object(N["createBlock"])(Ps,{key:1,memberList:Object(N["unref"])(l),isGroup:Object(N["unref"])(r),selfInfo:null===(o=Object(N["unref"])(c))||void 0===o||null===(a=o.groupProfile)||void 0===a?void 0:a.selfInfo,isH5:v.value},null,8,["memberList","isGroup","selfInfo","isH5"])):Object(N["createCommentVNode"])("",!0),Object(N["createVNode"])(ar,{replyOrReference:Object(N["unref"])(d),isH5:v.value,onResetReplyOrReference:j},null,8,["replyOrReference","isH5"])],2)}}});n("eea0");const sr=le()(ir,[["__scopeId","data-v-0769e7e7"]]);var rr=sr,lr=rr;const cr=Object(N["defineComponent"])({name:"TUIChat",components:{MessageSystem:Oo,MessageTimestamp:Po,Manage:Xi,MessageInput:lr,MessageItem:Lo},props:{isMsgNeedReadReceipt:{type:Boolean,default:!1},isNeedTyping:{type:Boolean,default:!0},isNeedEmojiReact:{type:Boolean,default:!0}},setup(e){var t,n,o,i,r,l,c;const{TUIServer:u}=cr,p=(null===u||void 0===u||null===(t=u.TUICore)||void 0===t||null===(n=t.TUIServer)||void 0===n||n.TUIGroup,null===u||void 0===u||null===(o=u.TUICore)||void 0===o||null===(i=o.TUIServer)||void 0===i||i.TUIProfile,u.TUICore.isOfficial&&Yt["c"]&&Object(Yt["c"])()||{}),{t:h}=window.TUIKitTUICore.config.i18n.useI18n(),m=Object(N["reactive"])({messageList:[],conversation:{},text:"",atText:"",types:u.TUICore.TIM.TYPES,currentMessage:{},dialogID:"",forwardStatus:!1,receiptDialogStatus:!1,repliesDialogStatus:!1,showImagePreview:!1,currentImagePreview:{},isCompleted:!1,userInfoView:!1,userInfo:{isGroup:!1,list:[]},selfInfo:{},messageComponents:jd("message"),isShow:!1,muteText:"您已被管理员禁言",isFirstSend:!0,isFirstRender:!0,showGroupMemberList:!1,reference:{message:{},content:"",type:0,show:""},historyReference:!1,referenceID:"",allMemberList:[],env:u.TUICore.TUIEnv,showResend:!1,resendMessage:{},inputBlur:!1,inputComposition:!1,inputCompositionCont:"",needTyping:e.isNeedTyping,needReadReceipt:!1,peerNeedReceipt:!1,needToBottom:!1,toBottomTipCont:"",messageInView:[],readSet:new ne.a,isUserAction:!1,scroll:{scrollTop:0,scrollHeight:0,scrollTopMin:1/0,scrollTopMax:0},isMsgNeedReadReceipt:!1,isNeedEmojiReact:!1,dropDownRef:null,typingRef:null}),v=!!Object(N["useSlots"])().default,f=async e=>{var t,n,o;e&&await(null===u||void 0===u||null===(t=u.TUICore)||void 0===t||null===(n=t.TUIServer)||void 0===n||null===(o=n.TUIConversation)||void 0===o?void 0:o.setMessageRead(e))},g=async e=>{var t;const n=y()(e).call(e,e=>"in"===(null===e||void 0===e?void 0:e.flow)&&(null===e||void 0===e?void 0:e.needReadReceipt)&&!m.readSet.has(null===e||void 0===e?void 0:e.ID));n.length&&await(null===u||void 0===u?void 0:u.sendMessageReadReceipt(n).then(()=>{a()(n).call(n,e=>m.readSet.add(null===e||void 0===e?void 0:e.ID))})),await f(null===m||void 0===m||null===(t=m.conversation)||void 0===t?void 0:t.conversationID)},O=[];a()(r=s()(jd("send"))).call(r,e=>{O.push(e)}),Xi.TUIServer=u,Xi.GroupServer=null===u||void 0===u||null===(l=u.TUICore)||void 0===l||null===(c=l.TUIServer)||void 0===c?void 0:c.TUIGroup;const j=Object(N["ref"])(),k=Object(N["ref"])(),w=Object(N["ref"])(),E=Object(N["ref"])(),C=Object(N["ref"])();d()(u).call(u,m);const T={list:[],handleAvatar:U["f"],handleName:U["m"]},S=Object(N["ref"])();Object(pn["onClickOutside"])(S,()=>{m.showGroupMemberList=!1});const D=Object(N["computed"])(()=>{const{conversation:e}=m;return null!==e&&void 0!==e&&e.conversationID?(null===e||void 0===e?void 0:e.type)===u.TUICore.TIM.TYPES.CONV_SYSTEM?"system":"chat":""}),M=Object(N["computed"])(()=>{const{conversation:e}=m;if((null===e||void 0===e?void 0:e.type)===u.TUICore.TIM.TYPES.CONV_GROUP){var t,n,o;const a=null===e||void 0===e||null===(t=e.groupProfile)||void 0===t?void 0:t.selfInfo.role,i=a===u.TUICore.TIM.TYPES.GRP_MBR_ROLE_MEMBER;if(i&&null!==e&&void 0!==e&&null!==(n=e.groupProfile)&&void 0!==n&&n.muteAllMembers)return!0;const s=(new Date).getTime();if(1e3*(null===(o=m.selfInfo)||void 0===o?void 0:o.muteUntil)-s>0)return!0}return!1});Object(N["watchEffect"])(()=>{m.isMsgNeedReadReceipt=e.isMsgNeedReadReceipt,m.needReadReceipt=m.isMsgNeedReadReceipt,m.needTyping=e.isNeedTyping,m.isNeedEmojiReact=e.isNeedEmojiReact}),Object(N["watch"])(()=>{var e;return null===m||void 0===m||null===(e=m.conversation)||void 0===e?void 0:e.conversationID},(e,t)=>{e!==t&&(m.scroll.scrollTop=0,m.scroll.scrollHeight=0,m.scroll.scrollTopMin=1/0,m.scroll.scrollTopMax=0,m.text="",m.atText="",m.reference={message:{},content:"",type:0,show:""})},{deep:!0}),Object(N["watch"])(M,(e,t)=>{const{conversation:n}=m;if(e&&(null===n||void 0===n?void 0:n.type)===u.TUICore.TIM.TYPES.CONV_GROUP){var o,a,i;const e=null===n||void 0===n||null===(o=n.groupProfile)||void 0===o?void 0:o.selfInfo.role,t=e===u.TUICore.TIM.TYPES.GRP_MBR_ROLE_MEMBER;t&&null!==n&&void 0!==n&&null!==(a=n.groupProfile)&&void 0!==a&&a.muteAllMembers&&(m.muteText="管理员开启全员禁言");const s=(new Date).getTime();1e3*(null===(i=m.selfInfo)||void 0===i?void 0:i.muteUntil)-s>0&&(m.muteText="您已被管理员禁言")}});const B=Object(N["computed"])(()=>{const{conversation:e}=m;return Object(U["m"])(e)}),R=Object(N["computed"])(()=>{var e;return y()(e=m.messageList).call(e,e=>!e.isDeleted&&!Object(U["v"])(e))}),L=Object(N["computed"])(()=>{var e;return null===R||void 0===R||null===(e=R.value)||void 0===e?void 0:y()(e).call(e,e=>!e.isRevoked&&e.type===m.types.MSG_IMAGE)}),V=Object(N["computed"])(()=>{const{conversation:e,needReadReceipt:t}=m;return!((null===e||void 0===e?void 0:e.type)!==u.TUICore.TIM.TYPES.CONV_C2C&&!t)});Object(N["watch"])(R,(e,t)=>{if(Object(N["nextTick"])(()=>{var n,o;const a=(null===(n=e[e.length-1])||void 0===n?void 0:n.ID)===(null===(o=t[t.length-1])||void 0===o?void 0:o.ID);0===e.length||a||oe()}),m.currentMessage){var n;const t=null===(n=m.currentMessage)||void 0===n?void 0:n.ID,o=I()(e).call(e,e=>e.ID===t);o&&(m.currentMessage=Object(U["b"])(o))}if(m.historyReference){for(let e=0;e<R.value.length;e++){var o;(null===R||void 0===R||null===(o=R.value[e])||void 0===o?void 0:o.ID)===(null===m||void 0===m?void 0:m.referenceID)&&(ae("target",w.value[e]),w.value[e].getElementsByClassName("content")[0].classList.add("reference-content"))}m.historyReference=!1}},{deep:!0}),Object(N["watch"])(()=>m.scroll.scrollTop,e=>{b()(()=>{var t;e===(null===j||void 0===j||null===(t=j.value)||void 0===t?void 0:t.scrollTop)&&(m.scroll.scrollTopMin!==1/0&&0!==m.scroll.scrollTopMax&&le("scroll"),m.scroll.scrollTopMin=1/0,m.scroll.scrollTopMax=0)},20)},{deep:!0}),Object(N["onMounted"])(()=>{Object(N["watch"])(()=>null===j||void 0===j?void 0:j.value,()=>{null!==j&&void 0!==j&&j.value&&j.value.addEventListener("scroll",se)},{deep:!0})});const x=e=>{var t;null===C||void 0===C||null===(t=C.value)||void 0===t||t.addEmoji(e)},P=async e=>{m.isFirstSend&&(Ft.getInstance().reportEvent({name:"sendMessage",ext1:"sendMessage-success"}),m.isFirstSend=!1),m.reference.show="",u.TUICore.isOfficial&&(null===p||void 0===p?void 0:p.commit)&&(null===p||void 0===p||p.commit("handleTask",0))},A=e=>{m.currentMessage=e,m.dialogID=e.ID},G=e=>{m.env.isH5?(m.showResend=!0,m.resendMessage=e):(u.resendMessage(e).catch(e=>{Object(hn["b"])(e,m.env)}),Ft.getInstance().reportEvent({name:"messageOptions",ext1:"messageResend"}))},H=e=>{m.currentMessage=e,T.list=u.TUICore.getStore().TUIConversation.conversationList,m.forwardStatus=!0},$=(e,t)=>{let n=Object(U["o"])(e);m.reference={message:e,content:null===n||void 0===n?void 0:n.referenceMessageForShow,type:null===n||void 0===n?void 0:n.referenceMessageType,show:t}},z=()=>{u.resendMessage(m.resendMessage).then(()=>{m.showResend=!1}).catch(e=>{Object(hn["b"])(e,m.env),m.showResend=!1}),Ft.getInstance().reportEvent({name:"messageOptions",ext1:"messageResend"})},F=e=>{var t,n,o;null!==e&&void 0!==e&&null!==(t=e.payload)&&void 0!==t&&t.text&&(null===C||void 0===C||null===(n=C.value)||void 0===n||n.reEdit(null===e||void 0===e||null===(o=e.payload)||void 0===o?void 0:o.text))},Y=e=>{u.handleGroupApplication(e)},K=e=>{e.clipboardData.files[0]&&u.sendImageMessage(e.clipboardData.files[0])},W=async()=>{await u.getHistoryMessageList().then(()=>{var e;ae("target",null===j||void 0===j||null===(e=j.value)||void 0===e?void 0:e.firstElementChild)})},q=e=>{m.referenceID=e;const t=[];for(let a=0;a<R.value.length;a++){var n,o;t.push(null===R||void 0===R||null===(n=R.value[a])||void 0===n?void 0:n.ID),-1!==_()(t).call(t,e)&&(null===(o=R.value[a])||void 0===o?void 0:o.ID)===e&&(ae("target",w.value[a]),w.value[a].getElementsByClassName("content")[0].classList.remove("reference-content"),Object(N["nextTick"])(()=>{w.value[a].getElementsByClassName("content")[0].classList.add("reference-content")}))}-1===_()(t).call(t,e)&&u.getHistoryMessageList().then(()=>{m.historyReference=!0})},Z=()=>{m.showGroupMemberList=!m.showGroupMemberList},X=()=>{u.TUICore.TUIServer.TUIConversation.handleCurrentConversation()},J=e=>{window.open(e.url),Ft.getInstance().reportEvent({name:"openLink",ext1:e.label})},Q=(e,t)=>{var n;if(e&&t)switch(t){case"reference":$(e,t);break;case"reply":$(e,t);break;case"reedit":var o,a;if(null!==e&&void 0!==e&&null!==(n=e.payload)&&void 0!==n&&n.text)null===C||void 0===C||null===(o=C.value)||void 0===o||o.reEdit(null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.text);break;default:break}},ee=async(e,t)=>{var n;if(null!==e&&void 0!==e&&e.ID&&t)switch(t){case"receipt":if(e.conversationType!==u.TUICore.TIM.TYPES.CONV_GROUP||0===(null===(n=e.readReceiptInfo)||void 0===n?void 0:n.unreadCount))return;m.currentMessage=e,m.receiptDialogStatus=!0;break;case"replies":m.currentMessage=e,m.repliesDialogStatus=!0;break;case"forward":m.currentMessage=e,T.list=u.TUICore.getStore().TUIConversation.conversationList,m.forwardStatus=!0;break;case"previewImage":m.showImagePreview=!m.showImagePreview,m.currentImagePreview=e;break;default:break}},te=async e=>{if(e)switch(e){case"receipt":m.currentMessage={},m.receiptDialogStatus=!1;break;case"replies":m.currentMessage={},m.repliesDialogStatus=!1;break;default:break}},oe=()=>{if(m.isFirstRender)return m.needToBottom=!1,ae("bottom"),void(m.isFirstRender=!1);if(j.value){var e;const{scrollHeight:t,scrollTop:n,clientHeight:o}=j.value;t-(n+o)<=o||"out"===(null===(e=R.value[R.value.length-1])||void 0===e?void 0:e.flow)?ae("bottom"):re(!0)}},ae=(e,t)=>{var n;switch(null===j||void 0===j||null===(n=j.value)||void 0===n||n.removeEventListener("scroll",se),m.isUserAction=!0,e){case $t["a"].scrollType.toBottom:m.needToBottom=!1,Object(N["nextTick"])(()=>{var e,t,n;null!==m&&void 0!==m&&null!==(e=m.env)&&void 0!==e&&e.isH5?ie():null===j||void 0===j||null===(t=j.value)||void 0===t||null===(n=t.lastElementChild)||void 0===n||n.scrollIntoView(!1);Object(U["c"])(null===j||void 0===j?void 0:j.value,"message-img",async()=>{var e,t,n;null!==m&&void 0!==m&&null!==(e=m.env)&&void 0!==e&&e.isH5?ie():null===j||void 0===j||null===(t=j.value)||void 0===t||null===(n=t.lastElementChild)||void 0===n||n.scrollIntoView(!1);j.value.addEventListener("scroll",se),await le("page")})});break;case $t["a"].scrollType.toTarget:Object(N["nextTick"])(()=>{null===t||void 0===t||t.scrollIntoView(!1),Object(U["c"])(null===j||void 0===j?void 0:j.value,"message-img",async()=>{null===t||void 0===t||t.scrollIntoView(!1),j.value.addEventListener("scroll",se),await le("page")})});break;default:break}},ie=()=>{var e,t;null!==(e=document)&&void 0!==e&&null!==(t=e.getElementById("app"))&&void 0!==t&&t.style&&(document.getElementById("app").style.marginBottom="",document.getElementById("app").style.height="100%"),j.value.scrollTop=j.value.scrollHeight},se=()=>{const{scrollHeight:e,scrollTop:t,clientHeight:n}=j.value;V.value&&(m.scroll.scrollHeight=e,m.scroll.scrollTop=t,m.scroll.scrollTopMin=m.isUserAction?m.scroll.scrollTopMin:Math.min(m.scroll.scrollTopMin,m.scroll.scrollTop),m.scroll.scrollTopMax=m.isUserAction?m.scroll.scrollTopMax:Math.max(m.scroll.scrollTopMax,m.scroll.scrollTop)),re(e-(t+n)>n),m.isUserAction=!1},re=e=>{var t,n;switch(e){case!0:var o;if(m.needToBottom=!0,null!==m&&void 0!==m&&null!==(t=m.conversation)&&void 0!==t&&t.unreadCount&&(null===m||void 0===m||null===(n=m.conversation)||void 0===n?void 0:n.unreadCount)>0)m.toBottomTipCont=`${null===m||void 0===m||null===(o=m.conversation)||void 0===o?void 0:o.unreadCount} ${h("TUIChat.条新消息")}`;else m.toBottomTipCont=h("TUIChat.回到最新位置");break;case!1:m.needToBottom=!1;break;default:m.needToBottom=!1;break}},le=async e=>{var t,n,o;if(!V.value)return void f(null===m||void 0===m||null===(o=m.conversation)||void 0===o?void 0:o.conversationID);m.messageInView.length&&(m.messageInView=[]);let a=0,i=0;switch(e){case $t["a"].inViewType.page:a=m.scroll.scrollTop,i=m.scroll.scrollTop+(null===j||void 0===j||null===(t=j.value)||void 0===t?void 0:t.clientHeight);break;case $t["a"].inViewType.scroll:a=m.scroll.scrollTopMin,i=m.scroll.scrollTopMax+(null===j||void 0===j||null===(n=j.value)||void 0===n?void 0:n.clientHeight);break;default:break}for(let r=0;r<(null===w||void 0===w||null===(s=w.value)||void 0===s?void 0:s.length);r++){var s;if(ce(e,null===w||void 0===w?void 0:w.value[r],a,i)){const e=R.value[r];m.messageInView.push(e)}}await g(m.messageInView)},ce=(e,t,n,o)=>{const a=j.value.getBoundingClientRect().top,i=j.value.getBoundingClientRect().bottom,{top:s,bottom:r}=t.getBoundingClientRect(),{offsetTop:l,clientHeight:c}=t;switch(e){case $t["a"].inViewType.page:return Math.round(s)>=Math.round(a)&&Math.round(r)<=Math.round(i);case $t["a"].inViewType.scroll:return Math.round(l)>=Math.round(n)&&Math.round(l+c)<=Math.round(o);default:return!1}},de=e=>{m.dropDownRef&&m.dropDownRef.removeChild(m.dropDownRef.children[0]),m.dropDownRef=e},ue=()=>{ae("bottom")},pe=e=>{m.showImagePreview=!m.showImagePreview,m.currentImagePreview=e},he=()=>{m.reference={message:{},content:"",type:0,show:""}},me=(e,t)=>{var n;null===m||void 0===m||null===(n=m.typingRef)||void 0===n||n.onTyping(e,t)};return{...Object(N["toRefs"])(m),conversationType:D,messages:R,messageEle:j,inputEle:k,messageInput:C,messageAimID:w,conversationData:T,conversationName:B,constant:$t["a"],reportMessageSend:P,handleTyping:me,handleItem:A,handleEdit:F,handleEditor:Q,getHistoryMessageList:W,handleApplication:Y,pluginComponentList:O,handleSend:x,closeDialog:te,isMute:M,pasting:K,setMessageRead:f,sendMessageReadReceipt:g,dialog:S,jumpID:q,back:X,slotDefault:v,toggleshowGroupMemberList:Z,resendMessage:G,submit:z,Link:Qi,openLink:J,readReceiptDialog:E,scrollToTarget:ae,needGroupReceipt:V,handleDropDownOpen:de,isMessageTip:U["u"],showDialog:ee,forwardMessage:H,referOrReplyMessage:$,handleUploadingImageOrVideo:ue,handleImagePreview:pe,imageList:L,resetReplyOrReference:he}}});var dr=cr;n("a171");const ur=le()(dr,[["render",ee],["__scopeId","data-v-3ea6462e"]]);var pr=ur;const hr=e=>(Object(N["pushScopeId"])("data-v-6807ca3c"),e=e(),Object(N["popScopeId"])(),e),mr={class:"face",id:"face"},vr=["onClick"],fr=["src"],gr=["src"],br={class:"face-tab"},Or=hr(()=>Object(N["createElementVNode"])("i",{class:"icon icon-face"},null,-1)),yr=[Or],jr=["onClick"],Ir=["src"];function kr(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",mr,[Object(N["createElementVNode"])("i",{class:"icon icon-face",title:"表情",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))}),Object(N["withDirectives"])(Object(N["createElementVNode"])("main",{class:Object(N["normalizeClass"])(["face-main",[e.isH5&&"face-H5-main"]]),ref:"dialog"},[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.list,(t,n)=>Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",{class:"face-list",key:n},[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(t,(t,o)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"face-list-item",key:o,onClick:n=>e.select(t,o)},[0===n?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:0,src:e.emojiUrl+e.emojiMap[t]},null,8,fr)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:1,class:"face-img",src:e.faceUrl+t+"@2x.png"},null,8,gr))],8,vr))),128))])),[[N["vShow"],e.currentIndex===n]])),128)),Object(N["createElementVNode"])("ul",br,[Object(N["createElementVNode"])("li",{class:"face-tab-item",onClick:t[1]||(t[1]=t=>e.selectFace(0))},yr),(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.bigEmojiList,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"face-tab-item",key:n,onClick:t=>e.selectFace(n+1)},[Object(N["createElementVNode"])("img",{src:e.faceUrl+t.list[0]+"@2x.png"},null,8,Ir)],8,jr))),128))])],2),[[N["vShow"],e.show]])])}const wr=Object(N["defineComponent"])({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1},parentID:{type:String,default:()=>""}},setup(e,t){var n,o;const a=Object(N["reactive"])({emojiUrl:Kn["d"],emojiMap:Kn["b"],emojiName:Kn["c"],faceUrl:Kn["e"],bigEmojiList:(null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o?void 0:o.isOfficial)&&Kn["a"]||[],show:!1,currentIndex:0,isMute:!1,transDom:!1}),i=Object(N["ref"])();Object(N["watchEffect"])(()=>{a.show=e.show,a.isMute=e.isMute});const s=()=>{const e=document.getElementsByClassName("face-main")[0];a.isMute||(e.style.display="none"===e.style.display?"flex":"none"),"none"===e.style.display&&d(0),r()},r=()=>{const t=document.getElementById(e.parentID),n=document.getElementsByClassName("face-H5-main")[0];e.isH5&&(null===t||void 0===t||t.appendChild(n))};Object(pn["onClickOutside"])(i,()=>{const e=document.getElementsByClassName("face-main")[0];e&&(e.style.display="none")});const l=async(n,o)=>{const i={name:n};if(0===a.currentIndex)return i.type="emo",i.url=Kn["d"]+Kn["b"][n],i.template=`<img src="${Kn["d"]+Kn["b"][n]}">`,e.isH5||s(),t.emit("send",i);try{await wr.TUIServer.sendFaceMessage({index:a.bigEmojiList[a.currentIndex-1].icon,data:a.bigEmojiList[a.currentIndex-1].list[o]}),Ft.getInstance().reportEvent({name:"messageType",ext1:"typeFace"})}catch(r){Object(hn["b"])(r,e)}e.isH5||s()},c=Object(N["computed"])(()=>{const e=[a.emojiName];for(let t=0;t<a.bigEmojiList.length;t++)e.push(a.bigEmojiList[t].list);return e}),d=e=>{a.currentIndex=e};return{...Object(N["toRefs"])(a),toggleShow:s,select:l,selectFace:d,list:c,dialog:i}}});var Er=wr;n("77ea");const Cr=le()(Er,[["render",kr],["__scopeId","data-v-6807ca3c"]]);var Tr=Cr,_r=Tr;const Sr={class:"upload-btn icon icon-image"};function Dr(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("span",Sr,[e.isMute?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:0,title:"图片",type:"file","data-type":"image",accept:"image/*",onChange:t[0]||(t[0]=(...t)=>e.sendUploadMessage&&e.sendUploadMessage(...t))},null,32)),Object(N["renderSlot"])(e.$slots,"default",{},void 0,!0)])}const Ur=Object(N["defineComponent"])({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({isMute:!1});Object(N["watchEffect"])(()=>{n.isMute=e.isMute});const o=async t=>{if(t.target.files.length>0)try{await Ur.TUIServer.sendImageMessage(t.target),Ft.getInstance().reportEvent({name:"messageType",ext1:"typeImage"})}catch(n){Object(hn["b"])(n,e)}t.target.value=""};return{...Object(N["toRefs"])(n),sendUploadMessage:o}}});var Mr=Ur;n("b77c");const Nr=le()(Mr,[["render",Dr],["__scopeId","data-v-04b8e378"]]);var Br=Nr,Rr=Br;const Lr={class:"upload-btn icon icon-video"};function Vr(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("span",Lr,[e.isMute?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:0,title:"视频",type:"file","data-type":"video",accept:"video/*",onChange:t[0]||(t[0]=(...t)=>e.sendUploadMessage&&e.sendUploadMessage(...t))},null,32)),Object(N["renderSlot"])(e.$slots,"default",{},void 0,!0)])}const xr=Object(N["defineComponent"])({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({isMute:!1});Object(N["watchEffect"])(()=>{n.isMute=e.isMute});const o=async t=>{if(t.target.files.length>0)try{await xr.TUIServer.sendVideoMessage(t.target),Ft.getInstance().reportEvent({name:"messageType",ext1:"typeVideo"})}catch(n){Object(hn["b"])(n,e)}t.target.value=""};return{...Object(N["toRefs"])(n),sendUploadMessage:o}}});var Pr=xr;n("6e04");const Ar=le()(Pr,[["render",Vr],["__scopeId","data-v-0b03faf8"]]);var Gr=Ar,Hr=Gr;const $r={class:"upload-btn icon icon-files"};function zr(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("span",$r,[e.isMute?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:0,title:"文件",type:"file","data-type":"file",accept:"*",onChange:t[0]||(t[0]=(...t)=>e.sendUploadMessage&&e.sendUploadMessage(...t))},null,32)),Object(N["renderSlot"])(e.$slots,"default",{},void 0,!0)])}const Fr=Object(N["defineComponent"])({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({isMute:!1});Object(N["watchEffect"])(()=>{n.isMute=e.isMute});const o=async t=>{if(t.target.files.length>0)try{await Fr.TUIServer.sendFileMessage(t.target),Ft.getInstance().reportEvent({name:"messageType",ext1:"typeFile"})}catch(n){Object(hn["b"])(n,e)}t.target.value=""};return{...Object(N["toRefs"])(n),sendUploadMessage:o}}});var Yr=Fr;n("6a25");const Kr=le()(Yr,[["render",zr],["__scopeId","data-v-3082f8e4"]]);var Wr=Kr,qr=Wr;function Zr(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("Transfer");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",null,[e.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["forward",[e.isH5?"forward-h5":""]]),ref:"dialog"},[Object(N["createVNode"])(s,{title:"转发",list:e.list,isSearch:!1,isH5:e.isH5,isCustomItem:!0,resultShow:!0,onSubmit:e.handleForWordMessage,onCancel:e.toggleShow},{left:Object(N["withCtx"])(({data:t})=>[Object(N["renderSlot"])(e.$slots,"left",{data:t},void 0,!0)]),right:Object(N["withCtx"])(({data:t})=>[Object(N["renderSlot"])(e.$slots,"right",{data:t},void 0,!0)]),_:3},8,["list","isH5","onSubmit","onCancel"])],2)):Object(N["createCommentVNode"])("",!0)])}const Xr=Object(N["defineComponent"])({components:{Transfer:Pa},name:"转发",props:{list:{type:Array,default:()=>[]},message:{type:Object,default:()=>({})},show:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({list:[],show:!1,to:-1}),o=Object(N["ref"])();Object(N["watchEffect"])(()=>{n.list=e.list,n.show=e.show});const a=()=>{n.show=!n.show,n.show||(t.emit("update:show",n.show),n.to=-1)};Object(pn["onClickOutside"])(o,()=>{n.show=!1,t.emit("update:show",n.show),n.to=-1});const i=async t=>{l()(t).call(t,async t=>{try{await Xr.TUIServer.forwardMessage(e.message,t)}catch(n){Object(hn["b"])(n,e)}}),a()};return{...Object(N["toRefs"])(n),toggleShow:a,handleForWordMessage:i,dialog:o}}});var Jr=Xr;n("8617");const Qr=le()(Jr,[["render",Zr],["__scopeId","data-v-f4db8228"]]);var el=Qr,tl=el;const nl={class:"words-main-content",ref:"dialog"},ol={class:"words-list"},al=["onClick"];function il(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["words",[e.isH5?"words-H5":""]])},[Object(N["createElementVNode"])("i",{class:"icon icon-words",title:"快速回复",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))}),Object(N["withDirectives"])(Object(N["createElementVNode"])("main",{class:Object(N["normalizeClass"])(["words-main",[e.isH5?"words-H5-main":""]])},[Object(N["createElementVNode"])("div",nl,[Object(N["createElementVNode"])("header",null,[Object(N["createElementVNode"])("aside",null,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("Words.常用语-快捷回复工具")),1)]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:0,class:"close",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))},"关闭")):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("ul",ol,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.list,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"words-list-item",key:n,onClick:n=>e.select(t)},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(t.value),1)],8,al))),128))])],512)],2),[[N["vShow"],e.show&&!e.isMute]])],2)}var sl=n("c7e2");const rl=Object(N["defineComponent"])({type:"custom",props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const{t:n}=window.TUIKitTUICore.config.i18n.useI18n(),o=[{value:"在吗？在吗？在吗？重要的话说三遍。"},{value:"好久没聊天了，快来和我说说话～"},{value:"好的，就这么说定了。"},{value:"感恩的心，感谢有你。"},{value:"糟糕！是心动的感觉！"},{value:"心疼地抱抱自己，我太难了！"},{value:"没关系，别在意，事情过去就过去了。"},{value:"早上好，今天也是让人期待的一天呢！"},{value:"熬夜有什么用，又没人陪你聊天，早点休息吧。"}],a=Object(N["reactive"])({list:[],show:!1,isMute:!1,locale:Object(sl["b"])()}),i=Object(N["ref"])();Object(N["watch"])(()=>a.locale,(e,t)=>{a.list=l()(o).call(o,e=>({value:n("Words."+e.value)}))}),Object(N["watchEffect"])(()=>{a.show=e.show,a.isMute=e.isMute});const s=()=>{a.show=!a.show,a.show&&(a.list=l()(o).call(o,e=>({value:n("Words."+e.value)})))};Object(pn["onClickOutside"])(i,()=>{a.show=!1});const r=(e,t)=>{const n=e.value;s(),rl.TUIServer.sendTextMessage(n)};return{...Object(N["toRefs"])(a),toggleShow:s,select:r,dialog:i}}});var ll=rl;n("ae69");const cl=le()(ll,[["render",il],["__scopeId","data-v-dfa99d56"]]);var dl=cl,ul=dl;const pl={key:0,class:"evaluate-main"},hl={class:"evaluate-main-content",ref:"dialog"},ml={key:0},vl={class:"evaluate-content"},fl={class:"evaluate-list"},gl=["onClick"],bl={key:0,class:"icon icon-star-light"},Ol={key:1,class:"icon icon-star"},yl={class:"evaluate-main-footer"},jl={key:0};function Il(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["evaluate",[e.isH5&&"evaluate-H5"]])},[Object(N["createElementVNode"])("i",{class:"icon icon-evaluate",title:"服务评价",onClick:t[0]||(t[0]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["stop"]))}),e.show&&!e.isMute?(Object(N["openBlock"])(),Object(N["createElementBlock"])("main",pl,[Object(N["createElementVNode"])("div",hl,[Object(N["createElementVNode"])("header",null,[Object(N["createElementVNode"])("aside",null,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("Evaluate.请对本次服务进行评价")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",ml,[Object(N["createTextVNode"])(Object(N["toDisplayString"])(e.$t("Evaluate.服务评价工具"))+"（"+Object(N["toDisplayString"])(e.$t("Evaluate.使用")),1),Object(N["createElementVNode"])("a",{onClick:t[1]||(t[1]=t=>e.openLink(e.Link.customMessage))},Object(N["toDisplayString"])(e.$t("Evaluate."+e.Link.customMessage.label)),1),Object(N["createTextVNode"])(Object(N["toDisplayString"])(e.$t("Evaluate.搭建"))+"） ",1)])):Object(N["createCommentVNode"])("",!0)]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:0,class:"close",onClick:t[2]||(t[2]=Object(N["withModifiers"])((...t)=>e.toggleShow&&e.toggleShow(...t),["stop"]))},"关闭")):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("div",vl,[Object(N["createElementVNode"])("ul",fl,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.list,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:Object(N["normalizeClass"])(["evaluate-list-item",[n<e.num&&"small-padding",e.isH5&&"evaluate-item"]]),key:n,onClick:Object(N["withModifiers"])(o=>e.select(t,n),["stop"])},[n<e.num?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",bl)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",Ol))],10,gl))),128))]),Object(N["withDirectives"])(Object(N["createElementVNode"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.options.data.comment=t)},null,512),[[N["vModelText"],e.options.data.comment]]),Object(N["createElementVNode"])("div",yl,[Object(N["createElementVNode"])("button",{class:"btn",onClick:t[4]||(t[4]=(...t)=>e.submit&&e.submit(...t))},Object(N["toDisplayString"])(e.$t("Evaluate.提交评价")),1)])]),e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("footer",jl,[Object(N["createTextVNode"])(Object(N["toDisplayString"])(e.$t("Evaluate.服务评价工具"))+"（"+Object(N["toDisplayString"])(e.$t("Evaluate.使用")),1),Object(N["createElementVNode"])("a",{onClick:t[5]||(t[5]=t=>e.openLink(e.Link.customMessage))},Object(N["toDisplayString"])(e.$t("Evaluate."+e.Link.customMessage.label)),1),Object(N["createTextVNode"])(Object(N["toDisplayString"])(e.$t("Evaluate.搭建"))+"） ",1)]))],512)])):Object(N["createCommentVNode"])("",!0)],2)}const kl=Object(N["defineComponent"])({type:"custom",props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({link:"https://web.sdk.qcloud.com/im/doc/zh-cn//SDK.html#createCustomMessage",list:5,show:!1,isMute:!1,options:{data:{businessID:$t["a"].typeEvaluate,version:1,score:"",comment:""},description:"对本次的服务评价",extension:"对本次的服务评价"},num:0}),o=Object(N["ref"])();Object(pn["onClickOutside"])(o,()=>{n.show=!1}),Object(N["watchEffect"])(()=>{n.show=e.show,n.isMute=e.isMute});const a=()=>{n.show=!n.show,n.show&&(n.options={data:{...Object(U["n"])($t["a"].typeEvaluate,1,{score:"",comment:""})},description:"对本次的服务评价",extension:"对本次的服务评价"},n.num=0)},i=(e,t)=>{n.num=t+1,n.options.data.score=""+n.num},s=()=>{kl.TUIServer.sendCustomMessage(n.options),Ft.getInstance().reportEvent({name:"messageType",ext1:"typeCustom"}),a()},r=e=>{window.open(e.url),Ft.getInstance().reportEvent({name:"openLink",ext1:e.label})};return{...Object(N["toRefs"])(n),toggleShow:a,select:i,submit:s,dialog:o,Link:Qi,openLink:r}}});var wl=kl;n("a94d");const El=le()(wl,[["render",Il],["__scopeId","data-v-5e2a1c9e"]]);var Cl=El,Tl=Cl;function _l(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("h1",null,Object(N["toDisplayString"])("对方正在输入"===e.title?e.$t("TUIChat.对方正在输入"):e.title),1)}const Sl=Object(N["defineComponent"])({props:{needTyping:{type:Boolean,default:!1},conversation:{type:Object,default:()=>({})},messageList:{type:Array,default:()=>[]}},setup(e,t){const n=Object(N["reactive"])({messageList:[],conversation:{},title:"",timeValid:0,myTypingStatus:0,otherTypingStatus:0,needTyping:!1,lastOtherMessageTime:0,lastMyTypingTime:0,lastOtherTypingTime:0,options:{data:{businessID:$t["a"].typeUserTyping,typingStatus:0,version:1,userAction:0,actionParam:$t["a"].typeInputStatusEnd},description:"",extension:""}});Object(N["watchEffect"])(()=>{n.messageList=e.messageList,n.conversation=e.conversation,n.needTyping=e.needTyping});const o=Object(N["computed"])(()=>{const{conversation:e}=n;return null!==e&&void 0!==e&&e.conversationID?e.conversationID:""}),a=Object(N["computed"])(()=>{const{conversation:e}=n;return Object(U["m"])(e)}),i=Object(N["computed"])(()=>{const{conversation:e}=n;return null!==e&&void 0!==e&&e.type?null===e||void 0===e?void 0:e.type:""}),s=Object(N["computed"])(()=>n.needTyping&&n.otherTypingStatus?"对方正在输入":null===a||void 0===a?void 0:a.value),r=(e,t)=>{if(n.needTyping&&"C2C"===i.value&&((new Date).getTime()/1e3-n.lastOtherMessageTime<30&&(n.timeValid=1),n.timeValid))if(e||t)n.myTypingStatus=0,n.lastMyTypingTime=0,c(n.myTypingStatus);else{n.myTypingStatus=1;const e=(new Date).getTime();e-n.lastMyTypingTime>4e3&&(n.lastMyTypingTime=e,c(n.myTypingStatus))}};Object(N["watch"])(o,(e,t)=>{e!==t&&(n.needTyping=!1,n.timeValid=0)}),Object(N["watch"])(()=>n.needTyping,(e,t)=>{e||(n.myTypingStatus=0,n.otherTypingStatus=0,n.lastOtherMessageTime=0)}),Object(N["watch"])(()=>n.messageList,(e,t)=>{Object(N["nextTick"])(()=>{var t,o;0!==e.length&&"C2C"===i.value&&(n.lastOtherMessageTime=d(e),"in"===(null===(t=e[e.length-1])||void 0===t?void 0:t.flow)&&(Object(U["v"])(e[e.length-1])?(n.otherTypingStatus=l(e[e.length-1]),p()):(n.lastOtherMessageTime=null===(o=e[e.length-1])||void 0===o?void 0:o.time,n.otherTypingStatus=0)))})},{deep:!0});const l=e=>{try{var t;const{typingStatus:n,actionParam:o}=Object(U["a"])(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.data);return 1===n&&o===$t["a"].typeInputStatusIng?1:0}catch{return 0}},c=e=>{n.options={data:{businessID:$t["a"].typeUserTyping,typingStatus:e?1:0,version:1,userAction:e?14:0,actionParam:e?$t["a"].typeInputStatusIng:$t["a"].typeInputStatusEnd},description:"",extension:""},Sl.TUIServer.sendTypingMessage(n.options),Ft.getInstance().reportEvent({name:"messageType",ext1:"typeCustom"})},d=e=>{if(!e)return 0;for(let t=e.length-1;t>=0;t--)if(!Object(U["v"])(e[t])&&"in"===e[t].flow)return e[t].time;return 0},u=(e,t=2e3)=>{let n;return function(){n&&clearTimeout(n),n=b()(e,t)}},p=u(()=>{n.otherTypingStatus=0},5e3);return{...Object(N["toRefs"])(n),conversationID:o,conversationName:a,conversationType:i,title:s,isTypingMessage:U["v"],sendTypingMessage:c,handleTypingMessageStatus:l,getLastOtherMessageTime:d,debounce:u,waitTypingEnd:p,onTyping:r}}});var Dl=Sl;n("8198");const Ul=le()(Dl,[["render",_l],["__scopeId","data-v-1b2d7621"]]);var Ml=Ul,Nl=Ml;const Bl={class:"header"},Rl={class:"header-back"},Ll={class:"header-title"},Vl={class:"header-close"},xl={class:"body"},Pl={key:0,class:"body-message"},Al={class:"message"},Gl={class:"message-info"},Hl={class:"message-cont"},$l=["src"],zl={key:1},Fl={class:"body-tab"},Yl=["onClick"],Kl={class:"tab-item-title"},Wl={class:"tab-item-count"},ql={class:"body-list"},Zl=["src"],Xl={class:"name"};function Jl(e,t,n,o,a,i){return e.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["read-receipt",[e.isH5?"read-receipt-H5":"",e.isMenuOpen?"read-receipt-menu-open":""]]),ref:"dialog"},[Object(N["createElementVNode"])("div",Bl,[Object(N["createElementVNode"])("div",Rl,[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))})):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("div",Ll,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.消息详情")),1)]),Object(N["createElementVNode"])("div",Vl,[e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-close",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))}))])]),Object(N["createElementVNode"])("div",xl,[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Pl,[Object(N["createElementVNode"])("div",Al,[Object(N["createElementVNode"])("div",Gl,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.message.from),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.caculateTimeago(1e3*e.message.time)),1)]),Object(N["createElementVNode"])("div",Hl,[e.messageInfo.isImg?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:0,class:"message-cont-img",src:e.messageInfo.content},null,8,$l)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",zl,Object(N["toDisplayString"])(e.messageInfo.content),1))])])])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("div",Fl,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.readReceiptList,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],null,[t.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["tab-item",n===e.showListNow&&"tab-item-now"]),key:n,onClick:t=>e.showListNow=n},[Object(N["createElementVNode"])("div",Kl,Object(N["toDisplayString"])(null===t||void 0===t?void 0:t.label),1),Object(N["createElementVNode"])("div",Wl,Object(N["toDisplayString"])(null===t||void 0===t?void 0:t.count),1)],10,Yl)):Object(N["createCommentVNode"])("",!0)],64))),256))]),Object(N["createElementVNode"])("div",ql,[Object(N["createElementVNode"])("ul",null,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.readReceiptList[e.showListNow].userList,(e,t)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:t,class:"body-list-item"},[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===e||void 0===e?void 0:e.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Zl),Object(N["createElementVNode"])("div",Xl,Object(N["toDisplayString"])((null===e||void 0===e?void 0:e.nick)||(null===e||void 0===e?void 0:e.userID)),1)]))),128))]),e.readReceiptList[e.showListNow].isCompleted?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:"more",onClick:t[2]||(t[2]=(...t)=>e.getMoreList&&e.getMoreList(...t))},"查看更多"))])])],2)):Object(N["createCommentVNode"])("",!0)}const Ql=Object(N["defineComponent"])({type:"custom",props:{message:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1},show:{type:Boolean,default:()=>!1}},setup(e,t){const{t:n}=window.TUIKitTUICore.config.i18n.useI18n(),o=Object(N["reactive"])({message:{},isGroup:!1,show:!1,isH5:!1,messageInfo:{isImg:!1,content:""},readReceiptList:[{label:e.isH5?n("TUIChat.人已读"):n("TUIChat.已读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人未读"):n("TUIChat.未读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人关闭阅读状态"):n("TUIChat.关闭阅读状态"),count:0,userList:[],isCompleted:!0,cursor:"",show:!1}],showListNow:0,isMenuOpen:!0,env:Object(S["b"])()}),i=Object(N["ref"])();Object(N["watchEffect"])(()=>{o.show=e.show,o.isH5=e.isH5}),Object(N["watch"])(()=>{e.message,o.show},async()=>{var t,n,a,i;o.show&&(v(),o.message=e.message,u(),m(),o.readReceiptList[0].count=(null===(t=o.message)||void 0===t||null===(n=t.readReceiptInfo)||void 0===n?void 0:n.readCount)||o.readReceiptList[0].count,o.readReceiptList[1].count=(null===(a=o.message)||void 0===a||null===(i=a.readReceiptInfo)||void 0===i?void 0:i.unreadCount)||o.readReceiptList[1].count,l(),c())},{deep:!0});const r=()=>{o.show=!o.show,o.show||(t.emit("closeDialog","receipt"),h())};Object(pn["onClickOutside"])(i,()=>{o.show=!1,t.emit("closeDialog","receipt"),h()});const l=async(e=!1)=>{if(o.isGroup&&o.message&&0!==s()(o.message).length)try{var t,a;const n=await Ql.TUIServer.getGroupReadMemberList(o.message,e?o.readReceiptList[0].cursor:"");o.readReceiptList[0].isCompleted=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.isCompleted,o.readReceiptList[0].cursor=(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.cursor)||"";const i=n.data.readUserIDList,s=await d(i);o.readReceiptList[0].userList=e?[...o.readReceiptList[0].userList,...s]:s}catch(i){if(i&&10062===(null===i||void 0===i?void 0:i.code)){const e=n("TUIChat.您当前购买使用的套餐包暂未开通群消息已读回执功能");Object(hn["b"])(e,o.env),console.warn(e)}}},c=async(e=!1)=>{var t;if(!o.isGroup||!o.message||0===s()(o.message).length)return;const n=await Ql.TUIServer.getGroupUnreadMemberList(o.message,e?o.readReceiptList[1].cursor:"");o.readReceiptList[1].isCompleted=null===n||void 0===n?void 0:n.data.isCompleted,o.readReceiptList[1].cursor=(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.cursor)||"";const a=n.data.unreadUserIDList,i=await d(a);o.readReceiptList[1].userList=e?[...o.readReceiptList[1].userList,...i]:i},d=async e=>{const t=[];if(e.length&&o.isGroup){const n=await Ql.TUIServer.getUserProfile(e),o=n.data;a()(o).call(o,e=>{t.push({nick:null===e||void 0===e?void 0:e.nick,avatar:null===e||void 0===e?void 0:e.avatar,userID:null===e||void 0===e?void 0:e.userID})})}return t},u=()=>{var e;(null===(e=o.message)||void 0===e?void 0:e.conversationType)===Ql.TUIServer.TUICore.TIM.TYPES.CONV_GROUP?o.isGroup=!0:o.isGroup=!1},p=()=>{switch(o.showListNow){case 0:l(!0);break;case 1:c(!0);break;default:break}},h=()=>{o.message={},o.readReceiptList=[{label:e.isH5?n("TUIChat.人已读"):n("TUIChat.已读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人未读"):n("TUIChat.未读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人关闭阅读状态"):n("TUIChat.关闭阅读状态"),count:0,userList:[],isCompleted:!0,cursor:"",show:!1}],o.showListNow=0,o.messageInfo={isImg:!1,content:""}},m=()=>{var e,t,a,i,s,r,l;if(o.message&&o.isH5)switch(o.message.type){case Ql.TUIServer.TUICore.TIM.TYPES.MSG_TEXT:o.messageInfo.content=null===(e=o.message)||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.text,o.messageInfo.isImg=!1;break;case Ql.TUIServer.TUICore.TIM.TYPES.MSG_CUSTOM:o.messageInfo.content=n("TUIChat.自定义"),o.messageInfo.isImg=!1;break;case Ql.TUIServer.TUICore.TIM.TYPES.MSG_IMAGE:o.messageInfo.content=null===(a=Object(U["j"])(o.message))||void 0===a?void 0:a.url,o.messageInfo.isImg=!0;break;case Ql.TUIServer.TUICore.TIM.TYPES.MSG_AUDIO:o.messageInfo.content=n("TUIChat.语音"),o.messageInfo.isImg=!1;break;case Ql.TUIServer.TUICore.TIM.TYPES.MSG_VIDEO:o.messageInfo.content=null===(i=Object(U["t"])(o.message))||void 0===i?void 0:i.snapshotUrl,o.messageInfo.isImg=!0;break;case Ql.TUIServer.TUICore.TIM.TYPES.MSG_FILE:o.messageInfo.content=n("TUIChat.文件")+(null===(s=o.message)||void 0===s||null===(r=s.payload)||void 0===r?void 0:r.fileName),o.messageInfo.isImg=!1;break;case Ql.TUIServer.TUICore.TIM.TYPES.MSG_FACE:o.messageInfo.content=null===(l=Object(U["h"])(o.message))||void 0===l?void 0:l.url,o.messageInfo.isImg=!0;break}},v=()=>{var e,t;o.isMenuOpen=!(null===(e=document)||void 0===e||null===(t=e.getElementsByClassName("home-menu"))||void 0===t||!t.length)};return{...Object(N["toRefs"])(o),dialog:i,toggleShow:r,getReadList:l,getUnreadList:c,isGroup:u,handleAvatarAndName:d,close:h,getMoreList:p,showMessage:m,caculateTimeago:hn["a"],handleDialogPosition:v}}});var ec=Ql;n("01ce");const tc=le()(ec,[["render",Jl],["__scopeId","data-v-103b5294"]]);var nc=tc,oc=nc;const ac={class:"header"},ic={class:"header-back"},sc={class:"header-title"},rc={class:"header-close"},lc={class:"body"},cc={class:"body-message"},dc={class:"body-list"};function uc(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("RepliesItem");return e.show?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["replies",[e.isH5?"replies-H5":"",e.isMenuOpen?"replies-menu-open":""]]),ref:"dialog"},[Object(N["createElementVNode"])("div",ac,[Object(N["createElementVNode"])("div",ic,[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))})):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("div",sc,[Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.$t("TUIChat.回复详情")),1)]),Object(N["createElementVNode"])("div",rc,[e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-close",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))}))])]),Object(N["createElementVNode"])("div",lc,[Object(N["createElementVNode"])("div",cc,[Object(N["createVNode"])(s,{message:e.message,isH5:e.isH5,isRoot:!0},null,8,["message","isH5"])]),Object(N["createElementVNode"])("div",dc,[Object(N["createElementVNode"])("ul",null,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.replies,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:n,class:"body-list-item"},[Object(N["createVNode"])(s,{message:t,isH5:e.isH5,isRoot:!1},null,8,["message","isH5"])]))),128))])])])],2)):Object(N["createCommentVNode"])("",!0)}const pc=e=>(Object(N["pushScopeId"])("data-v-c1a2ea1e"),e=e(),Object(N["popScopeId"])(),e),hc={class:"message-bubble",ref:"htmlRefHook"},mc=["src"],vc={class:"message-area"},fc={class:"message-area-title"},gc={class:"name"},bc={class:"time"},Oc={class:"content content-in"},yc={key:1},jc=["src"],Ic=pc(()=>Object(N["createElementVNode"])("i",{class:"icon icon-voice"},null,-1)),kc={key:4,class:"message-video-cover"},wc=["src"],Ec=["src"],Cc={key:6,class:"message-file"},Tc=pc(()=>Object(N["createElementVNode"])("i",{class:"icon icon-files"},null,-1)),_c={class:"message-file-content"};function Sc(e,t,n,o,a,i){var s,r,l,c,d,u,p,h,m,v,f,g,b,O,y,j,I,k,w,E;const C=Object(N["resolveComponent"])("MessageText"),T=Object(N["resolveComponent"])("MessageEmojiReact");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["replies-item",e.isRoot?"":"replies-item-normal"])},[Object(N["createElementVNode"])("div",hc,[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===(s=e.message)||void 0===s?void 0:s.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,mc),Object(N["createElementVNode"])("main",vc,[Object(N["createElementVNode"])("div",fc,[Object(N["createElementVNode"])("label",gc,Object(N["toDisplayString"])(e.isRoot?e.message.nameCard||e.message.nick||e.message.from:e.message.messageSender),1),Object(N["createElementVNode"])("label",bc,Object(N["toDisplayString"])(e.caculateTimeago(1e3*(e.isRoot?null===(r=e.message)||void 0===r?void 0:r.time:null===(l=e.message)||void 0===l?void 0:l.messageTime))),1)]),Object(N["createElementVNode"])("div",Oc,[e.message.messageType!==e.constant.typeText&&e.message.type!==e.TIM.TYPES.MSG_TEXT&&e.isRoot?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createBlock"])(C,{key:0,data:e.handleTextMessageShowContext(e.isRoot?e.message:{payload:{text:null===(c=e.message)||void 0===c?void 0:c.messageAbstract}})},null,8,["data"])),e.message.messageType===e.constant.typeCustom||e.message.type===e.TIM.TYPES.MSG_CUSTOM?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",yc,Object(N["toDisplayString"])(null===(d=e.handleCustomMessageShowContext(e.message))||void 0===d?void 0:d.custom),1)):Object(N["createCommentVNode"])("",!0),e.message.messageType===e.constant.typeImage||e.message.type===e.TIM.TYPES.MSG_IMAGE?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:2,class:"message-img",src:null===(u=e.message)||void 0===u||null===(p=u.payload)||void 0===p?void 0:p.imageInfoArray[1].url},null,8,jc)):Object(N["createCommentVNode"])("",!0),e.message.messageType===e.constant.typeAudio||e.message.type===e.TIM.TYPES.MSG_AUDIO?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:3,class:"message-audio",style:Object(N["normalizeStyle"])(`width: ${10*(null===(h=e.message)||void 0===h||null===(m=h.payload)||void 0===m?void 0:m.second)+40}px`)},[Ic,Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(null===(v=e.message)||void 0===v||null===(f=v.payload)||void 0===f?void 0:f.second)+"s",1)],4)):Object(N["createCommentVNode"])("",!0),e.message.messageType===e.constant.typeVideo||e.message.type===e.TIM.TYPES.MSG_VIDEO?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",kc,[Object(N["createElementVNode"])("img",{class:"message-videoimg",src:(null===(g=e.message)||void 0===g||null===(b=g.payload)||void 0===b?void 0:b.snapshotUrl)||(null===(O=e.message)||void 0===O||null===(y=O.payload)||void 0===y?void 0:y.thumbUrl)},null,8,wc)])):Object(N["createCommentVNode"])("",!0),e.message.messageType===e.constant.typeFace||e.message.type===e.TIM.TYPES.MSG_FACE?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:5,class:"message-img",src:e.url},null,8,Ec)):Object(N["createCommentVNode"])("",!0),e.message.messageType===e.constant.typeFile||e.message.type===e.TIM.TYPES.MSG_FILE?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Cc,[Tc,Object(N["createElementVNode"])("div",_c,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(null===(j=e.message)||void 0===j||null===(I=j.payload)||void 0===I?void 0:I.fileName),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])((null===(k=e.handleFileMessageShowContext(e.message))||void 0===k?void 0:k.size)||(null===(w=e.message)||void 0===w||null===(E=w.payload)||void 0===E?void 0:E.fileSize)),1)])])):Object(N["createCommentVNode"])("",!0),Object(N["createVNode"])(T,{message:e.message,type:"content"},null,8,["message"])])])],512)],2)}const Dc=Object(N["defineComponent"])({props:{message:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1},isRoot:{type:Boolean,default:!1}},components:{MessageText:de,MessageEmojiReact:Zn},setup(e,t){const n=Object(N["reactive"])({message:{},isH5:!1,url:"",isRoot:!1,constant:$t["a"],TIM:Yn["a"]});return Object(N["watchEffect"])(()=>{var t,o;(n.message=e.message,n.isH5=e.isH5,n.isRoot=e.isRoot,n.message.type===Yn["a"].TYPES.MSG_FACE)&&(n.url=`https://web.sdk.qcloud.com/im/assets/face-elem/${null===(t=n.message)||void 0===t||null===(o=t.payload)||void 0===o?void 0:o.data}@2x.png`)}),{...Object(N["toRefs"])(n),handleTextMessageShowContext:U["r"],handleCustomMessageShowContext:U["g"],handleFileMessageShowContext:U["i"],caculateTimeago:hn["a"]}}});var Uc=Dc;n("3910");const Mc=le()(Uc,[["render",Sc],["__scopeId","data-v-c1a2ea1e"]]);var Nc=Mc;const Bc=Object(N["defineComponent"])({type:"custom",components:{RepliesItem:Nc},props:{message:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1},show:{type:Boolean,default:()=>!1},url:{type:String,default:""},messageList:{type:Array,default:()=>[]}},setup(e,t){const n=Object(N["reactive"])({message:{},isGroup:!1,show:!1,isH5:!1,url:"",showListNow:0,isMenuOpen:!0,replies:[],messageList:[],TIM:Yn["a"]}),o=Object(N["ref"])();Object(N["watchEffect"])(()=>{n.message=e.message,n.show=e.show,n.isH5=e.isH5,n.url=e.url,n.messageList=e.messageList}),Object(N["watch"])(()=>{n.message,n.messageList},()=>{n.message=e.message,n.messageList=e.messageList,s(n.message)},{deep:!0});const i=()=>{n.show=!n.show,n.show||(t.emit("closeDialog","replies"),r())};Object(pn["onClickOutside"])(o,()=>{n.show=!1,t.emit("closeDialog","replies"),r()});const s=e=>{try{var t,o;const{cloudCustomData:i}=e;if(!i)return;const s=Object(U["a"])(i);n.replies=null===s||void 0===s||null===(t=s.messageReplies)||void 0===t?void 0:t.replies,null===n||void 0===n||null===(o=n.replies)||void 0===o||a()(o).call(o,e=>{var t;const{messageID:o,messageSender:a}=e,i=I()(t=n.messageList).call(t,e=>e.ID===o||e.from===a);e.avatar=i?null===i||void 0===i?void 0:i.avatar:""})}catch(i){console.log(i)}},r=()=>{n.message={}},l=()=>{var e,t;n.isMenuOpen=!(null===(e=document)||void 0===e||null===(t=e.getElementsByClassName("home-menu"))||void 0===t||!t.length)};return{...Object(N["toRefs"])(n),dialog:o,toggleShow:i,close:r,caculateTimeago:hn["a"],handleDialogPosition:l}}});var Rc=Bc;n("d45a");const Lc=le()(Rc,[["render",uc],["__scopeId","data-v-43000c27"]]);var Vc=Lc,xc=Vc;const Pc=e=>(Object(N["pushScopeId"])("data-v-0003a24f"),e=e(),Object(N["popScopeId"])(),e),Ac={key:0,class:"call",id:"call"},Gc=Pc(()=>Object(N["createElementVNode"])("i",{class:"icon icon-call",title:"通话"},null,-1)),Hc=Pc(()=>Object(N["createElementVNode"])("i",{class:"icon icon-down-arrow",title:"通话"},null,-1)),$c=[Gc,Hc],zc={class:"call-main-content",ref:"dialog"},Fc={key:0,class:"icon icon-call-voice"},Yc={key:0,class:"icon icon-call-video"},Kc={class:"uncall-dialog-body"};function Wc(e,t,n,o,a,i){const r=Object(N["resolveComponent"])("Transfer"),l=Object(N["resolveComponent"])("Dialog");return e.handleShowCallIcon(e.conversation,e.isH5)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Ac,[Object(N["createElementVNode"])("div",{class:"call-icon",onClick:t[0]||(t[0]=(...t)=>e.toggleShowSelectDialog&&e.toggleShowSelectDialog(...t))},$c),Object(N["withDirectives"])(Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["call-main",[e.isH5&&"call-main-h5"]])},[Object(N["createElementVNode"])("div",zc,[Object(N["createElementVNode"])("div",{class:"call-main-voice",onClick:t[1]||(t[1]=t=>e.onClickCall(1))},[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",Fc)):Object(N["createCommentVNode"])("",!0),Object(N["createTextVNode"])(" "+Object(N["toDisplayString"])(e.$t("TUIChat.语音通话")),1)]),Object(N["createElementVNode"])("div",{class:"call-main-video",onClick:t[2]||(t[2]=t=>e.onClickCall(2))},[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",Yc)):Object(N["createCommentVNode"])("",!0),Object(N["createTextVNode"])(" "+Object(N["toDisplayString"])(e.$t("TUIChat.视频通话")),1)]),Object(N["createElementVNode"])("footer",null,[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:0,class:"close",onClick:t[3]||(t[3]=Object(N["withModifiers"])(t=>e.showSelectDialog=!1,["stop"]))},Object(N["toDisplayString"])(e.$t("TUIChat.取消")),1)):Object(N["createCommentVNode"])("",!0)])],512)],2),[[N["vShow"],e.showSelectDialog]]),Object(N["createVNode"])(l,{show:e.showGroupUserDialog,isH5:e.isH5,isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":t[4]||(t[4]=t=>e.showGroupUserDialog=t)},{default:Object(N["withCtx"])(()=>{var t;return[Object(N["createVNode"])(r,{isSearch:!0,title:e.showTitle,list:e.searchUserList,isH5:e.isH5,isRadio:"isC2C"===(null===(t=e.conversation)||void 0===t?void 0:t.type),onSearch:e.handleSearch,onSubmit:e.submit,onCancel:e.cancle},null,8,["title","list","isH5","isRadio","onSearch","onSubmit","onCancel"])]}),_:1},8,["show","isH5"]),Object(N["createVNode"])(l,{show:e.showUnsupportDialog,isH5:e.isH5,isHeaderShow:!0,isFooterShow:!0,background:!0,title:e.$t("TUIChat.欢迎使用TUICallKit"),"onUpdate:show":t[6]||(t[6]=t=>e.showUnsupportDialog=t)},{default:Object(N["withCtx"])(()=>{var n;return[Object(N["createElementVNode"])("div",null,[Object(N["createElementVNode"])("div",Kc,[Object(N["createElementVNode"])("p",null,Object(N["toDisplayString"])(e.errorContent),1),Object(N["withDirectives"])(Object(N["createElementVNode"])("p",null,[Object(N["createTextVNode"])(Object(N["toDisplayString"])(e.$t("TUIChat.请点击"))+" ",1),Object(N["createElementVNode"])("a",{onClick:t[5]||(t[5]=t=>{var n;return e.openLink(null===(n=e.errorLink)||void 0===n?void 0:n.url)})},Object(N["toDisplayString"])(e.$t("TUIChat."+(null===(n=e.errorLink)||void 0===n?void 0:n.label))),1),Object(N["createTextVNode"])(" "+Object(N["toDisplayString"])(e.$t("TUIChat.进行体验")),1)],512),[[N["vShow"],s()(e.errorLink).length>0]])])])]}),_:1},8,["show","isH5","title"])])):Object(N["createCommentVNode"])("",!0)}var qc=Ki,Zc=Pa;const Xc=Object(N["defineComponent"])({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1},conversation:{type:Object,default:()=>({})}},components:{Dialog:qc,Transfer:Zc},setup(e,t){var n,o;const{t:a}=Xc.TUIServer.TUICore.config.i18n.useI18n(),i=(null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o?void 0:o.isOfficial)&&Yt["c"]&&Object(Yt["c"])()||{},s=Object(N["reactive"])({showSelectDialog:!1,showCall:!1,showGroupUserDialog:!1,isH5:!1,isMute:!1,isHomeMenuOpen:!1,conversation:{},showTitle:"",searchUserList:[],memberList:[],mediaType:0,showUnsupportDialog:!1,errorContent:"",errorLink:{}}),r=Object(N["ref"])();Object(N["watchEffect"])(()=>{s.showSelectDialog=e.show,s.isMute=e.isMute,s.isH5=e.isH5,s.conversation=e.conversation}),Object(N["watch"])(()=>s.showCall,(e,t)=>{e!==t&&s.showCall&&d()});const c=()=>{s.isMute||(s.showSelectDialog=!0)};Object(pn["onClickOutside"])(r,()=>{s.showSelectDialog=!1});const d=()=>{var e,t;s.isHomeMenuOpen=!(null===(e=document)||void 0===e||null===(t=e.getElementsByClassName("home-menu"))||void 0===t||!t.length)},u=e=>{var t,n,o,a,r,l;if(s.showSelectDialog=!1,s.mediaType=e,null===Xc||void 0===Xc||null===(t=Xc.TUIServer)||void 0===t||null===(n=t.TUICore)||void 0===n||null===(o=n.TUIServer)||void 0===o||!o.TUICallKit)return O(),void Ft.getInstance().reportEvent({name:"callOptions",ext1:"call-uninstall"});switch(Ft.getInstance().reportEvent({name:"callOptions",ext1:"clickCall-success"}),(null===(a=window)||void 0===a||null===(r=a.TUIKitTUICore)||void 0===r?void 0:r.isOfficial)&&(null===i||void 0===i?void 0:i.commit)&&(null===i||void 0===i||i.commit("handleTask",6)),null===(l=s.conversation)||void 0===l?void 0:l.type){case Xc.TUIServer.TUICore.TIM.TYPES.CONV_C2C:p(s.conversation,e),Ft.getInstance().reportEvent({name:"callOptions",ext1:"call-c2c"});break;case Xc.TUIServer.TUICore.TIM.TYPES.CONV_GROUP:m(e),Ft.getInstance().reportEvent({name:"callOptions",ext1:"call-group"});break;default:break}},p=async(e,t,n=[])=>{const o=e.type;switch(o){case Xc.TUIServer.TUICore.TIM.TYPES.CONV_C2C:try{var a;await Xc.TUIServer.TUICore.TUIServer.TUICallKit.call({userID:null===e||void 0===e||null===(a=e.userProfile)||void 0===a?void 0:a.userID,type:t})}catch(s){O(s)}break;case Xc.TUIServer.TUICore.TIM.TYPES.CONV_GROUP:try{var i;await Xc.TUIServer.TUICore.TUIServer.TUICallKit.groupCall({userIDList:n,groupID:null===e||void 0===e||null===(i=e.groupProfile)||void 0===i?void 0:i.groupID,type:t})}catch(s){O(s)}break;default:break}},h=(e,t)=>{var n,o,a,i,s,r,l;return(e.type!==Xc.TUIServer.TUICore.TIM.TYPES.CONV_C2C||(null===e||void 0===e||null===(n=e.userProfile)||void 0===n?void 0:n.userID)!==(null===Xc||void 0===Xc||null===(o=Xc.TUIServer)||void 0===o||null===(a=o.TUICore)||void 0===a||null===(i=a.TUIServer)||void 0===i||null===(s=i.TUIProfile)||void 0===s||null===(r=s.currentStore)||void 0===r||null===(l=r.profile)||void 0===l?void 0:l.userID))&&(Ft.getInstance().reportEvent({name:"callOptions",ext1:"clickCall"}),!0)},m=e=>{var t,n,o,i,r,l,c;s.showGroupUserDialog=!0,s.showTitle=a(1===e?"TUIChat.发起群语音":"TUIChat.发起群视频");const d={groupID:null===s||void 0===s||null===(t=s.conversation)||void 0===t||null===(n=t.groupProfile)||void 0===n?void 0:n.groupID,count:100,offset:0};null===Xc||void 0===Xc||null===(o=Xc.TUIServer)||void 0===o||null===(i=o.TUICore)||void 0===i||null===(r=i.TUIServer)||void 0===r||null===(l=r.TUIGroup)||void 0===l||null===(c=l.getGroupMemberList(d))||void 0===c||c.then(e=>{var t,n,o,a,i,r,l;const c=null===(t=s.conversation)||void 0===t||null===(n=t.groupProfile)||void 0===n||null===(o=n.selfInfo)||void 0===o?void 0:o.userID;let d=[];if(null!==s&&void 0!==s&&null!==(a=s.conversation)&&void 0!==a&&null!==(i=a.groupProfile)&&void 0!==i&&i.muteAllMembers)d=[];else{var u;const t=(new Date).getTime();d=y()(u=e.data.memberList).call(u,e=>(null===e||void 0===e?void 0:e.userID)!==c&&(!(1e3*(null===e||void 0===e?void 0:e.muteUntil)-t>0)&&e))}null!==s&&void 0!==s&&null!==(r=s.conversation)&&void 0!==r&&null!==(l=r.groupProfile)&&void 0!==l&&l.muteAllMembers&&(d=[]),s.memberList=d,s.searchUserList=d})},v=async e=>{var t;const n=null===(t=s.memberList)||void 0===t?void 0:y()(t).call(t,t=>(null===t||void 0===t?void 0:t.userID)===e);s.searchUserList=null!==n&&void 0!==n&&n.length?n:s.memberList},f=e=>{s.searchUserList=s.memberList,s.showGroupUserDialog=!1;const t=null===e||void 0===e?void 0:l()(e).call(e,e=>null===e||void 0===e?void 0:e.userID);p(s.conversation,s.mediaType,t)},g=()=>{s.showGroupUserDialog=!1,s.mediaType=0},b=e=>{e&&(window.open(e),Ft.getInstance().reportEvent({name:"openLink",ext1:"callkit-doc"}))},O=e=>{var t;e?(null===e||void 0===e||null===(t=e.message)||void 0===t?void 0:_()(t).call(t,"The package you purchased does not support this ability."))>=0?(s.showUnsupportDialog=!0,s.errorContent=a("TUIChat.您当前购买使用的套餐包暂未开通此功能"),s.errorLink=Qi.purchase):(s.errorContent=(null===e||void 0===e?void 0:e.message)||e,s.showUnsupportDialog=!1,s.errorLink={}):(s.showUnsupportDialog=!0,s.errorContent=a("TUIChat.检测到您暂未集成TUICallKit，无法体验音视频通话功能"),s.errorLink=Qi.implement)};return{...Object(N["toRefs"])(s),toggleShowSelectDialog:c,dialog:r,onClickCall:u,handleCallDialogPosition:d,handleCall:p,handleGroupDialog:m,handleSearch:v,submit:f,cancle:g,handleShowCallIcon:h,openLink:b,handleUnsupportDialog:O}}});var Jc=Xc;n("ec3a");const Qc=le()(Jc,[["render",Wc],["__scopeId","data-v-0003a24f"]]);var ed=Qc,td=ed,nd=n("1eaf"),od=n.n(nd),ad=n("6ba3"),id=n("3654");const sd=e=>(Object(N["pushScopeId"])("data-v-09cbf3ec"),e=e(),Object(N["popScopeId"])(),e),rd=["src"],ld=sd(()=>Object(N["createElementVNode"])("i",{class:"icon icon-left-arrow"},null,-1)),cd=[ld],dd=sd(()=>Object(N["createElementVNode"])("i",{class:"icon icon-right-arrow"},null,-1)),ud=[dd],pd={class:"actions-bar"},hd={class:"image-counter"};var md=Object(N["defineComponent"])({__name:"imagePreviewer",props:{imageList:{type:Array,default:()=>[]},currentImage:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:t}){const n=e,o=Object(N["ref"])(1),a=Object(N["ref"])(0),i=Object(N["ref"])(.1),s=Object(N["ref"])(0),r=Object(N["ref"])(),l=Object(N["ref"])(),{isH5:c}=Object(ad["a"])();let d=0,u={},p=!1,h=!1,m=null;Object(N["watchEffect"])(()=>{var e;s.value=w()(e=n.imageList).call(e,e=>e.ID===n.currentImage.ID)});const v=e=>{e.preventDefault(),j(e),I(e)},f=e=>{e.preventDefault(),p=!0,e.touches&&2===e.touches.length&&(h=!0,k(e))},g=e=>{var t;e.preventDefault();let n=0,o=0;if(h)m||(h=!1,delete u.pageX2,delete u.pageY2,m=b()(()=>{m=null},200));else if(null===m){switch(p){case!0:n=null===e||void 0===e||null===(t=e.changedTouches[0])||void 0===t?void 0:t.pageX,o=n-d,o>100?M():o<-100&&U();break;case!1:_();break}m=b()(()=>{m=null},200)}},O=e=>{h=!1,delete u.pageX1,delete u.pageY1},y=e=>{if(e.preventDefault(),0!==Math.abs(e.deltaX)&&0!==Math.abs(e.deltaY))return;let t=o.value;t+=e.deltaY*(e.ctrlKey?-.01:.002),t=Math.min(Math.max(.125,t),4),o.value=t},j=e=>{var t;d=null===e||void 0===e||null===(t=e.changedTouches[0])||void 0===t?void 0:t.pageX,p=!1},I=e=>{let t=null===e||void 0===e?void 0:e.touches[0],n=null===e||void 0===e?void 0:e.touches[1];u.pageX1=null===t||void 0===t?void 0:t.pageX,u.pageY1=null===t||void 0===t?void 0:t.pageY,n&&(u.pageX2=null===n||void 0===n?void 0:n.pageX,u.pageY2=null===n||void 0===n?void 0:n.pageY)},k=e=>{let t=null===e||void 0===e?void 0:e.touches[0],n=null===e||void 0===e?void 0:e.touches[1];n&&(Object(id["isNumber"])(u.pageX2)||(u.pageX2=n.pageX),Object(id["isNumber"])(u.pageY2)||(u.pageY2=n.pageY));const a=(e,t,n,o)=>od()(n-e,o-t);if(!Object(id["isNumber"])(u.pageX1)||!Object(id["isNumber"])(u.pageY1)||!Object(id["isNumber"])(u.pageX2)||!Object(id["isNumber"])(u.pageY2))return;let i=a(t.pageX,t.pageY,n.pageX,n.pageY)/a(u.pageX1,u.pageY1,u.pageX2,u.pageY2);o.value=Math.min(Math.max(.5,o.value*i),4)};Object(N["onMounted"])(()=>{var e,t,n,o,a,i;null===r||void 0===r||null===(e=r.value)||void 0===e||e.addEventListener("touchstart",v),null===r||void 0===r||null===(t=r.value)||void 0===t||t.addEventListener("touchmove",f),null===r||void 0===r||null===(n=r.value)||void 0===n||n.addEventListener("touchend",g),null===r||void 0===r||null===(o=r.value)||void 0===o||o.addEventListener("touchcancel;",O),null===r||void 0===r||null===(a=r.value)||void 0===a||a.addEventListener("wheel",y),null===(i=document)||void 0===i||i.addEventListener("keydown",E)});const E=e=>{e.preventDefault(),27===(null===e||void 0===e?void 0:e.keyCode)&&_()},C=()=>{o.value+=.1},T=()=>{o.value=o.value-.1>i.value?o.value-.1:i.value},_=()=>{t("close")},S=()=>{a.value-=90},D=()=>{a.value+=90},U=()=>{l.value.style.transition="0.5s",s.value<n.imageList.length-1&&s.value++,B()},M=()=>{l.value.style.transition="0.5s",s.value>0&&s.value--,B()},B=()=>{o.value=1,a.value=0};return Object(N["onUnmounted"])(()=>{var e,t,n,o,a,i;null===r||void 0===r||null===(e=r.value)||void 0===e||e.removeEventListener("touchstart",v),null===r||void 0===r||null===(t=r.value)||void 0===t||t.removeEventListener("touchmove",f),null===r||void 0===r||null===(n=r.value)||void 0===n||n.removeEventListener("touchend",g),null===r||void 0===r||null===(o=r.value)||void 0===o||o.removeEventListener("touchcancel;",O),null===r||void 0===r||null===(a=r.value)||void 0===a||a.removeEventListener("wheel",y),null===(i=document)||void 0===i||i.removeEventListener("keydown",E)}),(t,n)=>{var i;return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["image-previewer",[Object(N["unref"])(c)&&"image-previewer-h5"]])},[Object(N["createElementVNode"])("div",{class:"image-wrapper",ref_key:"image",ref:r},[Object(N["createElementVNode"])("ul",{class:"image-list",style:Object(N["normalizeStyle"])({width:100*e.imageList.length+"%",transform:`translateX(-${100*s.value/e.imageList.length}%)`}),ref_key:"ul",ref:l},[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.imageList,(e,t)=>{var n,i;return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"image-item",key:t},[Object(N["createElementVNode"])("img",{class:"image-preview",style:Object(N["normalizeStyle"])({transform:`scale(${o.value}) rotate(${a.value}deg)`}),src:null===e||void 0===e||null===(n=e.payload)||void 0===n||null===(i=n.imageInfoArray[0])||void 0===i?void 0:i.url},null,12,rd)])}),128))],4)],512),Object(N["withDirectives"])(Object(N["createElementVNode"])("i",{class:"icon icon-close",onClick:_},null,512),[[N["vShow"],!Object(N["unref"])(c)]]),Object(N["withDirectives"])(Object(N["createElementVNode"])("div",{class:"image-button image-button-left",onClick:M},cd,512),[[N["vShow"],!Object(N["unref"])(c)&&s.value>0]]),Object(N["withDirectives"])(Object(N["createElementVNode"])("div",{class:"image-button image-button-right",onClick:U},ud,512),[[N["vShow"],!Object(N["unref"])(c)&&s.value<(null===(i=e.imageList)||void 0===i?void 0:i.length)-1]]),Object(N["createElementVNode"])("div",pd,[Object(N["createElementVNode"])("i",{class:"icon icon-zoom-in",onClick:C}),Object(N["createElementVNode"])("i",{class:"icon icon-zoom-out",onClick:T}),Object(N["createElementVNode"])("i",{class:"icon icon-refresh-left",onClick:S}),Object(N["createElementVNode"])("i",{class:"icon icon-refresh-right",onClick:D}),Object(N["createElementVNode"])("span",hd,Object(N["toDisplayString"])(s.value+1)+" / "+Object(N["toDisplayString"])(e.imageList.length),1)])],2)}}});n("cfc8");const vd=le()(md,[["__scopeId","data-v-09cbf3ec"]]);var fd=vd,gd=fd;let bd={Face:_r,Image:Rr,Video:Hr,File:qr,Evaluate:Tl,Words:ul,Call:td};const Od={Forward:tl},yd={TypingHeader:Nl,ReadReceiptDialog:oc,Replies:xc,ImagePreviewer:gd,MessageInput:lr};function jd(e){let t={};switch(e){case"send":t=bd;break;case"message":t=Od;break;case"other":t=yd;break;default:break}return t}const Id=e=>{var t;const n={...bd,...Od,...yd};a()(t=s()(n)).call(t,e=>{n[e].TUIServer=Cd.server}),pr.TUIServer=Cd.server,pr.components={...pr.components,...n},e.component(Cd.name,pr)},kd=e=>(Cd.server=new M(e),e.component(Cd.name,Cd),Cd),wd=e=>{bd={...bd,...e}},Ed=e=>{l()(e).call(e,e=>(delete bd[e],e))},Cd={name:"TUIChat",component:pr,server:M,sendComponents:bd,messageComponents:Od,otherComponents:yd,install:Id,plugin:kd,setPluginComponents:wd,removePluginComponents:Ed};var Td=Cd;class _d extends D{constructor(e){var t;super(),this.currentStore={},this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIConversation",{},d()(t=this.updateStore).call(t,this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){var n,o,a;null!==this&&void 0!==this&&null!==(n=this.currentStore)&&void 0!==n&&n.conversationData&&(this.currentStore.conversationData.list=e.conversationList,this.currentStore.userIDList=null===(o=this.currentStore.conversationData.list)||void 0===o?void 0:l()(a=y()(o).call(o,e=>{var t;return null===e||void 0===e||null===(t=e.userProfile)||void 0===t?void 0:t.userID})).call(a,e=>{var t;return null===e||void 0===e||null===(t=e.userProfile)||void 0===t?void 0:t.userID}))}handlePromiseCallback(e){return new f.a((t,n)=>{const o={TUIName:"TUIConversation",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)})}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.NET_STATE_CHANGE,this.handleNetStateChange,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate),this.TUICore.tim.off(this.TUICore.TIM.EVENT.NET_STATE_CHANGE,this.handleNetStateChange)}handleConversationListUpdate(e){this.handleFilterSystem(e.data)}handleNetStateChange(e){var t;this.currentStore.netWork=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.state)||""}handleFilterSystem(e){const t={allConversationList:e,conversationList:[]},n=y()(e).call(e,e=>{var t;return(null===e||void 0===e?void 0:e.conversationID)===(null===this||void 0===this||null===(t=this.currentStore)||void 0===t?void 0:t.currentConversationID)});return 0===n.length&&this.handleCurrentConversation({}),t.conversationList=y()(e).call(e,e=>e.type!==this.TUICore.TIM.TYPES.CONV_SYSTEM),this.store.allConversationList=t.allConversationList,this.store.conversationList=t.conversationList,t}async setMessageRead(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.setMessageRead({conversationID:e});t(n)}catch(o){n(o)}})}async deleteConversation(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.deleteConversation(e);t(n)}catch(o){n(o)}})}async pinConversation(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.pinConversation(e);t(n)}catch(o){n(o)}})}async muteConversation(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.setMessageRemindType(e);t(n)}catch(o){n(o)}})}async getConversationProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getConversationProfile(e);t(n)}catch(o){n(o)}})}async getConversationList(){return this.handlePromiseCallback(async(e,t)=>{try{const t=await this.TUICore.tim.getConversationList();this.handleFilterSystem(t.data.conversationList),e(t)}catch(n){t(n)}})}async getUserProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}})}async bind(e){return this.currentStore=e,await this.getConversationList(),this.currentStore}handleCurrentConversation(e){this.TUICore.getStore().TUIChat.conversation=e||{},null!==e&&void 0!==e&&e.conversationID?(this.currentStore.currentConversationID===(null===e||void 0===e?void 0:e.conversationID)&&(this.currentStore.currentConversationID=""),this.currentStore.currentConversationID&&this.setMessageRead(this.currentStore.currentConversationID),this.currentStore.currentConversationID=null===e||void 0===e?void 0:e.conversationID,this.setMessageRead(e.conversationID)):this.currentStore.currentConversationID=""}}const Sd=e=>(Object(N["pushScopeId"])("data-v-a8b11794"),e=e(),Object(N["popScopeId"])(),e),Dd={class:"TUI-conversation"},Ud={key:0,class:"network"},Md=Sd(()=>Object(N["createElementVNode"])("i",{class:"icon icon-error"},"!",-1)),Nd={class:"TUI-conversation-list"};function Bd(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("TUIConversationList");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Dd,[e.isNetwork?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Ud,[Md,Object(N["createElementVNode"])("p",null,"️"+Object(N["toDisplayString"])(e.$t("TUIConversation.网络异常，请您检查网络设置")),1)])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("main",Nd,[Object(N["createVNode"])(s,{currentID:e.currentConversationID,data:e.conversationData,onHandleItem:e.handleCurrentConversation,isH5:e.env.isH5,displayOnlineStatus:e.displayOnlineStatus,userStatusList:e.userStatusList},null,8,["currentID","data","onHandleItem","isH5","displayOnlineStatus","userStatusList"])])])}function Rd(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("LiteItem");return Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",{class:Object(N["normalizeClass"])(["TUI-conversation-list",[e.isH5?"list-h5":""]]),ref:"list",onMousewheel:t[0]||(t[0]=(...t)=>e.scrollChange&&e.scrollChange(...t)),onScroll:t[1]||(t[1]=(...t)=>e.scrollChange&&e.scrollChange(...t))},[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.data.list,(t,n)=>(Object(N["openBlock"])(),Object(N["createBlock"])(s,{isH5:e.isH5,key:n,currentID:e.currentID,conversation:t,toggleID:e.toggleID,handleConversation:{avator:e.data.handleItemAvator,name:e.data.handleItemName,showAt:e.data.handleShowAt,showMessage:e.data.handleShowMessage,time:e.data.handleItemTime,userID:e.data.handleItemUserID},displayOnlineStatus:e.displayOnlineStatus,userStatusList:e.userStatusList,onToggle:e.handleToggleListItem,onOpen:e.handleListItem,onHandle:e.handleItem,types:e.types},null,8,["isH5","currentID","conversation","toggleID","handleConversation","displayOnlineStatus","userStatusList","onToggle","onOpen","onHandle","types"]))),128))],34)}var Ld=n("d35b"),Vd=n.n(Ld);const xd=e=>(Object(N["pushScopeId"])("data-v-dd15d494"),e=e(),Object(N["popScopeId"])(),e),Pd=["id"],Ad={class:"left"},Gd=["src"],Hd={key:1,class:"num"},$d={key:2,class:"num-notify"},zd={class:"content"},Fd={class:"content-header"},Yd={class:"name"},Kd={class:"middle-box"},Wd={key:0,class:"middle-box-at"},qd={class:"content-footer"},Zd={class:"time"},Xd={key:0,class:"mute-icon",src:Vd.a},Jd=xd(()=>Object(N["createElementVNode"])("i",null,null,-1)),Qd={key:0,class:"dialog dialog-item",ref:"dialog"};function eu(e,t,n,o,a,i){var s,r,l,c,d,u,p,h,m;const v=Object(N["resolveDirective"])("TUILongPress");return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{ref:"content",class:Object(N["normalizeClass"])(["TUI-conversation-content",[e.currentID===e.conversation.conversationID&&"selected",e.conversation.isPinned&&"pinned",e.isH5?"list-item-h5":""]]),id:e.conversation.conversationID},[Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:"TUI-conversation-item",onClick:t[0]||(t[0]=Object(N["withModifiers"])(t=>e.handleListItem(e.conversation),["prevent","stop"])),onContextmenu:t[1]||(t[1]=Object(N["withModifiers"])((...t)=>e.toggleDialog&&e.toggleDialog(...t),["prevent","right"]))},[Object(N["createElementVNode"])("aside",Ad,[Object(N["createElementVNode"])("img",{class:"avatar",src:null===(s=e.handleConversation)||void 0===s?void 0:s.avator(e.conversation)},null,8,Gd),e.showUserOnlineStatus()?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["online-status",1===(null===(r=e.userStatusList)||void 0===r||null===(l=r.get(null===(c=e.conversation)||void 0===c||null===(d=c.userProfile)||void 0===d?void 0:d.userID))||void 0===l?void 0:l.statusType)?"online-status-online":"online-status-offline"])},null,2)):Object(N["createCommentVNode"])("",!0),e.conversation.unreadCount>0&&"AcceptNotNotify"!==e.conversation.messageRemindType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",Hd,Object(N["toDisplayString"])(e.conversation.unreadCount>99?"99+":e.conversation.unreadCount),1)):Object(N["createCommentVNode"])("",!0),e.conversation.unreadCount>0&&"AcceptNotNotify"===e.conversation.messageRemindType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",$d)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("div",zd,[Object(N["createElementVNode"])("div",Fd,[Object(N["createElementVNode"])("label",null,[Object(N["createElementVNode"])("p",Yd,Object(N["toDisplayString"])(null===(u=e.handleConversation)||void 0===u?void 0:u.name(e.conversation)),1)]),Object(N["createElementVNode"])("div",Kd,["GROUP"===e.conversation.type&&e.conversation.groupAtInfoList.length>0?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",Wd,Object(N["toDisplayString"])(null===(p=e.handleConversation)||void 0===p?void 0:p.showAt(e.conversation)),1)):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("p",null,Object(N["toDisplayString"])(null===(h=e.handleConversation)||void 0===h?void 0:h.showMessage(e.conversation)),1)])]),Object(N["createElementVNode"])("div",qd,[Object(N["createElementVNode"])("span",Zd,Object(N["toDisplayString"])(null===(m=e.handleConversation)||void 0===m?void 0:m.time(e.conversation.lastMessage.lastTime)),1),"AcceptNotNotify"===e.conversation.messageRemindType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",Xd)):Object(N["createCommentVNode"])("",!0),Jd])])],32)),[[v,e.toggleDialog,void 0,{self:!0}]]),e.toggle?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Qd,[Object(N["createElementVNode"])("p",{class:"conversation-options",onClick:t[2]||(t[2]=Object(N["withModifiers"])(t=>e.handleItem("delete"),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIConversation.删除会话")),1),e.conversation.isPinned?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",{key:0,class:"conversation-options",onClick:t[3]||(t[3]=Object(N["withModifiers"])(t=>e.handleItem("ispinned"),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIConversation.置顶会话")),1)),e.conversation.isPinned?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",{key:1,class:"conversation-options",onClick:t[4]||(t[4]=Object(N["withModifiers"])(t=>e.handleItem("dispinned"),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIConversation.取消置顶")),1)):Object(N["createCommentVNode"])("",!0),""===e.conversation.messageRemindType||"AcceptAndNotify"===e.conversation.messageRemindType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",{key:2,class:"conversation-options",onClick:t[5]||(t[5]=Object(N["withModifiers"])(t=>e.handleItem("mute"),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIConversation.消息免打扰")),1)):Object(N["createCommentVNode"])("",!0),"AcceptNotNotify"===e.conversation.messageRemindType?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",{key:3,class:"conversation-options",onClick:t[6]||(t[6]=Object(N["withModifiers"])(t=>e.handleItem("notMute"),["stop"]))},Object(N["toDisplayString"])(e.$t("TUIConversation.取消免打扰")),1)):Object(N["createCommentVNode"])("",!0)],512)):Object(N["createCommentVNode"])("",!0)],10,Pd)}const tu=Object(N["defineComponent"])({props:{conversation:{type:Object,default:()=>({})},handleConversation:{type:Object,default:()=>({})},currentID:{type:String,default:()=>""},toggleID:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},displayOnlineStatus:{type:Boolean,default:()=>!1},userStatusList:{type:ts.a,default:()=>new ts.a},types:{type:Object,default:()=>({})}},setup(e,t){const n=Object(N["reactive"])({conversation:{},currentID:"",currentConversation:{},toggle:!1,currentuserID:"",conversationType:"",loop:0,displayOnlineStatus:!1,userStatusList:new ts.a}),o=Object(N["ref"])(),a=Object(N["ref"])();Object(pn["onClickOutside"])(a,()=>{!0===n.toggle&&t.emit("toggle","")}),Object(N["watchEffect"])(()=>{n.conversation=e.conversation,n.currentID=e.currentID,n.toggle=!1,n.displayOnlineStatus=e.displayOnlineStatus,n.userStatusList=e.userStatusList,e.toggleID===e.conversation.conversationID&&(n.toggle=!0)}),Object(N["watch"])(()=>n.toggle,e=>{e&&Object(N["nextTick"])(()=>{var e;const t=Object(pn["useElementBounding"])(o),n=null===a||void 0===a||null===(e=a.value)||void 0===e?void 0:e.offsetParent,i=Object(pn["useElementBounding"])(n);t.top.value-i.top.value-t.height.value-30>0&&(o.value.style.top="auto",o.value.style.bottom="30px")})});const i=e=>{t.emit("open",e),t.emit("toggle","")},s=e=>{var o;null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&o.oncontextmenu&&(e.target.oncontextmenu=function(){return!1}),t.emit("toggle",n.conversation.conversationID)},r=e=>{t.emit("handle",{name:e,conversation:n.conversation}),t.emit("toggle","")},l=()=>{var t;return!(!n.displayOnlineStatus||(null===(t=n.conversation)||void 0===t?void 0:t.type)!==e.types.CONV_C2C)};return{...Object(N["toRefs"])(n),handleListItem:i,handleItem:r,dialog:o,content:a,toggleDialog:s,showUserOnlineStatus:l}}});var nu=tu;n("073e");const ou=le()(nu,[["render",eu],["__scopeId","data-v-dd15d494"]]);var au=ou,iu=au;const su=Object(N["defineComponent"])({props:{data:{type:Object,default:()=>({})},currentID:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},displayOnlineStatus:{type:Boolean,default:()=>!1},userStatusList:{type:ts.a,default:()=>new ts.a}},components:{LiteItem:iu},setup(e,t){const n=null===su||void 0===su?void 0:su.TUIServer,o=Object(N["reactive"])({data:{},currentID:"",toggleID:"",displayOnlineStatus:!1,userStatusList:new ts.a,types:n.TUICore.TIM.TYPES}),a=Object(N["ref"])();Object(N["watchEffect"])(()=>{o.data=e.data,o.currentID=e.currentID,o.displayOnlineStatus=e.displayOnlineStatus,o.userStatusList=e.userStatusList}),Object(N["watch"])(()=>e.userStatusList,()=>{o.userStatusList=e.userStatusList},{deep:!0});const i=e=>{t.emit("handleItem",e)},s=e=>{const{name:t,conversation:n}=e;switch(Ft.getInstance().reportEvent({name:"conversationOptions",ext1:"conversationOptions"}),t){case"delete":r(n);break;case"ispinned":l(t,n);break;case"dispinned":l(t,n);break;case"mute":c(t,n);break;case"notMute":c(t,n);break}},r=e=>{n.deleteConversation(e.conversationID).then(e=>{Ft.getInstance().reportEvent({name:"conversationOptions",ext1:"conversationDelete"});const{conversationID:t}=e.data,{conversation:o}=n.TUICore.getStore().TUIChat;o.conversationID===t&&(n.TUICore.getStore().TUIChat.conversation={conversationID:""})})},l=(e,t)=>{const o={conversationID:t.conversationID,isPinned:!0};"dispinned"===e&&(o.isPinned=!1),console.log("dispinned",o),n.pinConversation(o)},c=(e,t)=>{const o={messageRemindType:n.TUICore.TIM.TYPES.MSG_REMIND_ACPT_NOT_NOTE};t.type===n.TUICore.TIM.TYPES.CONV_C2C?o.userIDList=[t.userProfile.userID]:t.type===n.TUICore.TIM.TYPES.CONV_GROUP&&(o.groupID=t.groupProfile.groupID),"notMute"===e&&(o.messageRemindType=n.TUICore.TIM.TYPES.MSG_REMIND_ACPT_AND_NOTE),n.muteConversation(o)},d=e=>{o.toggleID=e},u=()=>{o.toggleID&&(o.toggleID="")};return{...Object(N["toRefs"])(o),handleListItem:i,handleItem:s,handleToggleListItem:d,list:a,scrollChange:u}}});var ru=su;n("8453");const lu=le()(ru,[["render",Rd],["__scopeId","data-v-78caf4f3"]]);var cu=lu,du=cu;const uu=Object(N["defineComponent"])({name:"TUIConversation",components:{TUIConversationList:du},props:{displayOnlineStatus:{type:Boolean,default:!1}},setup(e,t){const n=null===uu||void 0===uu?void 0:uu.TUIServer,o=Object(N["reactive"])({currentConversationID:"",conversationData:{list:[],handleItemAvator:e=>Object(U["f"])(e),handleItemName:e=>Object(U["m"])(e),handleShowAt:e=>Object(U["d"])(e),handleShowMessage:e=>Object(U["p"])(e),handleItemTime:e=>e>0?Object(hn["a"])(1e3*e):""},userIDList:[],netWork:"",env:n.TUICore.TUIEnv,displayOnlineStatus:!1,userStatusList:new ts.a});d()(n).call(n,o),du.TUIServer=n,Object(N["watch"])(()=>o.currentConversationID,e=>{t.emit("current",e)},{deep:!0}),Object(N["watch"])(()=>e.displayOnlineStatus,async(e,t)=>{e!==t&&(o.displayOnlineStatus=e,n.TUICore.TUIServer.TUIContact.handleUserStatus(o.displayOnlineStatus,[...o.userIDList]))},{immediate:!0}),Object(N["watch"])(()=>[...o.userIDList],async(e,t)=>{Object(hn["d"])(e,t)||n.TUICore.TUIServer.TUIContact.handleUserStatus(o.displayOnlineStatus,[...o.userIDList])},{deep:!0});const a=Object(N["computed"])(()=>{const e=o.netWork===n.TUICore.TIM.TYPES.NET_STATE_DISCONNECTED,t=o.netWork===n.TUICore.TIM.TYPES.NET_STATE_CONNECTING;return e||t}),i=e=>{n.handleCurrentConversation(e)};return{...Object(N["toRefs"])(o),handleCurrentConversation:i,isNetwork:a}}});var pu=uu;n("1e7e");const hu=le()(pu,[["render",Bd],["__scopeId","data-v-a8b11794"]]);var mu=hu;const vu=e=>{mu.TUIServer=gu.server,e.component(gu.name,mu)},fu=e=>(gu.server=new _d(e),e.component(gu.name,gu),gu),gu={name:"TUIConversation",component:mu,server:_d,install:vu,plugin:fu};var bu=gu;const Ou={profile:{}};class yu extends D{constructor(e){var t;super(),this.currentStore={},this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIProfile",Ou,d()(t=this.updateStore).call(t,this)),this.getMyProfile()}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this.currentStore.profile=JSON.parse(m()(e.profile))}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.PROFILE_UPDATED,this.handleProfileUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.PROFILE_UPDATED,this.handleProfileUpdated)}handleProfileUpdated(e){var t;l()(t=e.data).call(t,e=>(e.userID===this.store.profile.userID&&(this.store.profile={},this.store.profile=e),e))}handlePromiseCallback(e){return new f.a((t,n)=>{const o={TUIName:"TUIProfile",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)})}async getMyProfile(){return this.handlePromiseCallback(async(e,t)=>{try{const t=await this.TUICore.tim.getMyProfile();this.store.profile=t.data,this.currentStore.profile=JSON.parse(m()(this.store.profile)),e(t)}catch(n){t(n)}})}async getUserProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}})}async updateMyProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.updateMyProfile(e);this.store.profile=n.data,t(n)}catch(o){n(o)}})}async bind(e){return this.currentStore=e,this.getMyProfile(),this.currentStore}setEdit(e){return this.currentStore.isEdit=e,this.currentStore.isEdit}}const ju={class:"profile-header"},Iu={class:"profile-avatar"},ku=["src"],wu={class:"profile-main"},Eu={class:"profile-main-item"},Cu={class:"profile-main-name"},Tu={key:0,class:"gender"},_u={class:"profile-main-item"},Su={class:"profile-main-label"},Du={key:0,class:"profile-main-item"},Uu={class:"profile-main-label"},Mu={key:0,class:"profile-main"},Nu={class:"profile-main-item"},Bu={class:"profile-main-label"},Ru={class:"profile-main-item"},Lu={class:"profile-main-label"},Vu={key:1,class:"icon icon-right"};function xu(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("TUIProfileEdit");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["TUI-profile",[e.env.isH5?"TUI-profile-h5":""]])},[e.isEdit?(Object(N["openBlock"])(),Object(N["createBlock"])(s,{key:1,userInfo:e.profile,isH5:e.env.isH5,onSubmit:e.submit,onCancel:e.cancel},null,8,["userInfo","isH5","onSubmit","onCancel"])):(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:"profile",onClick:t[0]||(t[0]=(...t)=>e.toggleEdit&&e.toggleEdit(...t))},[Object(N["createElementVNode"])("header",ju,[Object(N["createElementVNode"])("aside",Iu,[Object(N["createElementVNode"])("img",{class:"avatar",src:e.profile.avatar?e.profile.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,ku)]),Object(N["createElementVNode"])("ul",wu,[Object(N["createElementVNode"])("li",Eu,[Object(N["createElementVNode"])("h1",Cu,Object(N["toDisplayString"])(e.profile.nick||"-"),1),e.env.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",Tu,Object(N["toDisplayString"])(e.profile.gender?e.$t("TUIProfile."+e.genderLabel[e.profile.gender]):""),1))]),Object(N["createElementVNode"])("li",_u,[Object(N["createElementVNode"])("label",Su,Object(N["toDisplayString"])(e.$t("TUIProfile.用户ID"))+":",1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.profile.userID),1)]),e.env.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",Du,[Object(N["createElementVNode"])("label",Uu,Object(N["toDisplayString"])(e.$t("TUIProfile.个性签名"))+":",1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.profile.selfSignature||e.$t("TUIProfile.暂未设置")),1)])):Object(N["createCommentVNode"])("",!0)])]),e.env.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",Mu,[Object(N["createElementVNode"])("li",Nu,[Object(N["createElementVNode"])("label",Bu,Object(N["toDisplayString"])(e.$t("TUIProfile.个性签名")),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.profile.selfSignature||e.$t("TUIProfile.暂未设置")),1)]),Object(N["createElementVNode"])("li",Ru,[Object(N["createElementVNode"])("label",Lu,Object(N["toDisplayString"])(e.$t("TUIProfile.出生年月")),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.profile.birthday?e.profile.birthday:e.$t("TUIProfile.暂未设置")),1)])])),e.env.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",Vu)):Object(N["createCommentVNode"])("",!0)]))],2)}const Pu={class:"edit-header"},Au={class:"edit-header-title"},Gu={class:"edit-list"},Hu={class:"edit-list-item space-top"},$u={key:0},zu=["src"],Fu={key:1,class:"avatar-list"},Yu=["onClick"],Ku=["src"],Wu={key:0,class:"icon icon-right"},qu={class:"edit-list-item space-top"},Zu={key:0},Xu={key:0,class:"icon icon-right"},Ju={class:"edit-list-item"},Qu={class:"edit-list-item-content"},ep={class:"edit-list-item space-top"},tp={key:0},np={key:0,class:"icon icon-right"},op={class:"edit-list-item"},ap={key:0},ip={key:1,class:"gender-list"},sp=["onClick"],rp={class:"name"},lp={key:0,class:"icon icon-right"},cp={class:"edit-list-item"},dp={key:0},up={key:0,class:"icon icon-right"},pp={key:0,class:"edit-footer"},hp={class:"mask-main"},mp={class:"edit-h5-header"},vp={class:"edit-h5-main"},fp={key:0,class:"list"},gp=["onClick"],bp=["src"],Op={key:1,class:"input"},yp=["placeholder"],jp=["type","placeholder"],Ip={key:2},kp={class:"edit-h5-footer"},wp=["disabled"];function Ep(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("Datepicker");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["edit",[e.isH5?"edit-h5":""]])},[Object(N["createElementVNode"])("header",Pu,[e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.cancel&&e.cancel(...t))})):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("h1",Au,Object(N["toDisplayString"])(e.$t("TUIProfile.资料设置")),1)]),Object(N["createElementVNode"])("ul",Gu,[Object(N["createElementVNode"])("li",Hu,[Object(N["createElementVNode"])("main",{class:"edit-list-item-content",onClick:t[1]||(t[1]=t=>e.setProfile("avatar"))},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIProfile.头像")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",$u,[Object(N["createElementVNode"])("img",{src:e.profile.avatar?e.profile.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,zu)])):(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",Fu,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.avatarList,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"avatar-list-item",key:n,onClick:n=>e.chooseAvatar(t)},[Object(N["createElementVNode"])("img",{class:Object(N["normalizeClass"])([e.profile.avatar===t.avatar&&"selected"]),src:t.avatar},null,10,Ku)],8,Yu))),128))]))]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",Wu)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("li",qu,[Object(N["createElementVNode"])("main",{class:"edit-list-item-content",onClick:t[3]||(t[3]=t=>e.setProfile("nick"))},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIProfile.昵称")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",Zu,Object(N["toDisplayString"])(e.profile.nick),1)):Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:1,type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.profile.nick=t)},null,512)),[[N["vModelText"],e.profile.nick]])]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",Xu)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("li",Ju,[Object(N["createElementVNode"])("main",Qu,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIProfile.账号")),1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.profile.userID),1)])]),Object(N["createElementVNode"])("li",ep,[Object(N["createElementVNode"])("main",{class:"edit-list-item-content",onClick:t[5]||(t[5]=t=>e.setProfile("selfSignature"))},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIProfile.个性签名")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",tp,Object(N["toDisplayString"])(e.profile.selfSignature),1)):Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:1,type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.profile.selfSignature=t)},null,512)),[[N["vModelText"],e.profile.selfSignature]])]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",np)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("li",op,[Object(N["createElementVNode"])("main",{class:"edit-list-item-content",onClick:t[6]||(t[6]=t=>e.setProfile("gender"))},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIProfile.性别")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",ap,Object(N["toDisplayString"])(e.profile.gender?e.$t("TUIProfile."+e.genderLabel[e.profile.gender]):""),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",ip,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.type,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"gender-list-item",key:n,onClick:n=>e.showChooseGender(t)},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["gender",[e.profile.gender===t.type&&"gender-selected"]])},null,2),Object(N["createElementVNode"])("p",rp,Object(N["toDisplayString"])(e.$t("TUIProfile."+t.label)),1)],8,sp))),128))]))]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",lp)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("li",cp,[Object(N["createElementVNode"])("main",{class:"edit-list-item-content",onClick:t[7]||(t[7]=t=>e.setProfile("birthday"))},[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIProfile.出生年月")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",dp,Object(N["toDisplayString"])(e.profile.birthday),1)):(Object(N["openBlock"])(),Object(N["createBlock"])(s,{key:1,placeholder:e.$t("TUIProfile.请选择出生日期"),enableTimePicker:!1,format:e.format,previewFormat:e.format,modelValue:e.birthday,"onUpdate:modelValue":e.showBirthday},null,8,["placeholder","format","previewFormat","modelValue","onUpdate:modelValue"]))]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",up)):Object(N["createCommentVNode"])("",!0)])]),e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("footer",pp,[Object(N["createElementVNode"])("button",{class:"btn-default",onClick:t[8]||(t[8]=(...t)=>e.cancel&&e.cancel(...t))},Object(N["toDisplayString"])(e.$t("TUIProfile.取消")),1),Object(N["createElementVNode"])("button",{class:"btn-submit",onClick:t[9]||(t[9]=(...t)=>e.submit&&e.submit(...t))},Object(N["toDisplayString"])(e.$t("TUIProfile.保存")),1)])),e.setName&&e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:1,class:"mask",onClick:t[14]||(t[14]=Object(N["withModifiers"])((...t)=>e.closeMask&&e.closeMask(...t),["self"]))},[Object(N["createElementVNode"])("div",hp,[Object(N["createElementVNode"])("header",mp,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("TUIProfile."+e.editConfig.title)),1),Object(N["createElementVNode"])("span",{class:"close",onClick:t[10]||(t[10]=(...t)=>e.closeMask&&e.closeMask(...t))},Object(N["toDisplayString"])(e.$t("关闭")),1)]),Object(N["createElementVNode"])("main",vp,["select"===e.editConfig.type?(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",fp,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.editConfig.list,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:"list-item",key:n,onClick:n=>e.choose(t)},[null!==t&&void 0!==t&&t.avatar?(Object(N["openBlock"])(),Object(N["createElementBlock"])("img",{key:0,class:Object(N["normalizeClass"])([e.editConfig.value===t.avatar&&"selected"]),src:t.avatar},null,10,bp)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:1,class:Object(N["normalizeClass"])([e.editConfig.value===t.type&&"selected"])},Object(N["toDisplayString"])(e.$t("TUIProfile."+t.label)),3))],8,gp))),128))])):(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Op,["textarea"===e.editConfig.type?Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("textarea",{key:0,placeholder:e.editConfig.placeholder,"onUpdate:modelValue":t[11]||(t[11]=t=>e.editConfig.value=t)},null,8,yp)),[[N["vModelText"],e.editConfig.value]]):"date"===e.editConfig.type?(Object(N["openBlock"])(),Object(N["createBlock"])(s,{key:1,class:"datePicker",placeholder:e.$t("TUIProfile.请选择出生日期"),enableTimePicker:!1,format:e.format,previewFormat:e.format,modelValue:e.birthday,"onUpdate:modelValue":e.showBirthday},null,8,["placeholder","format","previewFormat","modelValue","onUpdate:modelValue"])):Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:2,type:e.editConfig.type,placeholder:e.$t("TUIProfile."+e.editConfig.placeholder),"onUpdate:modelValue":t[12]||(t[12]=t=>e.editConfig.value=t)},null,8,jp)),[[N["vModelDynamic"],e.editConfig.value]])])),e.editConfig.subText?(Object(N["openBlock"])(),Object(N["createElementBlock"])("sub",Ip,Object(N["toDisplayString"])(e.$t("TUIProfile."+e.editConfig.subText)),1)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("footer",kp,[Object(N["createElementVNode"])("button",{class:"btn btn-submit",disabled:!e.editConfig.value,onClick:t[13]||(t[13]=(...t)=>e.submit&&e.submit(...t))},Object(N["toDisplayString"])(e.$t("确定")),9,wp)])])])):Object(N["createCommentVNode"])("",!0)],2)}var Cp=n("aebf");n("1465");const Tp=Object(N["defineComponent"])({props:{userInfo:{type:Object,default:()=>({})},isH5:{type:Boolean,default:()=>!1}},components:{Datepicker:Cp["a"]},setup(e,t){const n=null===Tp||void 0===Tp?void 0:Tp.TUIServer,o=Object(N["reactive"])({profile:{},isEdit:!1,avatarList:[{name:"avatar_01",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_1.png"},{name:"avatar_02",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_2.png"},{name:"avatar_03",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_3.png"},{name:"avatar_04",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_4.png"},{name:"avatar_05",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_5.png"},{name:"avatar_06",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_6.png"}],type:[{label:"男",type:n.TUICore.TIM.TYPES.GENDER_MALE},{label:"女",type:n.TUICore.TIM.TYPES.GENDER_FEMALE}],genderLabel:{[n.TUICore.TIM.TYPES.GENDER_MALE]:"男",[n.TUICore.TIM.TYPES.GENDER_FEMALE]:"女",[n.TUICore.TIM.TYPES.GENDER_UNKNOWN]:"不显示"},setName:"",editConfig:{title:"",list:[],type:"",subText:"",placeholder:"",value:""}}),a=e=>{const t=e.getDate()>9?e.getDate():"0"+e.getDate(),n=e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1),o=e.getFullYear();return`${o}${n}${t}`};Object(N["watchEffect"])(()=>{o.profile=JSON.parse(m()(e.userInfo))});const i=Object(N["computed"])(()=>{let t=o.profile.birthday;return"birthday"===o.setName&&e.isH5&&(t=o.editConfig.value),s(t)}),s=e=>{const t=""+e;if(8===t.length){const e=Fn()(t).call(t,0,4),n=Fn()(t).call(t,4,6),o=Fn()(t).call(t,-2);return`${e}-${n}-${o}`}return""},r=e=>{o.profile.gender=e.type},l=e=>{o.profile.avatar=e.avatar},c=t=>{e.isH5?o.editConfig.value=t?Number(a(t)):0:o.profile.birthday=t?Number(a(t)):0},d=()=>{e.isH5&&(o.profile[o.setName]=o.editConfig.value,v()),t.emit("submit",o.profile)},u=()=>{t.emit("cancel",o.profile)},p=e=>{switch(o.editConfig.value=""+o.profile[e],o.setName=e,e){case"avatar":o.editConfig.title="选择头像",o.editConfig.list=o.avatarList,o.editConfig.type="select";break;case"nick":o.editConfig.title="设置昵称",o.editConfig.subText="仅限中文、字母、数字和下划线，2-20个字",o.editConfig.placeholder="请输入昵称",o.editConfig.type="text";break;case"gender":o.editConfig.title="性别选择",o.editConfig.list=o.type,o.editConfig.type="select";break;case"selfSignature":o.editConfig.title="个性签名",o.editConfig.type="textarea",o.editConfig.placeholder="请输入内容";break;case"birthday":o.editConfig.title="出生年月",o.editConfig.type="date",o.editConfig.placeholder="请选择出生日期";break;default:break}},h=e=>{o.editConfig.value=(null===e||void 0===e?void 0:e.avatar)||(null===e||void 0===e?void 0:e.type)},v=()=>{o.setName="",o.editConfig={title:"",list:[],type:"",subText:"",placeholder:"",value:""}};return{...Object(N["toRefs"])(o),showChooseGender:r,chooseAvatar:l,showBirthday:c,birthday:i,submit:d,cancel:u,setProfile:p,choose:h,closeMask:v,format:a}}});var _p=Tp;n("d4db");const Sp=le()(_p,[["render",Ep],["__scopeId","data-v-25fbecd0"]]);var Dp=Sp,Up=Dp;const Mp=Object(N["defineComponent"])({name:"TUIProfile",components:{TUIProfileEdit:Up},setup(e,t){var n,o;const a=null===Mp||void 0===Mp?void 0:Mp.TUIServer,i=Object(N["reactive"])({profile:{},isEdit:!1,genderLabel:{[a.TUICore.TIM.TYPES.GENDER_MALE]:"男",[a.TUICore.TIM.TYPES.GENDER_FEMALE]:"女",[a.TUICore.TIM.TYPES.GENDER_UNKNOWN]:"不显示"},env:a.TUICore.TUIEnv});Up.TUIServer=a,d()(a).call(a,i);const s=(null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o?void 0:o.isOfficial)&&Yt["c"]&&Object(Yt["c"])()||{},r=async e=>{const t={nick:e.nick,avatar:e.avatar,gender:e.gender||a.TUICore.TIM.TYPES.GENDER_UNKNOWN,selfSignature:e.selfSignature,birthday:e.birthday};var n,o;a.TUICore.getStore().TUIProfile.profile.nick!==e.nick&&((null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o?void 0:o.isOfficial)&&(null===s||void 0===s?void 0:s.commit)&&(null===s||void 0===s||s.commit("handleTask",2)));try{await a.updateMyProfile(t),Ft.getInstance().reportEvent({name:"changeProfile",ext1:"changeProfile"})}catch(r){console.log(r)}i.env.isH5||l()},l=()=>{i.env.isH5?i.isEdit=!1:c()},c=()=>{t.emit("changeStatus")},u=()=>{i.env.isH5&&(i.isEdit=!0)};return{...Object(N["toRefs"])(i),submit:r,cancel:l,changeStatus:c,toggleEdit:u}}});var Np=Mp;n("9a2f");const Bp=le()(Np,[["render",xu],["__scopeId","data-v-bc4a483e"]]);var Rp=Bp;const Lp=e=>{Rp.TUIServer=xp.server,e.component(xp.name,Rp)},Vp=e=>(xp.server=new yu(e),e.component(xp.name,xp),xp),xp={name:"TUIProfile",component:Rp,server:yu,install:Lp,plugin:Vp};var Pp=xp;const Ap={};class Gp extends D{constructor(e){var t;super(),this.currentStore={},this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIGroup",Ap,d()(t=this.updateStore).call(t,this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this.currentStore.groupList=e.groupList,this.currentStore.searchGroup=e.searchGroup}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated)}handleGroupListUpdated(e){this.store.groupList=e.data}handleGroupAttributesUpdated(e){const{groupID:t,groupAttributes:n}=e.data;console.log(t,n)}handlePromiseCallback(e){return new f.a((t,n)=>{const o={TUIName:"TUIGroup",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)})}async getGroupList(e){return this.handlePromiseCallback(async(t,n)=>{try{let n={};n=e?await this.TUICore.tim.getGroupList(e):await this.TUICore.tim.getGroupList(),this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}})}getGroupProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupProfile(e);this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}})}createGroup(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.createGroup(e);t(n)}catch(o){n(o)}})}dismissGroup(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.dismissGroup(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}})}updateGroupProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.updateGroupProfile(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}})}joinGroup(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.joinGroup(e);t(n)}catch(o){n(o)}})}quitGroup(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.quitGroup(e);t(n)}catch(o){n(o)}})}searchGroupByID(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.searchGroupByID(e);this.store.searchGroup=n.data.group,t(n)}catch(o){n(o)}})}getGroupOnlineMemberCount(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupOnlineMemberCount(e);t(n)}catch(o){n(o)}})}changeGroupOwner(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.changeGroupOwner(e);t(n)}catch(o){n(o)}})}handleGroupApplication(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.handleGroupApplication(e);t(n)}catch(o){n(o)}})}initGroupAttributes(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.initGroupAttributes(e);t(n)}catch(o){n(o)}})}setGroupAttributes(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.setGroupAttributes(e);t(n)}catch(o){n(o)}})}deleteGroupAttributes(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.deleteGroupAttributes(e);t(n)}catch(o){n(o)}})}getGroupAttributes(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupAttributes(e);t(n)}catch(o){n(o)}})}getGroupMemberList(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupMemberList(e);t(n)}catch(o){n(o)}})}addGroupMember(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.addGroupMember(e);t(n)}catch(o){n(o)}})}deleteGroupMember(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.deleteGroupMember(e);t(n)}catch(o){n(o)}})}setGroupMemberMuteTime(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.setGroupMemberMuteTime(e);t(n)}catch(o){n(o)}})}setGroupMemberRole(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.setGroupMemberRole(e);t(n)}catch(o){n(o)}})}setGroupMemberNameCard(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.setGroupMemberNameCard(e);t(n)}catch(o){n(o)}})}getGroupMemberProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupMemberProfile(e);t(n)}catch(o){n(o)}})}async bind(e){return this.currentStore=e,await this.getGroupList(),this.currentStore}}const Hp={class:"TUI-group"};function $p(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Hp,"TUIGroup")}const zp=Object(N["defineComponent"])({name:"TUIGroup",components:{},setup(e){const t=zp.TUIServer,n=Object(N["reactive"])({groupList:[],searchGroup:[],searchID:"",currentGroup:null});return d()(t).call(t,n),{...Object(N["toRefs"])(n)}}});var Fp=zp;n("b23d");const Yp=le()(Fp,[["render",$p],["__scopeId","data-v-f2d329c8"]]);var Kp=Yp;const Wp=e=>{Kp.TUIServer=Zp.server,e.component(Zp.name,Kp)},qp=e=>(Zp.server=new Gp(e),e.component(Zp.name,Zp),Zp),Zp={name:"TUIGroup",component:Kp,server:Gp,install:Wp,plugin:qp};var Xp=Zp;const Jp={};class Qp extends D{constructor(e){var t;super(),this.currentStore={},this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIContact",Jp,d()(t=this.updateStore).call(t,this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this.currentStore.groupList=e.groupList,this.currentStore.searchGroup=e.searchGroup,this.currentStore.systemConversation=e.systemConversation,this.currentStore.systemMessageList=e.systemMessageList}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.USER_STATUS_UPDATED,this.handleUserStatusUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate),this.TUICore.tim.off(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.USER_STATUS_UPDATED,this.handleUserStatusUpdated)}handleGroupListUpdated(e){this.store.groupList=e.data}handleGroupAttributesUpdated(e){const{groupID:t,groupAttributes:n}=e.data;console.log(t,n)}handleConversationListUpdate(e){this.handleFilterSystem(e.data)}handleFriendListUpdated(e){var t;this.currentStore.friendList=e.data,this.currentStore.userIDList=l()(t=this.currentStore.friendList).call(t,e=>e.userID)}handleUserStatusUpdated(e){const t=e.data;a()(t).call(t,e=>{var t,n,o,a,i,s,r;const{userID:l,statusType:c,customStatus:d}=e;null===(t=this.currentStore)||void 0===t||null===(n=t.userStatusList)||void 0===n||n.set(l,{statusType:c,customStatus:d}),null===(o=this.TUICore)||void 0===o||null===(a=o.TUIServer)||void 0===a||null===(i=a.TUIConversation)||void 0===i||null===(s=i.currentStore)||void 0===s||null===(r=s.userStatusList)||void 0===r||r.set(l,{statusType:c,customStatus:d})})}handlePromiseCallback(e){return new f.a((t,n)=>{const o={TUIName:"TUIContact",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)})}handleFilterSystem(e){const t={allConversationList:e,systemConversationList:[]};t.systemConversationList=y()(e).call(e,e=>e.type===this.TUICore.TIM.TYPES.CONV_SYSTEM),this.store.allConversationList=t.allConversationList,this.store.systemConversationList=t.systemConversationList;const[n]=t.systemConversationList;return this.store.systemConversation=n,t}async getConversationList(){return this.handlePromiseCallback(async(e,t)=>{try{const t=await this.TUICore.tim.getConversationList();this.handleFilterSystem(t.data.conversationList),e(t)}catch(n){t(n)}})}async getSystemMessageList(){const e={conversationID:this.store.systemConversation.conversationID,count:15};return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getMessageList(e);this.store.systemMessageList=n.data.messageList,t(n)}catch(o){n(o)}})}async setMessageRead(){return this.handlePromiseCallback(async(e,t)=>{try{const t=await this.TUICore.tim.setMessageRead({conversationID:this.store.systemConversation.conversationID});e(t)}catch(n){t(n)}})}async getGroupList(e){return this.handlePromiseCallback(async(t,n)=>{try{let n={};n=e?await this.TUICore.tim.getGroupList(e):await this.TUICore.tim.getGroupList(),this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}})}getGroupProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getGroupProfile(e);this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}})}dismissGroup(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.dismissGroup(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}})}updateGroupProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.updateGroupProfile(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}})}joinGroup(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.joinGroup(e);t(n)}catch(o){n(o)}})}quitGroup(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.quitGroup(e);t(n)}catch(o){n(o)}})}searchGroupByID(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.searchGroupByID(e);this.store.searchGroup=n.data.group,t(n)}catch(o){this.store.searchGroup={},n(o)}})}handleGroupApplication(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.handleGroupApplication(e);t(n)}catch(o){n(o)}})}async getFriendList(){return this.handlePromiseCallback(async(e,t)=>{try{var n;const t=await this.TUICore.tim.getFriendList();this.currentStore.friendList=t.data,this.currentStore.userIDList=l()(n=this.currentStore.friendList).call(n,e=>e.userID)||[],e(t)}catch(o){t(o)}})}async getUserStatus(e){return this.handlePromiseCallback(async(t,n)=>{try{var o,i;if(!e.length)return;const n=await this.TUICore.tim.getUserStatus({userIDList:e});null===n||void 0===n||null===(o=n.data)||void 0===o||null===(i=o.successUserList)||void 0===i||a()(i).call(i,e=>{var t,n,o,a,i,s,r;e&&null!==e&&void 0!==e&&e.userID&&(null===(t=this.currentStore)||void 0===t||null===(n=t.userStatusList)||void 0===n||n.set(null===e||void 0===e?void 0:e.userID,{statusType:null===e||void 0===e?void 0:e.statusType,customStatus:null===e||void 0===e?void 0:e.customStatus}),null===(o=this.TUICore)||void 0===o||null===(a=o.TUIServer)||void 0===a||null===(i=a.TUIConversation)||void 0===i||null===(s=i.currentStore)||void 0===s||null===(r=s.userStatusList)||void 0===r||r.set(null===e||void 0===e?void 0:e.userID,{statusType:null===e||void 0===e?void 0:e.statusType,customStatus:null===e||void 0===e?void 0:e.customStatus}))}),t(n)}catch(s){n(s)}})}async subscribeUserStatus(e){return this.handlePromiseCallback(async(t,n)=>{try{if(!e.length)return;const n=await this.TUICore.tim.subscribeUserStatus({userIDList:e});t(n)}catch(o){n(o)}})}async unsubscribeUserStatus(e){return this.handlePromiseCallback(async(t,n)=>{try{var o,a;if(e&&!e.length)return;const n=await this.TUICore.tim.unsubscribeUserStatus({userIDList:e});null===(o=this.currentStore)||void 0===o||null===(a=o.userStatusList)||void 0===a||a.clear(),t(n)}catch(i){n(i)}})}async handleUserStatus(e,t){return this.handlePromiseCallback(async(n,o)=>{try{b()(async()=>{e?(await this.subscribeUserStatus(t),await this.getUserStatus(t)):await this.unsubscribeUserStatus(t)},1e3)}catch(a){o(a)}})}async bind(e){return this.currentStore=e,await this.getGroupList(),await this.getConversationList(),await this.getFriendList(),this.currentStore}}const eh=e=>(Object(N["pushScopeId"])("data-v-5f069d6a"),e=e(),Object(N["popScopeId"])(),e),th={class:"TUI-contact-left"},nh={class:"TUI-contact-left-header"},oh={class:"search"},ah=eh(()=>Object(N["createElementVNode"])("i",{class:"plus"},null,-1)),ih={key:1,class:"search-box"},sh={class:"input-box"},rh=["placeholder"],lh={key:0,class:"TUI-contact-column"},ch={class:"TUI-contact-column-item"},dh={key:0,class:"num"},uh={key:0,class:"TUI-contact-list"},ph={class:"TUI-contact-list-item selected not-aside"},hh={key:0,class:"num"},mh={class:"TUI-contact-column-item"},vh={class:"TUI-contact-list"},fh=["onClick"],gh={class:"left"},bh=["src"],Oh={class:"content"},yh={class:"name"},jh={class:"ID"},Ih=eh(()=>Object(N["createElementVNode"])("label",null,"ID：",-1)),kh={class:"type"},wh={class:"TUI-contact-column-item"},Eh={class:"TUI-contact-list"},Ch=["onClick"],Th={class:"left"},_h=["src"],Sh={class:"content"},Dh={class:"name"},Uh={key:1,class:"TUI-contact-list"},Mh={class:"left"},Nh=["src"],Bh={class:"content"},Rh={class:"name"},Lh={class:"ID"},Vh=eh(()=>Object(N["createElementVNode"])("label",null,"ID：",-1)),xh={class:"type"},Ph={class:"TUI-contact-main"},Ah={key:0,class:"TUI-contact-main-h5-title"},Gh={key:1,class:"TUI-contact-main-info"},Hh={class:"TUI-contact-main-info-header"},$h={class:"list"},zh=["src"],Fh={key:0,class:"TUI-contact-main-info-main"},Yh=["disabled"],Kh={class:"TUI-contact-main-info-footer"},Wh={key:0},qh={key:1},Zh={key:2,class:"TUI-contact-main-info"},Xh={class:"TUI-contact-main-info-header"},Jh={class:"list"},Qh=eh(()=>Object(N["createElementVNode"])("label",null,"ID：",-1)),em=["src"],tm={class:"TUI-contact-main-info-footer"},nm={key:3,class:"TUI-contact-system"},om={key:0,class:"TUI-contact-system-header"};function am(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("MessageSystem");return Object(N["openBlock"])(),Object(N["createBlock"])(N["Transition"],{onBeforeLeave:e.init},{default:Object(N["withCtx"])(()=>{var n,o,a,i,r,l,c,d,u,p,h,m,v,f,g,b,O,y,j,I,k,w,E,C,T;return[Object(N["createElementVNode"])("div",{class:Object(N["normalizeClass"])(["TUI-contact",[e.env.isH5?"TUI-contact-H5":""]])},[Object(N["createElementVNode"])("aside",th,[Object(N["createElementVNode"])("header",nh,[Object(N["createElementVNode"])("div",oh,[e.isSearch?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",ih,[Object(N["createElementVNode"])("div",sh,[Object(N["withDirectives"])(Object(N["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.searchID=t),placeholder:e.$t("TUIContact.输入群ID，按回车搜索"),onKeyup:t[2]||(t[2]=Object(N["withKeys"])((...t)=>e.handleSearchGroup&&e.handleSearchGroup(...t),["enter"])),enterkeyhint:"search"},null,40,rh),[[N["vModelText"],e.searchID]]),e.searchID?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",{key:0,class:"icon icon-cancel",onClick:t[3]||(t[3]=t=>e.searchID="")})):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("span",{class:"search-cancel",onClick:t[4]||(t[4]=(...t)=>e.toggleSearch&&e.toggleSearch(...t))},Object(N["toDisplayString"])(e.$t("取消")),1)])):(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:"search-box",onClick:t[0]||(t[0]=(...t)=>e.toggleSearch&&e.toggleSearch(...t))},[ah,Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("TUIContact.添加群聊")),1)]))])]),e.isSearch?(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",Uh,[null!==(n=e.searchGroup)&&void 0!==n&&n.groupID?(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:0,class:Object(N["normalizeClass"])(["TUI-contact-list-item",[(null===(o=e.currentGroup)||void 0===o?void 0:o.groupID)===(null===(a=e.searchGroup)||void 0===a?void 0:a.groupID)&&"selected"]]),onClick:t[8]||(t[8]=t=>e.handleListItem(e.searchGroup))},[Object(N["createElementVNode"])("aside",Mh,[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===(i=e.searchGroup)||void 0===i?void 0:i.avatar)||"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,Nh)]),Object(N["createElementVNode"])("main",Bh,[Object(N["createElementVNode"])("ul",null,[Object(N["createElementVNode"])("li",Rh,Object(N["toDisplayString"])(null===(r=e.searchGroup)||void 0===r?void 0:r.name),1),Object(N["createElementVNode"])("li",Lh,[Vh,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(l=e.searchGroup)||void 0===l?void 0:l.groupID),1)])]),Object(N["createElementVNode"])("span",xh,Object(N["toDisplayString"])(null===(c=e.searchGroup)||void 0===c?void 0:c.type),1)])],2)):Object(N["createCommentVNode"])("",!0)])):(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",lh,[Object(N["createElementVNode"])("li",ch,[Object(N["createElementVNode"])("header",{onClick:t[5]||(t[5]=t=>e.select("system"))},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon icon-right",["system"===e.columnName&&"icon-down"]])},null,2),Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.群聊通知")),1),e.systemConversation&&e.systemConversation.unreadCount>0?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",dh,Object(N["toDisplayString"])(e.systemConversation.unreadCount),1)):Object(N["createCommentVNode"])("",!0)])]),"system"===e.columnName?(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",uh,[Object(N["createElementVNode"])("li",ph,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.系统通知")),1),e.systemConversation&&e.systemConversation.unreadCount>0?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",hh,Object(N["toDisplayString"])(e.systemConversation.unreadCount),1)):Object(N["createCommentVNode"])("",!0)])])):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("li",mh,[Object(N["createElementVNode"])("header",{onClick:t[6]||(t[6]=t=>e.select("group"))},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon icon-right",["group"===e.columnName&&"icon-down"]])},null,2),Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.我的群聊")),1)])]),Object(N["withDirectives"])(Object(N["createElementVNode"])("ul",vh,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.groupList,(t,n)=>{var o;return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:Object(N["normalizeClass"])(["TUI-contact-list-item",[(null===(o=e.currentGroup)||void 0===o?void 0:o.groupID)===(null===t||void 0===t?void 0:t.groupID)&&"selected"]]),key:n,onClick:n=>e.handleListItem(t)},[Object(N["createElementVNode"])("aside",gh,[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===t||void 0===t?void 0:t.avatar)||"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,bh)]),Object(N["createElementVNode"])("main",Oh,[Object(N["createElementVNode"])("ul",null,[Object(N["createElementVNode"])("li",yh,Object(N["toDisplayString"])(null===t||void 0===t?void 0:t.name),1),Object(N["createElementVNode"])("li",jh,[Ih,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===t||void 0===t?void 0:t.groupID),1)])]),Object(N["createElementVNode"])("span",kh,Object(N["toDisplayString"])(null===t||void 0===t?void 0:t.type),1)])],10,fh)}),128))],512),[[N["vShow"],"group"===e.columnName]])]),Object(N["createElementVNode"])("li",wh,[Object(N["createElementVNode"])("header",{onClick:t[7]||(t[7]=t=>e.select("friend"))},[Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon icon-right",["friend"===e.columnName&&"icon-down"]])},null,2),Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.我的好友")),1)])]),Object(N["withDirectives"])(Object(N["createElementVNode"])("ul",Eh,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.friendList,(t,n)=>{var o,a,i,s;return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:Object(N["normalizeClass"])(["TUI-contact-list-item",[(null===(o=e.currentFriend)||void 0===o?void 0:o.userID)===(null===t||void 0===t?void 0:t.userID)&&"selected"]]),key:n,onClick:n=>e.handleListItem(t)},[Object(N["createElementVNode"])("aside",Th,[Object(N["createElementVNode"])("img",{class:"avatar",src:(null===t||void 0===t||null===(a=t.profile)||void 0===a?void 0:a.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,_h),e.displayOnlineStatus?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{key:0,class:Object(N["normalizeClass"])(["online-status",1===(null===(i=e.userStatusList.get(null===t||void 0===t?void 0:t.userID))||void 0===i?void 0:i.statusType)?"online-status-online":"online-status-offline"])},null,2)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("main",Sh,[Object(N["createElementVNode"])("ul",null,[Object(N["createElementVNode"])("li",Dh,Object(N["toDisplayString"])((null===t||void 0===t||null===(s=t.profile)||void 0===s?void 0:s.nick)||(null===t||void 0===t?void 0:t.userID)),1)])])],10,Ch)}),128))],512),[[N["vShow"],"friend"===e.columnName]])])]))]),Object(N["withDirectives"])(Object(N["createElementVNode"])("main",Ph,[e.env.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",Ah,[Object(N["createElementVNode"])("i",{class:"icon icon-back",onClick:t[9]||(t[9]=(...t)=>e.back&&e.back(...t))}),Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])((null===(d=e.currentGroup)||void 0===d?void 0:d.name)||e.$t("TUIContact.系统通知")),1)])):Object(N["createCommentVNode"])("",!0),null!==(u=e.currentGroup)&&void 0!==u&&u.groupID?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Gh,[Object(N["createElementVNode"])("header",Hh,[Object(N["createElementVNode"])("ul",$h,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(null===(p=e.currentGroup)||void 0===p?void 0:p.name),1),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.群ID"))+"：",1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(h=e.currentGroup)||void 0===h?void 0:h.groupID),1)]),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.群类型"))+"：",1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(m=e.currentGroup)||void 0===m?void 0:m.type),1)])]),Object(N["createElementVNode"])("img",{class:"avatar",src:(null===(v=e.currentGroup)||void 0===v?void 0:v.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/group_avatar.png",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,zh)]),e.isNeedPermission?(Object(N["openBlock"])(),Object(N["createElementBlock"])("main",Fh,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.请填写验证信息")),1),Object(N["withDirectives"])(Object(N["createElementVNode"])("textarea",{"onUpdate:modelValue":t[10]||(t[10]=t=>e.currentGroup.applyMessage=t),disabled:e.currentGroup.apply},null,8,Yh),[[N["vModelText"],e.currentGroup.applyMessage]])])):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("footer",Kh,[e.currentGroup.apply&&"AVChatRoom"===e.currentGroup.type?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",Wh,Object(N["toDisplayString"])(e.$t("TUIContact.已加入")),1)):e.currentGroup.apply?(Object(N["openBlock"])(),Object(N["createElementBlock"])("p",qh,Object(N["toDisplayString"])(e.$t("TUIContact.已申请")),1)):e.isNeedPermission?(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:2,class:"btn btn-default",onClick:t[11]||(t[11]=t=>e.join(e.currentGroup))},Object(N["toDisplayString"])(e.$t("TUIContact.申请加入")),1)):e.currentGroup.selfInfo.userID?e.currentGroup.selfInfo.userID&&"Owner"===e.currentGroup.selfInfo.role&&"Private"!==e.currentGroup.type?(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:4,class:"btn btn-cancel",onClick:t[13]||(t[13]=t=>e.dismiss(e.currentGroup))},Object(N["toDisplayString"])(e.$t("TUIContact.解散群聊")),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:5,class:"btn btn-cancel",onClick:t[14]||(t[14]=t=>e.quit(e.currentGroup))},Object(N["toDisplayString"])(e.$t("TUIContact.退出群聊")),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:3,class:"btn btn-default",onClick:t[12]||(t[12]=t=>e.join(e.currentGroup))},Object(N["toDisplayString"])(e.$t("TUIContact.加入群聊")),1)),e.currentGroup.selfInfo.userID?(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:6,class:"btn btn-default",onClick:t[15]||(t[15]=t=>e.enter(e.currentGroup.groupID,"GROUP"))},Object(N["toDisplayString"])(e.$t("TUIContact.进入群聊")),1)):Object(N["createCommentVNode"])("",!0)])])):null!==(f=e.currentFriend)&&void 0!==f&&f.userID&&"friend"===e.columnName?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",Zh,[Object(N["createElementVNode"])("header",Xh,[Object(N["createElementVNode"])("ul",Jh,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])((null===(g=e.currentFriend)||void 0===g||null===(b=g.profile)||void 0===b?void 0:b.nick)||(null===(O=e.currentFriend)||void 0===O?void 0:O.userID)),1),Object(N["createElementVNode"])("li",null,[Qh,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(y=e.currentFriend)||void 0===y||null===(j=y.profile)||void 0===j?void 0:j.userID),1)]),Object(N["createElementVNode"])("li",null,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUIContact.个性签名"))+"：",1),Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(null===(I=e.currentFriend)||void 0===I||null===(k=I.profile)||void 0===k?void 0:k.selfSignature),1)])]),Object(N["createElementVNode"])("img",{class:"avatar",src:(null===(w=e.currentFriend)||void 0===w||null===(E=w.profile)||void 0===E?void 0:E.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,em)]),Object(N["createElementVNode"])("footer",tm,[Object(N["createElementVNode"])("button",{class:"btn btn-default",onClick:t[16]||(t[16]=t=>e.enter(e.currentFriend.userID,"C2C"))},Object(N["toDisplayString"])(e.$t("TUIContact.发送消息")),1)])])):"system"===e.columnName?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",nm,[e.env.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("header",om,[Object(N["createElementVNode"])("h1",null,Object(N["toDisplayString"])(e.$t("TUIContact.系统通知")),1)])),Object(N["createVNode"])(s,{isH5:e.env.isH5,data:e.systemMessageList,types:e.types,onApplication:e.handleGroupApplication},null,8,["isH5","data","types","onApplication"])])):Object(N["renderSlot"])(e.$slots,"default",{key:4},void 0,!0)],512),[[N["vShow"],!(null===(C=e.currentGroup)||void 0===C||!C.groupID)||!(null===(T=e.currentFriend)||void 0===T||!T.userID)||"system"===e.columnName]])],2)]}),_:3},8,["onBeforeLeave"])}var im=n("44a4"),sm=n.n(im);const rm=e=>(Object(N["pushScopeId"])("data-v-4cbbc4fe"),e=e(),Object(N["popScopeId"])(),e),lm={class:"list"},cm=rm(()=>Object(N["createElementVNode"])("i",{class:"icon icon-system"},null,-1)),dm={key:0,class:"btn-box"},um=["onClick"],pm=["onClick"],hm={key:2};function mm(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["message-system",[e.isH5?"message-system-h5":""]])},[Object(N["createElementVNode"])("ul",lm,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.messageList,(t,n)=>{var o;return Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{key:n},[t.type===e.types.MSG_GRP_TIP||t.type===e.types.MSG_GRP_SYS_NOTICE?(Object(N["openBlock"])(),Object(N["createElementBlock"])(N["Fragment"],{key:0},[cm,Object(N["createElementVNode"])("span",null,Object(N["toDisplayString"])(e.translateGroupSystemNotice(t)),1),1===(null===t||void 0===t||null===(o=t.payload)||void 0===o?void 0:o.operationType)?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",dm,[t.isHandle?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:0,class:"btn btn-default",onClick:n=>e.handleApplication("Agree",t)},Object(N["toDisplayString"])(e.$t("TUIContact.接受")),9,um)),t.isHandle?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",hm,Object(N["toDisplayString"])(e.$t("TUIContact.已处理")),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:1,class:"btn btn-cancel",onClick:n=>e.handleApplication("Reject",t)},Object(N["toDisplayString"])(e.$t("TUIContact.拒绝")),9,pm))])):Object(N["createCommentVNode"])("",!0)],64)):Object(N["createCommentVNode"])("",!0)])}),128))])],2)}var vm=Object(N["defineComponent"])({props:{data:{type:Array,default:()=>[]},types:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},setup(e,t){const n=Object(N["reactive"])({messageList:[],types:{},isHandle:!1});Object(N["watchEffect"])(()=>{n.messageList=e.data,n.types=e.types});const o=(e,n)=>{const o={handleAction:e,message:n};t.emit("application",o),n.isHandle=!0};return{...Object(N["toRefs"])(n),translateGroupSystemNotice:hn["e"],handleApplication:o}}});n("10d3");const fm=le()(vm,[["render",mm],["__scopeId","data-v-4cbbc4fe"]]);var gm=fm;const bm=Object(N["defineComponent"])({name:"TUIContact",components:{MessageSystem:gm},props:{displayOnlineStatus:{type:Boolean,default:!1}},setup(e,t){const n=bm.TUIServer,{t:o}=n.TUICore.config.i18n.useI18n(),a=Object(N["reactive"])({groupList:[],searchGroup:{},searchID:"",currentGroup:null,systemConversation:{unreadCount:0},systemMessageList:[],columnName:"",types:n.TUICore.TIM.TYPES,isSearch:!1,env:n.TUICore.TUIEnv,friendList:[],userIDList:[],currentFriend:{},displayOnlineStatus:!1,onlineStatus:!1,userStatusList:new ts.a});d()(n).call(n,a),Object(N["watch"])(()=>e.displayOnlineStatus,async(e,t)=>{e!==t&&(a.displayOnlineStatus=e,n.handleUserStatus(a.displayOnlineStatus,a.userIDList))},{immediate:!0}),Object(N["watch"])(()=>a.userIDList,(e,t)=>{Object(hn["d"])(e,t)||n.handleUserStatus(a.displayOnlineStatus,a.userIDList)});const i=Object(N["computed"])(()=>{const e=a.currentGroup.selfInfo.userID,t=a.currentGroup.joinOption===n.TUICore.TIM.TYPES.JOIN_OPTIONS_NEED_PERMISSION;return!e&&t}),s=async e=>{switch(a.columnName){case"group":a.currentGroup=e;break;case"friend":a.currentFriend=e;break}a.isSearch&&(a.currentGroup=e)},r=async e=>{var t;if(a.currentGroup=null,sm()(t=a.searchID).call(t))try{var i;await n.searchGroupByID(sm()(i=a.searchID).call(i))}catch(s){const e=o("TUIContact.该群组不存在");Object(hn["b"])(e,a.env)}},l=async e=>{const t={groupID:e.groupID,applyMessage:e.applyMessage||o("TUIContact.加群"),type:null===e||void 0===e?void 0:e.type};await n.joinGroup(t),a.currentGroup.apply=!0},c=async e=>{await n.quitGroup(e.groupID),a.currentGroup=null},u=async(e,t)=>{const o=`${t}${e}`;n.TUICore.TUIServer.TUIConversation.getConversationProfile(o).then(e=>{n.TUICore.TUIServer.TUIConversation.handleCurrentConversation(e.data.conversation),g()})},p=e=>{n.dismissGroup(e.groupID),a.currentGroup=null},h=async e=>{var t;"system"!==a.columnName&&"system"===e&&null!==(t=a.systemConversation)&&void 0!==t&&t.conversationID&&(await n.getSystemMessageList(),await n.setMessageRead()),a.currentGroup={},"group"===a.columnName||"group"!==e||a.env.isH5?a.currentGroup={}:a.currentGroup=a.groupList[0],a.searchID="",a.columnName=a.columnName===e?"":e},m=()=>{a.isSearch=!a.isSearch,a.columnName="",a.searchID="",a.searchGroup={},a.currentGroup={}},v=()=>{a.isSearch=!1,a.columnName="",a.searchID="",a.searchGroup={},a.currentGroup={}},f=e=>{n.handleGroupApplication(e)},g=()=>{a.currentGroup={},a.currentFriend={},a.columnName=""},b=e=>{n.TUICore.getUserStatusList(e)};return{...Object(N["toRefs"])(a),handleListItem:s,handleSearchGroup:r,join:l,quit:c,dismiss:p,isNeedPermission:i,select:h,handleGroupApplication:f,toggleSearch:m,init:v,back:g,enter:u,getUserStatusList:b}}});var Om=bm;n("7b94");const ym=le()(Om,[["render",am],["__scopeId","data-v-5f069d6a"]]);var jm=ym;const Im=e=>{jm.TUIServer=wm.server,e.component(wm.name,jm)},km=e=>(wm.server=new Qp(e),e.component(wm.name,wm),wm),wm={name:"TUIContact",component:jm,server:Qp,install:Im,plugin:km};var Em=wm;class Cm extends D{constructor(e){var t;super(),this.currentStore={},this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUISearch",{},d()(t=this.updateStore).call(t,this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){var n,o;null!==this&&void 0!==this&&null!==(n=this.currentStore)&&void 0!==n&&null!==(o=n.conversationData)&&void 0!==o&&o.list&&(this.currentStore.conversationData.list=e.conversationList)}handlePromiseCallback(e){return new f.a((t,n)=>{const o={TUIName:"TUISearch",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)})}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated)}handleFriendListUpdated(e){var t,n;this.currentStore.searchUserList=l()(t=e.data).call(t,e=>null===e||void 0===e?void 0:e.profile),this.currentStore.allUserList=l()(n=e.data).call(n,e=>null===e||void 0===e?void 0:e.profile)}async getConversationProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getConversationProfile(e);t(n)}catch(o){n(o)}})}async getUserProfile(e){return this.handlePromiseCallback(async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}})}async getFriendList(){return this.handlePromiseCallback(async(e,t)=>{try{var n,o;const t=await this.TUICore.tim.getFriendList();this.currentStore.searchUserList=l()(n=t.data).call(n,e=>null===e||void 0===e?void 0:e.profile),this.currentStore.allUserList=l()(o=t.data).call(o,e=>null===e||void 0===e?void 0:e.profile),e(t)}catch(a){t(a)}})}async bind(e){return this.currentStore=e,await this.getFriendList(),this.currentStore}}const Tm=e=>(Object(N["pushScopeId"])("data-v-6ad5b59e"),e=e(),Object(N["popScopeId"])(),e),_m=Tm(()=>Object(N["createElementVNode"])("i",{class:"plus"},null,-1)),Sm={key:0},Dm={key:0,class:"icon icon-c2c"},Um=Tm(()=>Object(N["createElementVNode"])("i",{class:"icon icon-group"},null,-1));function Mm(e,t,n,o,a,i){const s=Object(N["resolveComponent"])("Transfer"),r=Object(N["resolveComponent"])("CreateGroup"),l=Object(N["resolveComponent"])("Dialog");return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["TUI-search",[e.env.isH5?"TUI-search-H5":""]]),ref:"dialog"},[Object(N["createElementVNode"])("header",{onClick:t[2]||(t[2]=(...t)=>e.toggleOptionalShow&&e.toggleOptionalShow(...t))},[_m,e.env.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("h1",Sm,Object(N["toDisplayString"])(e.$t("TUISearch.发起会话")),1)):Object(N["createCommentVNode"])("",!0),Object(N["withDirectives"])(Object(N["createElementVNode"])("ul",null,[Object(N["createElementVNode"])("li",null,[e.env.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",Dm)):Object(N["createCommentVNode"])("",!0),Object(N["createElementVNode"])("h1",{onClick:t[0]||(t[0]=t=>e.showOpen("isC2C"))},Object(N["toDisplayString"])(e.$t("TUISearch.发起单聊")),1)]),Object(N["createElementVNode"])("li",null,[Um,Object(N["createElementVNode"])("h1",{onClick:t[1]||(t[1]=t=>e.showOpen("isGroup"))},Object(N["toDisplayString"])(e.$t("TUISearch.发起群聊")),1)])],512),[[N["vShow"],e.optionalShow]])]),Object(N["createVNode"])(l,{show:e.open,isH5:e.env.isH5,isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":t[3]||(t[3]=t=>e.open=t)},{default:Object(N["withCtx"])(()=>[1===e.step?(Object(N["openBlock"])(),Object(N["createBlock"])(s,{key:0,isSearch:e.needSearch,title:e.showTitle,list:e.searchUserList,isH5:e.env.isH5,isRadio:"isC2C"===e.createConversationType,onSearch:e.handleSearch,onSubmit:e.submit,onCancel:e.toggleOpen},null,8,["isSearch","title","list","isH5","isRadio","onSearch","onSubmit","onCancel"])):(Object(N["openBlock"])(),Object(N["createBlock"])(r,{key:1,onSubmit:e.create,onCancel:e.toggleOpen,isH5:e.env.isH5},null,8,["onSubmit","onCancel","isH5"]))]),_:1},8,["show","isH5"])],2)}const Nm=e=>(Object(N["pushScopeId"])("data-v-279f8f91"),e=e(),Object(N["popScopeId"])(),e),Bm={class:"group-box"},Rm={key:0},Lm={key:1},Vm={key:0,class:"group-list"},xm={class:"group-list-item"},Pm=["src"],Am={class:"group-list-item"},Gm={class:"content"},Hm=Nm(()=>Object(N["createElementVNode"])("i",{class:"icon icon-right"},null,-1)),$m={class:"group-list-item"},zm={class:"content"},Fm=Nm(()=>Object(N["createElementVNode"])("i",{class:"icon icon-right"},null,-1)),Ym={class:"group-list-introduction"},Km={class:"group-list-item"},Wm={key:0,class:"select"},qm=["onClick"],Zm={class:"select-item-header"},Xm={class:"left"},Jm=["src"],Qm={class:"select-item-label"},ev={key:0,class:"icon icon-selected"},tv={class:"select-item-detail"},nv=["href"],ov={class:"content"},av=Nm(()=>Object(N["createElementVNode"])("i",{class:"icon icon-right"},null,-1)),iv={key:0,class:"group-h5-list-item-introduction"},sv={class:"introduction-name"},rv={class:"introduction-detail"},lv=["href"],cv={key:1,class:"group-list group-list-edit"},dv=["placeholder"],uv={key:1,class:"select"},pv=["onClick"],hv={class:"select-item-header"},mv={class:"left"},vv=["src"],fv={class:"select-item-label"},gv={key:0,class:"icon icon-selected"},bv={class:"select-item-detail"},Ov=["href"],yv={class:"group-profile-footer"},jv=["disabled"];function Iv(e,t,n,o,a,i){return Object(N["openBlock"])(),Object(N["createElementBlock"])("div",{class:Object(N["normalizeClass"])(["group",[e.isH5?"group-h5":""]])},[Object(N["createElementVNode"])("div",Bm,[Object(N["createElementVNode"])("header",null,[e.isEdit?(Object(N["openBlock"])(),Object(N["createElementBlock"])("h1",Lm,Object(N["toDisplayString"])(e.$t("TUISearch."+e.editConfig.title)),1)):(Object(N["openBlock"])(),Object(N["createElementBlock"])("h1",Rm,Object(N["toDisplayString"])(e.$t("TUISearch.发起群聊")),1)),Object(N["createElementVNode"])("i",{class:Object(N["normalizeClass"])(["icon",[e.isH5?"icon-back":"icon-close"]]),onClick:t[0]||(t[0]=(...t)=>e.cancel&&e.cancel(...t))},null,2)]),e.isEdit?(Object(N["openBlock"])(),Object(N["createElementBlock"])("div",cv,["input"===e.editConfig.type?Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:0,type:"text","onUpdate:modelValue":t[6]||(t[6]=t=>e.editConfig.value=t),placeholder:e.$t("TUISearch."+e.editConfig.placeholder)},null,8,dv)),[[N["vModelText"],e.editConfig.value]]):(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",uv,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.type,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:Object(N["normalizeClass"])(["select-item",[e.editConfig.value===t.type&&"selected"]]),key:n,onClick:n=>e.selectedEdit(t)},[Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("div",hv,[Object(N["createElementVNode"])("aside",mv,[Object(N["createElementVNode"])("img",{class:"icon",src:t.icon},null,8,vv),Object(N["createElementVNode"])("span",fv,Object(N["toDisplayString"])(t.label),1)]),e.editConfig.value===t.type?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",gv)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("span",bv,Object(N["toDisplayString"])(e.$t("TUISearch."+t.detail)),1),Object(N["createElementVNode"])("a",{href:e.Link.product.url,target:"view_window"},Object(N["toDisplayString"])(e.$t("TUISearch."+t.src)),9,Ov)])],10,pv))),128))]))])):(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",Vm,[Object(N["createElementVNode"])("li",xm,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUISearch.群头像")),1),Object(N["createElementVNode"])("img",{class:"icon",src:e.profile.avatar},null,8,Pm)]),Object(N["createElementVNode"])("ul",null,[Object(N["createElementVNode"])("li",Am,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUISearch.群名称")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:1,class:"group-h5-list-item-content",onClick:t[2]||(t[2]=t=>e.edit("name"))},[Object(N["createElementVNode"])("p",Gm,Object(N["toDisplayString"])(e.profile.name),1),Hm])):Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:0,type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.profile.name=t),placeholder:"请输入群名称"},null,512)),[[N["vModelText"],e.profile.name]])]),Object(N["createElementVNode"])("li",$m,[Object(N["createElementVNode"])("label",null,[Object(N["createTextVNode"])(Object(N["toDisplayString"])(e.$t("TUISearch.群ID")),1),Object(N["createElementVNode"])("text",null,"("+Object(N["toDisplayString"])(e.$t("TUISearch.选填"))+")",1)]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:1,class:"group-h5-list-item-content",onClick:t[4]||(t[4]=t=>e.edit("groupID"))},[Object(N["createElementVNode"])("p",zm,Object(N["toDisplayString"])(e.profile.groupID),1),Fm])):Object(N["withDirectives"])((Object(N["openBlock"])(),Object(N["createElementBlock"])("input",{key:0,type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.profile.groupID=t)},null,512)),[[N["vModelText"],e.profile.groupID]])]),Object(N["createElementVNode"])("li",Ym,[Object(N["createElementVNode"])("div",Km,[Object(N["createElementVNode"])("label",null,Object(N["toDisplayString"])(e.$t("TUISearch.群类型")),1),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("span",{key:1,class:"group-h5-list-item-content",onClick:t[5]||(t[5]=t=>e.edit("type"))},[Object(N["createElementVNode"])("p",ov,Object(N["toDisplayString"])(e.groupTypeDetail.label),1),av])):(Object(N["openBlock"])(),Object(N["createElementBlock"])("ul",Wm,[(Object(N["openBlock"])(!0),Object(N["createElementBlock"])(N["Fragment"],null,Object(N["renderList"])(e.type,(t,n)=>(Object(N["openBlock"])(),Object(N["createElementBlock"])("li",{class:Object(N["normalizeClass"])(["select-item",[e.profile.type===t.type&&"selected"]]),key:n,onClick:n=>e.selected(t)},[Object(N["createElementVNode"])("main",null,[Object(N["createElementVNode"])("div",Zm,[Object(N["createElementVNode"])("aside",Xm,[Object(N["createElementVNode"])("img",{class:"icon",src:t.icon},null,8,Jm),Object(N["createElementVNode"])("span",Qm,Object(N["toDisplayString"])(t.label),1)]),e.profile.type===t.type?(Object(N["openBlock"])(),Object(N["createElementBlock"])("i",ev)):Object(N["createCommentVNode"])("",!0)]),Object(N["createElementVNode"])("span",tv,Object(N["toDisplayString"])(e.$t("TUISearch."+t.detail)),1),Object(N["createElementVNode"])("a",{href:e.Link.product.url,target:"view_window"},Object(N["toDisplayString"])(e.$t("TUISearch."+t.src)),9,nv)])],10,qm))),128))]))]),e.isH5?(Object(N["openBlock"])(),Object(N["createElementBlock"])("article",iv,[Object(N["createElementVNode"])("label",sv,Object(N["toDisplayString"])(e.groupTypeDetail.label)+"：",1),Object(N["createElementVNode"])("span",rv,Object(N["toDisplayString"])(e.$t("TUISearch."+e.groupTypeDetail.detail)),1),Object(N["createElementVNode"])("a",{href:e.Link.product.url,target:"view_window"},Object(N["toDisplayString"])(e.$t("TUISearch."+e.groupTypeDetail.src)),9,lv)])):Object(N["createCommentVNode"])("",!0)])])])),Object(N["createElementVNode"])("footer",yv,[e.isEdit||e.isH5?Object(N["createCommentVNode"])("",!0):(Object(N["openBlock"])(),Object(N["createElementBlock"])("button",{key:0,class:"btn-default",onClick:t[7]||(t[7]=(...t)=>e.cancel&&e.cancel(...t))},Object(N["toDisplayString"])(e.$t("TUISearch.取消")),1)),Object(N["createElementVNode"])("button",{class:"btn-submit",onClick:t[8]||(t[8]=t=>e.submit(e.profile)),disabled:""===e.profile.name&&!e.isEdit},Object(N["toDisplayString"])(e.$t("TUISearch.创建")),9,jv)])])],2)}const kv=Object(N["defineComponent"])({name:"group",props:{isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=Object(N["reactive"])({profile:{groupID:"",name:"",type:"",avatar:"",introduction:"",notification:"",joinOption:""},editConfig:{title:"",value:"",key:"",type:"",placeholder:""},isEdit:!1,type:[{icon:"https://web.sdk.qcloud.com/im/assets/images/Public.svg",label:"陌生人社交群（Public）",type:kv.TUIServer.TUICore.TIM.TYPES.GRP_PUBLIC,detail:"类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/Meeting.svg",label:"临时会议群（Meeting）",type:kv.TUIServer.TUICore.TIM.TYPES.GRP_MEETING,detail:"创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/Work.svg",label:"好友工作群（Work）",type:kv.TUIServer.TUICore.TIM.TYPES.GRP_WORK,detail:"类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/AVChatroom.svg",label:"直播群（AVChatroom）",type:kv.TUIServer.TUICore.TIM.TYPES.GRP_AVCHATROOM,detail:"创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见",src:"产品文档"}]});n.profile.type=n.type[0].type,n.profile.avatar=n.type[0].icon;const o=Object(N["computed"])(()=>{var e;return y()(e=n.type).call(e,e=>e.type===n.profile.type)[0]}),a=e=>{n.profile.type!==e.type&&(n.profile.type=e.type,n.profile.avatar=e.icon)},i=e=>{if(n.isEdit)return n.profile[n.editConfig.key]=n.editConfig.value,n.isEdit=!n.isEdit;const o={name:e.name,type:e.type,groupID:e.groupID,avatar:e.avatar};t.emit("submit",o)},s=()=>{if(n.isEdit)return n.isEdit=!n.isEdit;t.emit("cancel")},r=e=>{switch(n.isEdit=!n.isEdit,n.editConfig.key=e,n.editConfig.value=n.profile[e],e){case"name":n.editConfig.title="设置群名称",n.editConfig.placeholder="请输入群名称",n.editConfig.type="input";break;case"groupID":n.editConfig.title="设置群ID",n.editConfig.placeholder="请输入群ID",n.editConfig.type="input";break;case"type":n.editConfig.title="选择群类型",n.editConfig.type="select";break}},l=e=>{n.editConfig.value!==e.type&&(n.editConfig.value=e.type)};return{...Object(N["toRefs"])(n),selected:a,submit:i,cancel:s,Link:Qi,edit:r,selectedEdit:l,groupTypeDetail:o}}});var wv=kv;n("18c1");const Ev=le()(wv,[["render",Iv],["__scopeId","data-v-279f8f91"]]);var Cv=Ev,Tv=Cv;const _v=Object(N["defineComponent"])({name:"TUISearch",components:{Transfer:Pa,Dialog:Ki,CreateGroup:Tv},setup(e){var t,n,o,a;const i=null===_v||void 0===_v?void 0:_v.TUIServer,{t:s}=i.TUICore.config.i18n.useI18n(),r=Object(N["reactive"])({open:!1,searchUserID:"",selectedList:[],allUserList:[],searchUserList:[],step:1,group:{groupID:"",name:"",type:"",avatar:"",introduction:"",notification:"",joinOption:"",memberList:[{userID:""}]},showTitle:"",createConversationType:"",env:i.TUICore.TUIEnv,optionalShow:!i.TUICore.TUIEnv.isH5,needSearch:!i.TUICore.isOfficial});d()(i).call(i,r);const c=null===i||void 0===i||null===(t=i.TUICore)||void 0===t||null===(n=t.TUIServer)||void 0===n?void 0:n.TUIGroup;Tv.TUIServer=i;const u=(null===(o=window)||void 0===o||null===(a=o.TUIKitTUICore)||void 0===a?void 0:a.isOfficial)&&Yt["c"]&&Object(Yt["c"])()||{},p=Object(N["ref"])();Object(pn["onClickOutside"])(p,()=>{r.env.isH5&&(r.optionalShow=!1,r.searchUserList=[...r.allUserList])});const h=()=>{r.group={groupID:"",name:"",type:"",avatar:"",introduction:"",notification:"",joinOption:"",memberList:[{userID:""}]}},m=()=>{r.open=!r.open,r.open||(r.searchUserID="",r.step=1,h())},v=e=>{if(r.createConversationType===$t["a"].typeC2C){const{userID:t}=e[0];g(t,"C2C"),m()}else{if(!Tv.TUIServer){const e=s("TUISearch.创建群聊，请注册 TUIGroup 模块");Object(hn["b"])(e,r.env)}h(),r.group.memberList=l()(e).call(e,e=>({userID:e.userID})),r.step=2}r.searchUserList=[...r.allUserList]},f=async e=>{e.type===i.TUICore.TIM.TYPES.GRP_PUBLIC&&(r.group.joinOption=i.TUICore.TIM.TYPES.JOIN_OPTIONS_NEED_PERMISSION);const t={...r.group,...e};e.type===i.TUICore.TIM.TYPES.GRP_AVCHATROOM&&(delete t.memberList,delete t.joinOption);try{var n,o;const a=await c.createGroup(t),l=s("TUISearch.创建成功");Object(hn["c"])(l,r.env),(null===(n=window)||void 0===n||null===(o=n.TUIKitTUICore)||void 0===o?void 0:o.isOfficial)&&(null===u||void 0===u?void 0:u.commit)&&(null===u||void 0===u||u.commit("handleTask",3)),m(),e.type===i.TUICore.TIM.TYPES.GRP_AVCHATROOM&&c.joinGroup({groupID:a.data.group.groupID,applyMessage:"",type:a.data.group.type}),g(a.data.group.groupID,"GROUP")}catch(a){Object(hn["b"])(a,r.env)}},g=(e,t)=>{const n=`${t}${e}`;i.getConversationProfile(n).then(e=>{i.TUICore.TUIServer.TUIConversation.handleCurrentConversation(e.data.conversation),Ft.getInstance().reportEvent({name:"conversationType",ext1:"C2C"===t?"TypeC2C-success":"TypeGroup-success"})})},b=e=>{switch(r.open=!0,Ft.getInstance().reportEvent({name:"conversationType",ext1:"createConversation"}),r.searchUserList=[...r.allUserList],e){case"isC2C":return r.createConversationType=$t["a"].typeC2C,r.showTitle=s("TUISearch.发起单聊"),Ft.getInstance().reportEvent({name:"conversationType",ext1:"createConversation-c2c"}),r.showTitle;case"isGroup":return r.createConversationType=$t["a"].typeGroup,r.showTitle=s("TUISearch.发起群聊"),Ft.getInstance().reportEvent({name:"conversationType",ext1:"createConversation-group"}),r.showTitle}},O=()=>{r.env.isH5&&(r.optionalShow=!r.optionalShow)},j=async e=>{try{var t;const n=await i.getUserProfile([e]);if(!n.data.length)return Object(hn["b"])(s("TUISearch.该用户不存在"),r.env),void(r.searchUserList=[...r.allUserList]);r.searchUserList=n.data;const o=y()(t=r.allUserList).call(t,e=>e.userID===n.data[0].userID);r.allUserList=o.length?r.allUserList:[...r.allUserList,...r.searchUserList]}catch(n){return Object(hn["b"])(s("TUISearch.该用户不存在"),r.env),void(r.searchUserList=[...r.allUserList])}};return{...Object(N["toRefs"])(r),toggleOpen:m,handleSearch:j,submit:v,create:f,showOpen:b,toggleOptionalShow:O,dialog:p}}});var Sv=_v;n("9c59");const Dv=le()(Sv,[["render",Mm],["__scopeId","data-v-6ad5b59e"]]);var Uv=Dv;const Mv=e=>{Uv.TUIServer=Bv.server,e.component(Bv.name,Uv)},Nv=e=>(Bv.server=new Cm(e),e.component(Bv.name,Bv),Bv),Bv={name:"TUISearch",component:Uv,server:Cm,install:Mv,plugin:Nv};var Rv=Bv;const Lv=[Td,bu,Pp,Xp,Em,Rv],Vv=e=>{a()(Lv).call(Lv,t=>{t.install(e)})},xv=e=>{a()(Lv).call(Lv,t=>{t.plugin(e)})},Pv={name:"TUIComponents",version:"1.0.0",TUIChat:Td,TUIConversation:bu,TUIProfile:Pp,TUIGroup:Xp,TUIContact:Em,TUISearch:Rv,install:Vv,plugin:xv};var Av=Pv,Gv=n("3581"),Hv=n.n(Gv),$v=n("de21"),zv=n.n($v);class Fv{static init(e){}install(e){}getInstance(){}login(e){return new f.a((e,t)=>{})}destroyed(){}component(e,t){}use(e,t){}setAwaitFunc(e,t){}setCommonStore(e){}setComponentStore(e,t,n){}getStore(){}storeCommonListener(e,t){}}n("d9e2");var Yv=n("c651"),Kv=n.n(Yv);class Wv{setCommonStore(e){}setComponentStore(e,t,n){}storeCommonListener(e,t){}}class qv extends Wv{constructor(){super(),this.storeListener={keys:[],callback:()=>{}},this.store={};const e={};this.store.common=new Proxy(e,{get:(e,t)=>e[t],set:(e,t,n)=>{var o;const a={};return p()(a,e),e[t]=n,e[t]!==a[t]&&_()(o=Kv()(this.storeListener)).call(o,t)>=0&&this.storeListener.callback(e[t],a[t]),e[t]}})}setCommonStore(e){var t;return a()(t=s()(e)).call(t,t=>{if(t in this.store.common)return new Error(t+" 在公共数据已存在，请重新设置");this.store.common[t]=e[t]}),this.store}setComponentStore(e,t,n){return e in this.store?new Error(e+" 该数据模块已存在，请重新设置"):this.store[e]=new Proxy(t,{get:(e,t)=>e[t],set:(e,t,o)=>{const a={};return p()(a,e),e[t]=o,e[t]!==a[t]&&n&&n(e,a),e}})}storeCommonListener(e,t){this.storeListener={keys:e,callback:t}}}Object.prototype.toString;const{isArray:Zv}=Array,Xv=e=>"function"===typeof e;class Jv extends Fv{constructor(e){super(),this.isOfficial=!1,this.isIntl=!1,this.isSDKReady=!1,this.installedPlugins=new ne.a,this.config={},this.TUIComponents=new ne.a,this.loginResolveRejectCache=[],this.SDKAppID=e.SDKAppID,this.TUIServer={},this.store=new qv,this.TIM=Yn["a"],window.TIM=Yn["a"],e.tim?window.TUIKit=e.tim:window.TUIKit=Yn["a"].create({SDKAppID:this.SDKAppID}),this.tim=window.TUIKit,this.tim.registerPlugin({"tim-upload-plugin":Hv.a}),this.tim.registerPlugin({"tim-profanity-filter-plugin":zv.a}),this.bindTIMEvent(),this.TUIEnv=Object(S["b"])(),this.isOfficial=1400187352===this.SDKAppID||1400188366===this.SDKAppID}static init(e){const t=Ft.getInstance();Jv.instance||(Jv.instance=new Jv(e));const{isH5:n}=Object(S["b"])();return t.reportEvent({name:"SDKAppID",ext1:n?"IMTUIKitH5External":"IMTUIKitWebExternal",ext2:n?"IMTUIKitH5External":"IMTUIKitWebExternal",ext3:e.SDKAppID}),t.reportEvent({name:"time",ext1:"firstRunTime"}),window.TUIKitTUICore=Jv.instance,Jv.instance.use(S["d"]),Jv.instance.use(S["e"]),Jv.instance}install(e){var t,n;e.config.globalProperties.$TUIKit=this.getInstance();let o=!0;a()(t=this.installedPlugins).call(t,t=>{e.use(t),"TUIComponents"===t.name&&(o=!1)}),o&&a()(n=this.TUIComponents).call(n,t=>{e.component(t.name,t.component)}),Object(S["a"])(e)}getInstance(){return Jv.instance}login(e){return new f.a((t,n)=>{this.tim.login(e).then(()=>{var o,a,i,s,r;return this.loginResolveRejectCache.push({resolve:t,reject:n}),Jv.isLogin=!0,window._isTIMCallKit=!0,null===Jv||void 0===Jv||null===(o=Jv.instance)||void 0===o||null===(a=o.TUIServer)||void 0===a||null===(i=a.TUICallKit)||void 0===i||i.init({SDKAppID:this.SDKAppID,userID:e.userID,userSig:e.userSig,tim:this.tim}),null!==Jv&&void 0!==Jv&&null!==(s=Jv.instance)&&void 0!==s&&null!==(r=s.TUIServer)&&void 0!==r&&r.TUICallKit&&Ft.getInstance().reportEvent({name:"SDKAppID",ext1:"IMTUIKitWebExternal-call",ext2:"IMTUIKitWebExternal-call",ext3:this.SDKAppID}),null}).catch(e=>{n(e)})})}logout(){return new f.a((e,t)=>{this.tim.logout().then(t=>{this.isSDKReady=!1,Jv.isLogin=!1,e(t)}).catch(e=>{t(e)})})}bindTIMEvent(){this.tim.on(Yn["a"].EVENT.SDK_READY,this.handleSDKReady,this)}unbindTIMEvent(){this.tim.off(Yn["a"].EVENT.SDK_READY,this.handleSDKReady)}handleSDKReady(){var e;this.isSDKReady=!0,this.handelAwaitFunc(Jv.TUIServerFunMap),a()(e=this.loginResolveRejectCache).call(e,({resolve:e})=>{e({msg:"登录成功，且SDK Ready"})})}handelAwaitFunc(e){const t=s()(this.TUIServer);for(let n=0;n<t.length;n++){const o=(null===e||void 0===e?void 0:e.get(t[n]))||[];o.length>0&&l()(o).call(o,e=>e()),null===e||void 0===e||e.delete(t[n])}return e}destroyed(){this.unbindTIMEvent(),this.isSDKReady=!1}component(e,t){const n=this.getInstance();return this.TUIServer||(this.TUIServer={}),this.TUIServer[e]=t.server,this.TUIComponents.has(t)?console.warn(e+" component has already been applied to target TUICore."):this.TUIComponents.add(t),n}use(e,t){const n=this.getInstance();return this.installedPlugins.has(e)?console.warn("Plugin has already been applied to target TUICore."):e&&Xv(null===e||void 0===e?void 0:e.plugin)?(this.installedPlugins.add(e),null===e||void 0===e||e.plugin(n,t)):Xv(e)?(this.installedPlugins.add(e),e(n,t)):console.warn('A plugin must either be a function or an object with an "plugin" function.'),n}usePlugin(e){var t;let n={};return a()(t=this.installedPlugins).call(t,t=>{t.name===e&&(n=t)}),n}setAwaitFunc(e,t){if(this.isSDKReady)t();else{Jv.TUIServerFunMap||(Jv.TUIServerFunMap=new ts.a);const n=Jv.TUIServerFunMap.get(e)||[];n.push(t),Jv.TUIServerFunMap.set(e,n)}}setCommonStore(e){return this.store.setCommonStore(e)}setComponentStore(e,t,n){return this.store.setComponentStore(e,t,n)}getStore(){return this.store.store}storeCommonListener(e,t){return this.store.storeCommonListener(e,t)}}Jv.isLogin=!1;var Qv=n("bbb6");Qv["b"]},fe1e:function(e,t,n){"use strict";n("a2b3")}});